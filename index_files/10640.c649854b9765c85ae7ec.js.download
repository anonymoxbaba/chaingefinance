"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[10640],{211414:(t,e,i)=>{i.d(e,{CircularCacheBuffer:()=>s});var l=i(650151);function n(t){const{prevItem:e,nextItem:i}=t;null!==e&&(e.nextItem=i),null!==i&&(i.prevItem=e)}class s{constructor(t=0,e=1.3){this._cache=new Map,this._lastItem=null,this._firstItem=null,this._size=t,this._sizeLimited=t>0,this._capacityFactor=e}set(t,e){const i={key:t,value:e,prevItem:this._lastItem,nextItem:null};null!==this._lastItem&&(this._lastItem.nextItem=i);const l=this._cache.get(t);return void 0!==l&&(n(l),l===this._firstItem&&(this._firstItem=l.nextItem)),this._cache.set(t,i),this._lastItem=i,null===this._firstItem&&(this._firstItem=i),this._sizeLimited&&this._cache.size>this._size*this._capacityFactor&&this._removeExtraItems(),this}has(t){return this._cache.has(t)}get(t){var e;const i=this._cache.get(t);if(void 0===i)return i;if(i===this._firstItem&&(this._firstItem=null!==(e=i.nextItem)&&void 0!==e?e:i),i!==this._lastItem){n(i);const t=(0,l.ensureNotNull)(this._lastItem);t.nextItem=i,i.prevItem=t,i.nextItem=null,this._lastItem=i}return i.value}clear(){this._cache.clear(),this._firstItem=null,this._lastItem=null}delete(t){const e=this._cache.get(t);return void 0!==e&&(n(e),e===this._lastItem&&(this._lastItem=e.prevItem),e===this._firstItem&&(this._firstItem=e.nextItem)),this._cache.delete(t)}*entries(){if(null!==this._firstItem)for(let t=this._firstItem;null!==t;t=t.nextItem)yield[t.key,t.value]}state(){const t=[];for(const[e,i]of this.entries())t.push([e,i]);return t}restoreState(t){for(const e of t)this.set(e[0],e[1])}_removeExtraItems(){const t=this._cache.size-this._size;let e=(0,l.ensureNotNull)(this._firstItem);for(let i=0;i<t;i+=1)this._cache.delete(e.key),e=(0,l.ensureNotNull)(e.nextItem);e.prevItem=null,this._firstItem=e}}},95370:(t,e,i)=>{i.d(e,{PanePriceAxisView:()=>s});var l=i(5486);class n{constructor(t){this._priceAxisViewRenderer=null,this._rendererOptions=null,this._align="right",this._textWidthCache=t}setParams(t,e,i,l,n){this._priceAxisViewRenderer=t,this._rendererOptions=e,this._align=n}draw(t,e){null!==this._rendererOptions&&null!==this._priceAxisViewRenderer&&this._priceAxisViewRenderer.draw(t,e,this._rendererOptions,this._textWidthCache,this._align)}hitTest(t,e){var i,l;return void 0===(null===(i=this._priceAxisViewRenderer)||void 0===i?void 0:i.hitTest)?null:null===(l=this._priceAxisViewRenderer)||void 0===l?void 0:l.hitTest(t,e,this._align)}}class s{constructor(t,e,i){this._renderer=null,this._invalidated=!0,this._priceAxisView=t,this._textWidthCache=new l.TextWidthCache(100),this._dataSource=e,this._chartModel=i,this._fontSize=-1,this._panePriceAxisViewRenderer=new n(this._textWidthCache)}update(t){this._invalidated=!0}renderer(t){return this._invalidated&&this._updateImpl(t),this._renderer}_position(){const t=this._chartModel.crossHairSource(),e=this._dataSource===t?t.pane:this._chartModel.paneForSource(this._dataSource);if(null===e)return null;const i=this._priceScale();if(null===i)return null;let l=e.priceScalePosition(i)
;return"overlay"===l&&(l=e.priceScalePosition(e.defaultPriceScale())),"overlay"===l?null:l}_updateImpl(t){this._renderer=null;const e=this._position();if(null===e)return;const i=this._chartModel.priceAxisRendererOptions();i.fontSize!==this._fontSize&&(this._fontSize=i.fontSize,this._textWidthCache.reset()),this._panePriceAxisViewRenderer.setParams(this._priceAxisView.paneRenderer(),i,t.mediaSize.width,t.mediaSize.height,e),this._renderer=this._panePriceAxisViewRenderer,this._invalidated=!1}_priceScale(){return this._dataSource.priceScale()}}},403862:(t,e,i)=>{i.d(e,{PaneRendererArea:()=>a});var l=i(708698),n=i(286436),s=i(665798);class a extends l.PaneRendererLine{constructor(t){t.forceLineColor=!1,super(t)}_drawImpl(t){var e,i,a,r,o;const d=this._data;if(0===d.items.length)return;let h=null!==(i=null===(e=this._data.visibleItemsRange)||void 0===e?void 0:e.startItemIndex)&&void 0!==i?i:0,c=(null!==(r=null===(a=this._data.visibleItemsRange)||void 0===a?void 0:a.endItemIndex)&&void 0!==r?r:this._data.items.length)-1;for(;h<c&&!(0,n.coordinateIsValid)(d.items[h].y);)h++;for(;c>=0&&!(0,n.coordinateIsValid)(d.items[c].y);)c--;if(h>c)return;const{context:u,horizontalPixelRatio:_,verticalPixelRatio:v}=t;u.save(),u.scale(_,v),u.lineCap="round",u.strokeStyle=d.lineColor,u.lineWidth=d.lineWidth,(0,s.setLineStyle)(u,d.lineStyle),u.lineWidth=1;const f={},m=new l.PaneRendererLineItemsIterator(this._data.items,h,c+1,this._data.skipHoles);for(;m.next();){const t=m.currentValue();let e;e=(0,l.isValidPoint)(t)&&t.style?t.style.color:d.lineColor;const i=m.nextValue();if((0,l.isValidPoint)(i)&&(null==i?void 0:i.style)){const l=i.style.color;if(e!==l){const e=f[l]||[];e.push(t),f[l]=e}}const n=f[e]||[];n.push(t),f[e]=n}for(const t of Object.keys(f)){const e=f[t];u.beginPath();let i=0;for(let n=0;n<e.length;n++){const s=e[n];(0,l.isValidPoint)(s)&&(s.style&&(null===(o=s.style)||void 0===o?void 0:o.color)!==t&&(u.moveTo(Math.round(e[i].center),d.bottom),this._walkLine(u,e.slice(i,n),!0,d.bottom,!0),i=n))}if(u.moveTo(Math.round(e[i].center),d.bottom),this._walkLine(u,e.slice(i,e.length),!0,d.bottom,!0),u.closePath(),d.isSeries){const t=u.createLinearGradient(0,0,0,d.bottom);t.addColorStop(0,d.color1),t.addColorStop(1,d.color2),u.fillStyle=t,d.simpleMode=!0}else u.fillStyle=t;u.fill()}u.lineWidth=d.lineWidth,u.restore(),super._drawImpl(t)}}},708698:(t,e,i)=>{i.d(e,{PaneRendererLine:()=>_,PaneRendererLineItemsIterator:()=>u,isValidPoint:()=>c});var l=i(650151),n=i(86441),s=i(204652),a=i(509078),r=i(286436),o=i(665798),d=i(961970);const h={y:NaN};function c(t){return null!==t&&!isNaN(t.y)}class u{constructor(t,e,i,n){this._calculatedPrev={index:null,currentBreakProcessed:!1,value:null},this._calculatedCurrent={index:null,currentBreakProcessed:!1,value:null},this._calculatedNext={index:null,currentBreakProcessed:!1,value:null},this._preallocatedVariable={index:null,currentBreakProcessed:!1,value:null},t.length&&((0,l.assert)(e<=i,"First index must be less or equal to last index"),(0,
l.assert)(e<t.length,"First index must be less then array length"),(0,l.assert)(i<=t.length,"Last index must be less or equal to array length")),this._items=t,this._firstIndexWithRange=e,this._lastIndexWithRange=i,this._skipHoles=n}next(){if(0===this._items.length)return!1;if(null!==this._calculatedNext.index)return null!==this._calculatedNext.value&&(this._calculatedPrev=this._calculatedCurrent,this._calculatedCurrent=this._calculatedNext,this._calculatedNext={index:null,currentBreakProcessed:!1,value:null},!0);let t;this._preallocatedVariable={...this._calculatedCurrent};do{null===this._preallocatedVariable.index?(this._preallocatedVariable.index=this._firstIndexWithRange,this._preallocatedVariable.currentBreakProcessed=!1,t=this._preallocatedVariable.index<this._lastIndexWithRange):(this._incrementPointer(this._preallocatedVariable),t=this._isValidPointer(this._preallocatedVariable)),t&&this._calcVaue(this._preallocatedVariable)}while(t&&this._skipHoles&&!c(this._preallocatedVariable.value));return t&&(this._calculatedPrev=this._calculatedCurrent,this._calculatedCurrent=this._preallocatedVariable,this._calculatedNext={index:null,currentBreakProcessed:!1,value:null}),t}prevValue(){return this._calculatedPrev.value}currentValue(){return(0,l.ensureNotNull)(this._calculatedCurrent.value)}currentValueIsLast(){return(0,l.ensureNotNull)(this._calculatedCurrent.index)===this._items.length-1}currentValueIsFirst(){return 0===(0,l.ensureNotNull)(this._calculatedCurrent.index)}nextValue(){if(null!==this._calculatedNext.index)return this._calculatedNext.value;let t;this._calculatedNext={...this._calculatedCurrent,value:null};do{this._incrementPointer(this._calculatedNext),t=this._isValidPointer(this._calculatedNext),t?this._calcVaue(this._calculatedNext):this._calculatedNext.value=null}while(t&&this._skipHoles&&!c(this._calculatedNext.value));return this._calculatedNext.value}atStart(){return this._calculatedCurrent.index===this._firstIndexWithRange&&!this._calculatedCurrent.currentBreakProcessed}atEnd(){const t=(0,l.ensureNotNull)(this._calculatedCurrent.index);return t<this._lastIndexWithRange&&(this._calculatedCurrent.currentBreakProcessed||!this._needBreakBefore(t))}_needBreakBefore(t){return!!this._items[t].breakBefore&&!this._skipHoles}_calcVaue(t){const e=(0,l.ensureNotNull)(t.index);this._needBreakBefore(e)&&!t.currentBreakProcessed?t.value=h:t.value=this._items[e]}_incrementPointer(t){const e=(0,l.ensureNotNull)(t.index);this._needBreakBefore(e)&&!this._calculatedCurrent.currentBreakProcessed?t.currentBreakProcessed=!0:(t.index=e+1,t.currentBreakProcessed=!1)}_isValidPointer(t){const e=(0,l.ensureNotNull)(t.index);return e<this._lastIndexWithRange||e===this._lastIndexWithRange-1&&this._needBreakBefore(e)&&t.currentBreakProcessed}}class _ extends d.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=t}hitTest(t){var e,i,l,o;const d=(0,r.interactionTolerance)().series+this._data.lineWidth/2
;let h=null!==(i=null===(e=this._data.visibleItemsRange)||void 0===e?void 0:e.startItemIndex)&&void 0!==i?i:0,c=(null!==(o=null===(l=this._data.visibleItemsRange)||void 0===l?void 0:l.endItemIndex)&&void 0!==o?o:this._data.items.length)-1;for(;c-h>2;){const e=Math.round((c+h)/2);this._data.items[e].center<=t.x?h=e:c=e}h=Math.max(1,h-1),c=Math.min(this._data.items.length-1,c+1);for(let e=h;e<=c;++e){const i=this._data.items[e-1],l=this._data.items[e],r=i.center,o=l.center;if((0,s.distanceToSegment)(new n.Point(r,i.y),new n.Point(o,l.y),new n.Point(t.x,t.y)).distance<=d)return this._data.hittest?this._data.hittest:new a.HitTestResult(a.HitTarget.Regular)}return null}_drawImpl(t){const{context:e,horizontalPixelRatio:i,verticalPixelRatio:l}=t;e.scale(i,l),e.lineCap="round",e.lineJoin="round",e.strokeStyle=this._data.lineColor,e.fillStyle=this._data.lineColor,e.lineWidth=this._data.lineWidth,(0,o.setLineStyle)(e,this._data.lineStyle),(0,r.setValidLineStyle)(e,this._data.lineStyle),this._data.simpleMode?this._drawSimpleMode(e,i,l):this._drawLines(e)}_drawSimpleMode(t,e,i){var l,n,s,a;t.beginPath(),this._walkLine(t,this._data.items,!1,NaN),t.stroke();const r=this._data.lineWidth+2;if(this._data.withMarkers&&2*r<this._data.barSpacing){t.scale(1/e,1/i);const o=Math.max(1,Math.floor(e))%2/2,d=r*i+o,h=2*Math.PI;t.beginPath();const c=null!==(n=null===(l=this._data.visibleItemsRange)||void 0===l?void 0:l.startItemIndex)&&void 0!==n?n:0;for(let l=(null!==(a=null===(s=this._data.visibleItemsRange)||void 0===s?void 0:s.endItemIndex)&&void 0!==a?a:this._data.items.length)-1+1;l-- >=c;){const n=this._data.items[l];if(n){const l=Math.round(n.center*e)+o,s=n.y*i;t.moveTo(l,s),t.arc(l,s,d,0,h)}}t.fill()}}_walkLine(t,e,i,l,n){var s,a,r,o;if(!e)return;const d=.25*this._data.barSpacing;let h,_,v=null;const f=n?0:null!==(a=null===(s=this._data.visibleItemsRange)||void 0===s?void 0:s.startItemIndex)&&void 0!==a?a:0,m=n?e.length:Math.min(null!==(o=null===(r=this._data.visibleItemsRange)||void 0===r?void 0:r.endItemIndex)&&void 0!==o?o:e.length,e.length);if(f>m||f>=e.length)return;const x=new u(e,f,m,this._data.skipHoles);for(;x.next();){if(h=x.currentValue(),_=x.nextValue(),c(h)){const e=Math.round(h.center);v&&c(v)?(t.lineTo(e,h.y),i&&!c(_)&&t.lineTo(e,l)):_&&c(_)?i?(x.atStart()||t.lineTo(e,l),t.lineTo(e,h.y)):t.moveTo(e,h.y):i?(x.atStart()||t.lineTo(e-d,l),t.lineTo(e-d,h.y),t.lineTo(e+d,h.y),t.lineTo(e+d,l)):(t.moveTo(e-d,h.y),t.lineTo(e+d,h.y))}v=h}}_drawLines(t){var e,i,l,n;if(!this._data.items.length)return;let s,a,o=null;const d=.25*this._data.barSpacing;t.beginPath();const h=null!==(i=null===(e=this._data.visibleItemsRange)||void 0===e?void 0:e.startItemIndex)&&void 0!==i?i:0,_=null!==(n=null===(l=this._data.visibleItemsRange)||void 0===l?void 0:l.endItemIndex)&&void 0!==n?n:this._data.items.length;if(h>_||h>=this._data.items.length)return;const v=this._data.items[h];v&&t.moveTo(v.center,v.y);let f,m=t.strokeStyle,x=t.lineWidth;const p=new u(this._data.items,h,_,this._data.skipHoles);for(;p.next();){let e,i,l;o=p.prevValue(),
s=p.currentValue(),a=p.nextValue();let n=!1;if(c(s)&&(s.style&&!this._data.forceLineColor?(e=s.style.color,i=s.style.width,l=s.style.style):(e=this._data.lineColor,i=this._data.lineWidth,l=this._data.lineStyle),this._data.ignorePaletteLineWidth&&(i=this._data.lineWidth),n=e!==m||i!==x||l!==f),n)if(m=e,x=i,f=l,t.stroke(),t.beginPath(),t.strokeStyle=e,t.lineWidth=i,(0,r.setValidLineStyle)(t,l),c(o))t.moveTo(o.center,o.y);else{const e=s;t.moveTo(e.center,e.y)}I=o,y=a,c(g=s)&&(c(I)?t.lineTo(g.center,g.y):y&&c(y)?t.moveTo(g.center,g.y):(t.moveTo(g.center-d,g.y),t.lineTo(g.center+d,g.y)))}var I,g,y;t.stroke()}}},810873:(t,e,i)=>{i.d(e,{PaneRendererStepLine:()=>m,StepLineDecoration:()=>l});var l,n=i(204652),s=i(86441),a=i(432059),r=i(509078),o=i(286436),d=i(665798),h=i(961970),c=i(708698);!function(t){t[t.None=0]="None",t[t.Diamonds=1]="Diamonds"}(l||(l={}));class u{constructor(t){this._forceExtendFirstBar=!!t}initialize(t,e,i){var l,n,s,a;const{context:r,horizontalPixelRatio:o,verticalPixelRatio:h}=e,c=t.lineStyle;r.lineCap="butt",r.lineJoin="round";const u=Math.max(Math.floor(null!==(n=null===(l=i.style)||void 0===l?void 0:l.width)&&void 0!==n?n:t.lineWidth*o));void 0!==c&&(0,d.setLineStyle)(r,c);const _=u%2?.5:0;r.moveTo(Math.round(i.center*o)+_,Math.round(i.y*h)+_),r.strokeStyle=null!==(a=null===(s=i.style)||void 0===s?void 0:s.color)&&void 0!==a?a:t.lineColor,r.lineWidth=u}startFragment(t,e,i,l){t.beginPath();const n=i.firstItem&&i.extendToBarsEndings?e.center:e.left;t.moveTo(isNaN(n)?-50:n,e.y)}finishFragment(t,e,i){e&&i&&t.lineTo(e.left,i.y),t.stroke()}hitTest(t,e,i,l){var a,r;if(!(0,c.isValidPoint)(e))return!1;const d=null!==(r=null===(a=e.style)||void 0===a?void 0:a.width)&&void 0!==r?r:t.lineWidth,h=(0,o.interactionTolerance)().series+d/2,{left:u,y:_}=e,v=isNaN(u)?-50:u;let f,m;return i&&(0,c.isValidPoint)(i)?(f=i.left,m=i.y):(f=e.right,m=e.y),!(v<l.x-h&&f<l.x-h||v>l.x+h&&f>l.x+h)&&((0,n.distanceToSegment)((0,s.point)(v,_),(0,s.point)(f,_),l).distance<h||_!==m&&(0,n.distanceToSegment)((0,s.point)(f,_),(0,s.point)(f,m),l).distance<h)}applyColor(t,e){t.strokeStyle=e}applyLineWidth(t,e){t.lineWidth=e}drawItem(t,e,i,l){const n=t.context;void 0!==l&&n.lineTo(e.left,l.y),n.lineTo(!i.firstItem||i.extendToBarsEndings||this._forceExtendFirstBar?e.left:e.center,e.y),n.lineTo(i.lastItem&&!i.extendToBarsEndings?e.center:e.right,e.y)}}class _{constructor(){this._lineWidth=1}initialize(t,e,i){var l,n,s,a;const{context:r,horizontalPixelRatio:o}=e;this.applyColor(r,null!==(n=null===(l=i.style)||void 0===l?void 0:l.color)&&void 0!==n?n:t.lineColor),this._lineWidth=Math.max(Math.floor(null!==(a=null===(s=i.style)||void 0===s?void 0:s.width)&&void 0!==a?a:t.lineWidth*o))}startFragment(t,e,i,l){t.beginPath()}finishFragment(t){t.fill()}drawItem(t,e,i,l){if(i.valIsNotSameAsPrev&&!isNaN(e.left)){const i=t.context;i.save(),i.translate(e.left,e.y),i.rotate(Math.PI/4);const l=this._scaleByLineWidth(this._lineWidth);i.scale(l,l),this._drawItemRotatedAndTranslated(t),i.restore()}}applyLineWidth(t,e){this._lineWidth=e}hitTest(t,e,i,l){var n,a
;if(!e.valIsNotSameAsPrev)return!1;const r=l.subtract((0,s.point)(e.left,e.y));return this._hitTestTranslated(r,null!==(a=null===(n=e.style)||void 0===n?void 0:n.width)&&void 0!==a?a:t.lineWidth)}_scaleByLineWidth(t){return Math.sqrt(t)}}class v extends _{applyColor(t,e){t.fillStyle=e}_hitTestTranslated(t,e){return Math.abs(t.x)+Math.abs(t.y)<8*this._scaleByLineWidth(e)/2}_drawItemRotatedAndTranslated(t){(0,d.drawRoundRect)(t.context,-4,-4,8,8,2,!0)}}class f extends _{applyColor(t,e){t.fillStyle=(0,a.applyTransparency)(e,85)}_hitTestTranslated(t,e){return Math.abs(t.x)+Math.abs(t.y)<21*this._scaleByLineWidth(e)/2}_drawItemRotatedAndTranslated(t){(0,d.drawRoundRect)(t.context,-10.5,-10.5,21,21,5,!0)}}class m extends h.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=null,this._data=null!=t?t:null}setData(t){this._data=t}hitTest(t){var e,i;const n=this._data;if(null===n||0===n.items.length)return null;const{items:s,visibleItemsRange:a,skipHoles:o}=n,d=null!==(e=null==a?void 0:a.startItemIndex)&&void 0!==e?e:0,h=null!==(i=null==a?void 0:a.endItemIndex)&&void 0!==i?i:s.length;if(h<=d)return null;const _=n.decoration===l.Diamonds?[new u,new f]:[new u];const v=new c.PaneRendererLineItemsIterator(s,d,h,o);for(;v.next();){const e=v.currentValue(),i=v.nextValue();for(const l of _)if((0,c.isValidPoint)(e)&&l.hitTest(n,e,(0,c.isValidPoint)(i)?i:null,t))return new r.HitTestResult(r.HitTarget.Regular)}return null}_drawImpl(t){if(null===this._data||0===this._data.items.length)return;(this._data.decoration===l.Diamonds?[new u(!0),new v,new f]:[new u]).forEach((e=>this._drawDecorationItem(t,e)))}_drawDecorationItem(t,e){var i,l,n,s,a,r,o,d,h,u;if(null===this._data||0===this._data.items.length)return;const{lineWidth:_,lineColor:v,items:f,visibleItemsRange:m,skipHoles:x,extendToBarsEndings:p}=this._data,{context:I,horizontalPixelRatio:g,verticalPixelRatio:y}=t;let P=Math.max(Math.floor((null!==(l=null===(i=f[0].style)||void 0===i?void 0:i.width)&&void 0!==l?l:_)*g)),C=P%2?.5:0;e.initialize(this._data,t,f[0]);const w=null!==(n=null==m?void 0:m.startItemIndex)&&void 0!==n?n:0,S=null!==(s=null==m?void 0:m.endItemIndex)&&void 0!==s?s:f.length;if(S<=w)return;let b,R,T;I.beginPath(),e.applyColor(I,null!==(r=null===(a=f[w].style)||void 0===a?void 0:a.color)&&void 0!==r?r:v),e.applyLineWidth(I,P);let M=!1;const B=new c.PaneRendererLineItemsIterator(f,w,S,x);for(;B.next();){const i=B.currentValue();if(!(0,c.isValidPoint)(i)){b=void 0,M=!0;continue}const l=null!==(d=null===(o=i.style)||void 0===o?void 0:o.color)&&void 0!==d?d:v,n=null!==(u=null===(h=i.style)||void 0===h?void 0:h.width)&&void 0!==u?u:_,s=l!==R,a=n!==T,r={firstItem:B.currentValueIsFirst(),lastItem:B.currentValueIsLast(),extendToBarsEndings:p,valIsNotSameAsPrev:i.valIsNotSameAsPrev},f={y:Math.round(i.y*y)+C,left:Math.round(i.left*g)+C,center:Math.round(i.center*g)+C,right:Math.round(i.right*g)+C};(s||a||M)&&(R&&T&&e.finishFragment(I,f,b),s&&e.applyColor(I,l),a&&(P=Math.max(1,Math.floor(n*g)),C=P%2?.5:0,e.applyLineWidth(I,P)),e.startFragment(I,f,r,b),M=!1,R=l,T=n),
e.drawItem(t,f,r,b),b=f}e.finishFragment(I)}}},836687:(t,e,i)=>{i.d(e,{SelectionIndexes:()=>n});var l=i(650151);class n{constructor(t){this._baseIndex=null,this._offsetInBar=null,this._offsetInTime=null,this._barsBetweenPoints=null,this._timescale=t}indexes(){const t=this._timescale.visibleBarsStrictRange();if(null===t)return[];const e=t.firstBar(),i=t.lastBar();if(null===this._offsetInTime||null===this._barsBetweenPoints){const t=this._timescale.barSpacing();this._barsBetweenPoints=Math.floor(120/t),this._offsetInBar=i%this._barsBetweenPoints,this._offsetInTime=this._timescale.indexToTimePoint(this._offsetInBar),this._baseIndex=this._timescale.baseIndex()}const n=this._timescale.baseIndex();this._baseIndex!==n&&(this._baseIndex=n,this._offsetInBar=(0,l.ensureNotNull)(this._timescale.timePointToIndex(this._offsetInTime)));const s=(0,l.ensureNotNull)(this._offsetInBar),a=[];let r=Math.floor((e-s)/this._barsBetweenPoints);const o=Math.floor((i-s)/this._barsBetweenPoints);for(;r<=o;r++)a.push(s+r*this._barsBetweenPoints);return a}clear(){this._offsetInBar=null,this._offsetInTime=null,this._baseIndex=null,this._barsBetweenPoints=null}}},112377:(t,e,i)=>{i.d(e,{SelectionRenderer:()=>d});var l=i(934026),n=i(960095),s=i(509078),a=i(86e3),r=i(961970);const o=n.colorsPalette["color-tv-blue-600"];class d extends r.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=t||null}setData(t){this._data=t}hitTest(t){var e;if(!this._data||!this._data.visible)return null;for(let i=0;i<this._data.points.length;i++){const l=this._data.points[i];if(l.subtract(t).length()<=5.5)return new s.HitTestResult(this._data.hittestResult,{pointIndex:l.pointIndex,cursorType:null!==(e=l.cursorType)&&void 0!==e?e:a.PaneCursorType.Default})}return null}doesIntersectWithBox(t){return!!this._data&&this._data.points.some((e=>(0,l.pointInBox)(e,t)))}_drawImpl(t){if(null===this._data||!this._data.visible)return;const{context:e,horizontalPixelRatio:i}=t;e.strokeStyle=void 0!==this._data.color?this._data.color:o,e.lineCap="butt";const l=Math.max(1,Math.floor(i));e.lineWidth=l;const n=this._data.vertOffset||0;for(let i=0;i<this._data.points.length;++i){const a=this._data.points[i];(s=a,Number.isFinite(s.x)&&Number.isFinite(s.y))&&(e.fillStyle=this._data.bgColors[i],this._drawMarker(t,{center:a.x,y:a.y},n,l))}var s}_drawMarker(t,e,i,l){const{context:n,horizontalPixelRatio:s,verticalPixelRatio:a}=t;let r=Math.round(3.5*s*2);r%2!=l%2&&(r+=1);let o=Math.round(r+2*(.5*l+.75*s));o%2!=l%2&&(o+=1);const d=Math.round(e.center*s),h=Math.round((e.y+i)*a),c=l%2/2;n.beginPath(),n.arc(d+c,h+c,o/2,0,2*Math.PI,!0),n.closePath(),n.fill(),n.beginPath(),n.arc(d+c,h+c,r/2,0,2*Math.PI,!0),n.closePath(),n.stroke()}}},40563:(t,e,i)=>{function l(t){t.lineWidth=void 0,t.lineStyle=void 0;for(let e=0;e<t.colors.length;e++)t.colors[e]=void 0;return t}function n(){return{colors:[void 0,void 0,void 0,void 0,void 0,void 0,void 0],lineWidth:void 0,lineStyle:void 0}}i.d(e,{clearStyle:()=>l,createEmptyStyle:()=>n})},559678:(t,e,i)=>{i.d(e,{PaneRendererColumns:()=>s})
;var l=i(961970),n=i(509078);class s extends l.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=null,this._precalculatedCache=[],this.setData(t)}setData(t){this._data=t,this._precalculatedCache=[]}hitTest(t){var e,i,l,s;if(null===this._data)return null;const a=null!==(i=null===(e=this._data.visibleItemsRange)||void 0===e?void 0:e.startItemIndex)&&void 0!==i?i:0,r=(null!==(s=null===(l=this._data.visibleItemsRange)||void 0===l?void 0:l.endItemIndex)&&void 0!==s?s:this._data.items.length)-1;for(let e=a;e<=r;e++){const i=this._data.items[e];if(t.x>=i.left&&t.x<=i.right){const e=i.y;if(t.y>=Math.min(e,this._data.histogramBase)&&t.y<=Math.max(e,this._data.histogramBase))return new n.HitTestResult(n.HitTarget.Regular)}}return null}_drawImpl(t){var e,i,l,n;if(null===this._data||0===this._data.items.length)return;const{context:s,horizontalPixelRatio:a,verticalPixelRatio:r}=t;this._precalculatedCache.length||this._fillPrecalculatedCache(a);const o=Math.max(1,Math.floor(a)),d=Math.max(1,Math.floor(r)),h=Math.round(this._data.histogramBase*r)-Math.floor(o/2),c=h+o,u=this._data.lineColor,_=null!==(i=null===(e=this._data.visibleItemsRange)||void 0===e?void 0:e.startItemIndex)&&void 0!==i?i:0,v=(null!==(n=null===(l=this._data.visibleItemsRange)||void 0===l?void 0:l.endItemIndex)&&void 0!==n?n:this._data.items.length)-1;for(let t=_;t<=v;t++){const e=this._data.items[t],i=this._precalculatedCache[t-_],l=Math.round(e.y*r);let n,a;s.fillStyle=e.style?e.style.color:u,l<=h?(n=l,a=c):(n=h,a=l-Math.floor(d/2)+d),s.fillRect(i.left,n,i.right-i.left+1,a-n)}}_fillPrecalculatedCache(t){var e,i;if(null===this._data||0===this._data.items.length)return void(this._precalculatedCache=[]);const{barSpacing:l,visibleItemsRange:n,items:s}=this._data,a=Math.ceil(l*t)<=1?0:Math.max(1,Math.floor(t)),r=null!==(e=null==n?void 0:n.startItemIndex)&&void 0!==e?e:0,o=(null!==(i=null==n?void 0:n.endItemIndex)&&void 0!==i?i:s.length)-1,d=o-r+1;if(d<=0)return void(this._precalculatedCache=[]);this._precalculatedCache=new Array(d);for(let e=r;e<=o;e++){const i=s[e],l=Math.round(i.center*t);let n,o;const d=Math.round((i.right-i.left)*t)-a;if(d%2){const t=(d-1)/2;n=l-t,o=l+t}else{const t=d/2;n=l-t,o=l+t-1}this._precalculatedCache[e-r]={left:n,right:o,roundedCenter:l,center:i.center*t,time:i.timePointIndex}}for(let t=r+1;t<=o;t++){const e=this._precalculatedCache[t-r],i=this._precalculatedCache[t-r-1];e.time===i.time+1&&(e.left-i.right!==a+1&&(i.roundedCenter>i.center?i.right=e.left-a-1:e.left=i.right+a+1))}let h=Math.ceil(l*t);for(let t=r+1;t<=o;t++){const e=this._precalculatedCache[t-r];e.right<e.left&&(e.right=e.left);const i=e.right-e.left+1;h=Math.min(i,h)}if(a>0&&h<4)for(let t=r+1;t<=o;t++){const e=this._precalculatedCache[t-r];e.right-e.left+1>h&&(e.roundedCenter>e.center?e.right-=1:e.left+=1)}}}},962973:(t,e,i)=>{i.d(e,{createStudyPlotColorProvider:()=>_});var l=i(748947),n=i(650151),s=i(40563);const a=new Map([[0,"color"],[2,"textColor"],[3,"borderColor"],[4,"wickColor"],[5,"colorup"],[6,"colordown"]]);class r{constructor(t){this._plotStyle=t}
getPlotPointStyle(t,e){const i=e?(0,s.clearStyle)(e):(0,s.createEmptyStyle)();return a.forEach(((t,e)=>{this._plotStyle[t]&&(i.colors[e]=this._plotStyle[t].value())})),i.lineWidth=this._plotStyle.linewidth?this._plotStyle.linewidth.value():void 0,i.lineStyle=this._plotStyle.linestyle?this._plotStyle.linestyle.value():void 0,i}isColorDefined(){return!0}singleColor(){return!0}getDefaultPlotPointStyle(){return null}}const o=[0,1,2,3,4,5,6];class d{constructor(t,e,i,l){this._palettesColors=new Map,this._defaultPlotColors=new Map,this._indexes=l;const s=e.styles[i];if(s)for(const[t,e]of a)this._defaultPlotColors.set(t,s[e]);const r=(0,n.ensureDefined)(t.palettes),o=t.plots;l.forEach(((t,i)=>{const l=o[t];if(l&&"palette"in l){const t=r[l.palette],n=e.palettes[l.palette];if(t&&n){const{valToIndex:e}=t,{colors:l}=n,s={...l};e&&Object.keys(e).forEach((t=>{const i=e[t];void 0!==i&&(s[t]=l[i])})),this._palettesColors.set(i,s)}}}))}getPlotPointStyle(t,e){const i=e?(0,s.clearStyle)(e):(0,s.createEmptyStyle)();return o.forEach((e=>{var l,s;if(this._palettesColors.has(e)){const s=t[(0,n.ensureDefined)(this._indexes.get(e))+1];if("number"==typeof s){const t=null===(l=this._palettesColors.get(e))||void 0===l?void 0:l[s];0===e&&t&&(i.lineWidth=t.width.value(),i.lineStyle=t.style.value()),i.colors[e]=null==t?void 0:t.color.value()}else i.colors[e]="transparent"}else i.colors[e]=null===(s=this._defaultPlotColors.get(e))||void 0===s?void 0:s.value()})),i}getDefaultPlotPointStyle(){var t;const e=null===(t=this._palettesColors.get(0))||void 0===t?void 0:t[0];if(void 0!==e){return{colors:[e.color.value(),void 0,void 0,void 0,void 0,void 0,void 0],lineStyle:void 0,lineWidth:e.width.value()}}return null}isColorDefined(){return!!this._palettesColors.size}singleColor(){return!1}}var h=i(19932);class c{constructor(t){this._rgbaFromInteger=(0,h.rgbaFromIntegerCached)(),this._indexes=t}getPlotPointStyle(t,e){const i=e?(0,s.clearStyle)(e):(0,s.createEmptyStyle)();return this._indexes.forEach(((e,l)=>{const n=t[e+1];if(null!=n){const t=this._rgbaFromInteger(n);i.colors[l]=t}else i.colors[l]="transparent"})),i}isColorDefined(){return!0}singleColor(){return!1}getDefaultPlotPointStyle(){return null}}const u=new Map([[0,function(t,e){const i=(0,l.isColorerPlot)(e)||(0,l.isOhlcColorerPlot)(e);return"target"in e&&e.target===t&&i}],[2,function(t,e){const i=(0,l.isTextColorerPlot)(e);return"target"in e&&e.target===t&&i}],[1,function(t,e){return(0,l.isBgColorerPlot)(e)&&e.id===t}],[3,function(t,e){const i=(0,l.isCandleBorderColorerPlot)(e);return"target"in e&&e.target===t&&i}],[4,function(t,e){const i=(0,l.isCandleWickColorerPlot)(e);return"target"in e&&e.target===t&&i}],[5,function(t,e){const i=(0,l.isUpColorerPlot)(e);return"target"in e&&e.target===t&&i}],[6,function(t,e){const i=(0,l.isDownColorerPlot)(e);return"target"in e&&e.target===t&&i}]]);function _(t,e,i){const{colorers:l}=function(t,e){const i=t.plots,l=i.findIndex((t=>t.id===e)),n=new Map;return i.forEach(((t,i)=>{u.forEach(((l,s)=>{l(e,t)&&n.set(s,i)}))})),{plotIndex:-1===l?null:l,colorers:n}
}(t,i);if(l.size)return t.isRGB?new c(l):new d(t,e,i,l);{const t=e.ohlcPlots;if(t&&t[i])return new r(t[i]);const l=e.styles[i];return new r(l)}}},19932:(t,e,i)=>{i.d(e,{rgbaFromIntegerCached:()=>a});var l=i(448874),n=i(432059),s=i(211414);function a(t=1e3){const e=l.default.Cache;l.default.Cache=s.CircularCacheBuffer.bind(s.CircularCacheBuffer,t);const i=(0,l.default)(n.rgbaFromInteger);return l.default.Cache=e,i}},199872:(t,e,i)=>{function l(t,e){const i=new Map;return function(...l){const n=""+(e?e.apply(null,l):l[0]);if(!i.has(n)){const e=t.apply(this,l);return i.set(n,e),e}return i.get(n)}}i.d(e,{memoize:()=>l})}}]);
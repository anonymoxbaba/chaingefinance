"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[72949],{846778:(e,t,i)=>{i.d(t,{showPasteLineToolHint:()=>u});var n=i(444372),r=i(62802),o=i(638456),a=i(470316),s=i(764829);const l=n.t(null,void 0,i(815402));function u(e,t){s.enabled("popup_hints")&&!o.CheckMobile.any()&&Promise.all([i.e(62093),i.e(32690),i.e(82321),i.e(26166)]).then(i.bind(i,410837)).then((i=>{const n=new i.ChartEventHintRenderer(e),o=l.format({shortcut:(0,a.humanReadableHash)(a.Modifiers.Mod+86)});let s=null;n.show(o,(()=>{null!==s&&(clearTimeout(s),s=null,r.setValue(t,!0,{forceFlush:!0}))})),s=setTimeout((()=>{s=null,n.hide()}),5e3)}))}},370407:(e,t,i)=>{i.d(t,{TranslatedString:()=>n});class n{constructor(e,t){this._originalText=e,this._translatedText=t}originalText(){return this._originalText}translatedText(){return this._translatedText}format(e){const t={},i={};for(const r of Object.keys(e)){const o=e[r];o instanceof n?(t[r]=o.originalText(),i[r]=o.translatedText()):(t[r]=o.toString(),i[r]=o.toString())}const r=this._originalText.format(t),o=this._translatedText.format(i);return new n(r,o)}}},566238:(e,t,i)=>{i.d(t,{WatchedObject:()=>a});var n=i(375397),r=i(124829);function o(e,t){return(0,r.deepEquals)(e,t)[0]}class a extends n.WatchedValue{constructor(e,t=o){super(e),this._comparator=t}setValue(e,t){(t||!1===this._comparator(this.value(),e))&&super.setValue(e,t)}}},631088:(e,t,i)=>{i.d(t,{addExclusionArea:()=>w,addExclusionAreaByScope:()=>T,calcTextHorizontalShift:()=>S,clearRect:()=>v,createBoundCanvas:()=>x,createDisconnectedCanvas:()=>p,createDisconnectedCanvasByRenderingInfo:()=>f,disableSelection:()=>y,drawScaled:()=>g,drawWithExclusionAreaByScope:()=>M,fillRect:()=>m,getBindingRenderingInfo:()=>c,getContext2D:()=>d,getPrescaledContext2D:()=>h,measureText:()=>P,tryApplySuggestedCanvasBitmapSize:()=>b});var n=i(743068),r=i(650151),o=i(18900),a=i(5486),s=i(881025),l=i(638456);function u(e){return{horizontalPixelRatio:Math.max(1,e.bitmapSize.width/e.canvasElementClientSize.width),verticalPixelRatio:Math.max(1,e.bitmapSize.height/e.canvasElementClientSize.height)}}function c(e){return{...u(e),bitmapSize:e.bitmapSize,mediaSize:e.canvasElementClientSize}}function d(e){const t=(0,r.ensureNotNull)(e.getContext("2d"));return t.setTransform(1,0,0,1,0,0),t}function h(e){const t=(0,r.ensureNotNull)(e.getContext("2d")),i=(0,o.getCanvasDevicePixelRatio)(e);return t.setTransform(i,0,0,i,0,0),t}function m(e,t,i,n,r,o){e.save(),e.fillStyle=o,e.fillRect(t,i,n,r),e.restore()}function v(e,t,i,n,r,o){e.save(),e.globalCompositeOperation="copy",e.fillStyle=o,e.fillRect(t,i,n,r),e.restore()}function g(e,t,i,n){e.save(),e.scale(t,i),n(),e.restore()}function p(e,t,i){const n=_(e);return void 0===i&&(i=(0,o.getCanvasDevicePixelRatio)(n)),n.width=t.width*i,n.height=t.height*i,n}function f(e,t){const{bitmapSize:i,mediaSize:n}=t,r=_(e);return r.style.width=`${n.width}px`,r.style.height=`${n.height}px`,r.width=i.width,r.height=i.height,r}function _(e){const t=e.createElement("canvas");return y(t),t}function x(e,t){const i=_((0,
r.ensureNotNull)(e.ownerDocument));e.appendChild(i);const o=(0,n.bindCanvasElementBitmapSizeTo)(i,{type:"device-pixel-content-box",transform:(e,t)=>0===e.width||0===e.height?e:{width:Math.max(e.width,t.width),height:Math.max(e.height,t.height)}});return o.resizeCanvasElement(t),o}function b(e){const t=e.suggestedBitmapSize;return null!==t&&t.width>0&&t.height>0&&(e.applySuggestedBitmapSize(),!0)}function S(e,t){return"center"===e.textAlign?0:(0,s.isRtl)()?"start"===e.textAlign||"right"===e.textAlign?t:0:"start"===e.textAlign||"left"===e.textAlign?0:t}function y(e){e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.msUserSelect="none",e.style.MozUserSelect="none",e.style.webkitTapHighlightColor="transparent"}function T(e,t){const{context:i,horizontalPixelRatio:n,verticalPixelRatio:r,bitmapSize:o}=e;i.beginPath(),i.rect(0,0,o.width,o.height);for(let e=0;e<t.length;e++){let{x:o,y:a}=t[e];o*=n,a*=r,0!==e?i.lineTo(o,a):i.moveTo(o,a)}i.closePath(),i.clip("evenodd")}function w(e,t,i){T({context:e,...t},i)}function M(e,t,i){e.context.save(),T(e,t),i(),e.context.restore()}let C;function P(e,t,i){return C||function(){const e=document.createElement("canvas");e.width=0,e.height=0,(0,l.isMac)()&&(e.style.display="none",document.body.append(e)),C=(0,r.ensureNotNull)(e.getContext("2d")),C.textBaseline="alphabetic",C.textAlign="center"}(),C.font=t,i?i.getMetrics(C,e):(0,a.getMinTextMetrics)(C.measureText(e))}},994157:(e,t,i)=>{i.d(t,{showCustomUrlEventDialog:()=>s});var n=i(444372),r=i(779923);const o=n.t(null,void 0,i(819295)),a=n.t(null,void 0,i(904543));async function s(e){const{onConfirm:t,onClose:i,title:n,placeholderText:s}=e;return(0,r.showRename)({title:n,text:"",placeholder:s,mainButtonText:o,cancelButtonText:a,onRename:({newValue:e,dialogClose:i})=>{t(e),i()},onClose:i})}},18900:(e,t,i)=>{function n(e){var t,i;return Math.max(1,(null===(i=null===(t=e.ownerDocument)||void 0===t?void 0:t.defaultView)||void 0===i?void 0:i.devicePixelRatio)||1)}i.d(t,{getCanvasDevicePixelRatio:()=>n})},26829:(e,t,i)=>{i.d(t,{CHART_WIDGET_COLLECTION_SERVICE:()=>r,CollectionViewMode:()=>a,chartWidgetCollectionService:()=>o});var n=i(564894);const r={id:"ChartWidgetCollectionService"};function o(){return(0,n.hasService)(r)?(0,n.service)(r):null}var a;!function(e){e.Multichart="multichart",e.ForceFullscreen="force-fullscreen"}(a||(a={}))},259336:(e,t,i)=>{i.d(t,{PaneInvalidationMask:()=>r});var n=i(219849);class r{constructor(e=n.defaultInvalidationLevel){this._paneInvalidationLevel=n.defaultInvalidationLevel,this._leftPriceScalesInvalidationMap=new Map,this._rightPriceScalesInvalidationMap=new Map,this._legendWidgetInvalidated=!1,this._invalidationLevel=e}fullInvalidation(){return this._invalidationLevel}invalidateAll(e){this._invalidationLevel=Math.max(this._invalidationLevel,e)}invalidatePane(e){this._paneInvalidationLevel=Math.max(this._invalidationLevel,e)}invalidateLegendWidgetLayout(){this._legendWidgetInvalidated=!0}invalidatePriceScale(e,t,i){
const r="left"===e?this._leftPriceScalesInvalidationMap:this._rightPriceScalesInvalidationMap,o=r.get(t)||n.defaultInvalidationLevel;r.set(t,Math.max(o,i))}invalidationLevelForPane(){return Math.max(this._paneInvalidationLevel,this._invalidationLevel)}legendWidgetLayoutInvalidated(){return this._legendWidgetInvalidated||this._invalidationLevel===n.InvalidationLevel.Full}getterForPriceScaleInvalidationLevelBySide(e){const t="left"===e?this._leftPriceScalesInvalidationMap:this._rightPriceScalesInvalidationMap;return e=>Math.max(t.get(e)||n.defaultInvalidationLevel,this._invalidationLevel)}priceScaleSideMaxLevel(e){const t="left"===e?this._leftPriceScalesInvalidationMap:this._rightPriceScalesInvalidationMap;let i=this._invalidationLevel;return t.size>0&&t.forEach((e=>{e>i&&(i=e)})),i}merge(e){this._invalidationLevel=Math.max(this._invalidationLevel,e._invalidationLevel),this._paneInvalidationLevel=Math.max(this._paneInvalidationLevel,e._paneInvalidationLevel),e._leftPriceScalesInvalidationMap.forEach(((e,t)=>{const i=this._leftPriceScalesInvalidationMap.get(t)||n.defaultInvalidationLevel;this._leftPriceScalesInvalidationMap.set(t,Math.max(i,e))})),e._rightPriceScalesInvalidationMap.forEach(((e,t)=>{const i=this._rightPriceScalesInvalidationMap.get(t)||n.defaultInvalidationLevel;this._rightPriceScalesInvalidationMap.set(t,Math.max(i,e))})),this._legendWidgetInvalidated=this._legendWidgetInvalidated||e._legendWidgetInvalidated}}},631843:(e,t,i)=>{i.d(t,{alignToStep:()=>o});var n=i(960521),r=i.n(n);function o(e,t){return r()(e).div(t).round(0,r().roundHalfUp).mul(t).toNumber()}},831208:(e,t,i)=>{var n=i(694852).makeFont,r=i(694852).parseFont,o=i(338619).getLogger;const{drawPoly:a}=i(665798);var s=o("Model.ChartTradingUtils"),l={_fontHeightCache:{},_parsedColorCache:{},_parseColor:function(e){if(this._parsedColorCache[e])return this._parsedColorCache[e];var t=document.createElement("div");t.style.color=e;var i=t.style.color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i)||t.style.color.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d*\.?\d+)\s*\)$/i),n={r:i[1],g:i[2],b:i[3],a:i[4]||"1"};return this._parsedColorCache[e]=n,n},getColorFromProperties:function(e,t){var i=1-t.value()/100,n=this._parseColor(e.value());return"rgba("+n.r+","+n.g+","+n.b+","+i+")"},setColorToProperties:function(e,t,i){var n=this._parseColor(e);t.setValue("rgb("+n.r+","+n.g+","+n.b+")");var r=100*(1-n.a);i.setValue(Math.max(0,Math.min(r,100)))},getFontFromProperties:function(e,t,i,r){return n(t.value(),e.value(),r.value()?"italic":"",i.value()?"bold":"")},setFontToProperties:function(e,t,i,n,o){var a=r(e);null!==a?(a.family.length>0&&t.setValue(a.family),i.setValue(a.size),n.setValue(a.bold),o.setValue(a.italic)):s.logError("Invalid font: "+e)},fontHeight:function(e){if(!this._fontHeightCache[e]){var t=document.createElement("span");t.appendChild(document.createTextNode("height")),document.body.appendChild(t),t.style.cssText="font: "+e+"; white-space: nowrap; display: inline;";var i=t.offsetHeight;document.body.removeChild(t),
this._fontHeightCache[e]=Math.ceil(i)}return this._fontHeightCache[e]},drawPolyHoverOrPress:function(e,t,i,n){n?(e.save(),e.fillStyle="rgba(0, 0, 0, 0.15)",a(e,t,!0),e.restore()):i&&(e.save(),e.fillStyle="rgba(0, 0, 0, 0.1)",a(e,t,!0),e.restore())},repaint:function(e){e.lightUpdate()},roundToMinTick:function(e,t){var i=1/e.mainSource().base();return i*Math.round(t/i)}};e.exports=l},903424:(e,t,i)=>{i.d(t,{DataSource:()=>u,getTranslatedStringForSource:()=>l});var n=i(370407),r=i(79342),o=i(942634),a=i(354957),s=i(375397);function l(e,t){return new n.TranslatedString(t.name(),t.title(e))}class u{constructor(e){this._isDestroyed=!1,this._hasAlert=new s.WatchedValue(!1),this._alertStatus=new s.WatchedValue(0),this._alertCreationAvailable=new s.WatchedValue(a.alertsAvailable),this._zorder=0,this._priceScale=null,this._ownerSource=null,this._userEditEnabled=!0,this._priceScaleChanged=new o.Delegate,this._isSelectionEnabled=!0,this._instanceId=(0,r.randomHashN)(6),this._ownerSourceChanged=new o.Delegate,this._zOrderChanged=new o.Delegate,this._id=null!=e?e:(0,r.randomHashN)(6),a.alertsAvailable&&Promise.resolve().then((()=>{this._isDestroyed||this._hasAlert.subscribe(this._updateAlertCreationAvailable.bind(this),{callWithLast:!0})}))}destroy(){this._isDestroyed=!0}id(){return this._id}instanceId(){return this._instanceId}preferNoScale(){return!1}setId(e){this._id=e}zorder(){return this._zorder}setZorder(e){"number"==typeof e&&this._zorder!==e&&(this._zorder=e,this._zOrderChanged.fire(e))}preferredZOrder(){return null}isSpeciallyZOrderedSource(){return!1}title(e){return this.name()}priceScale(){return this._priceScale}setPriceScale(e){this._priceScale=e,this._priceScaleChanged.fire(e)}priceScaleChanged(){return this._priceScaleChanged}ownerSource(){return this._ownerSource}setOwnerSource(e){const t=this._ownerSource;this._ownerSource=e,this._ownerSourceChanged.fire(t,e)}ownerSourceChanged(){return this._ownerSourceChanged}zOrderChanged(){return this._zOrderChanged}isSavedInChart(e){return!0}isSavedInStudyTemplates(){return!0}isRemovedByStudyTemplates(){return!0}hasContextMenu(){return!0}showInObjectTree(){return!0}setUserEditEnabled(e){this._userEditEnabled=e}userEditEnabled(){return this._userEditEnabled}canBeHidden(){return this.userEditEnabled()}isUserDeletable(){return this.userEditEnabled()}properties(){return null}isVisible(){return this.properties().visible.value()}dataWindowView(){return null}priceAxisViews(e,t){return null}timeAxisViews(){return null}updateAllViews(e){}paneViews(e){return null}labelPaneViews(e){return null}isFailed(){return!1}isLoading(){return!1}isPhantom(){return!1}isChildStudy(){return!1}hasChildren(){return!1}canHaveChildren(){return!1}onClickOutside(e,t){}getSourceIcon(){return null}state(e){return null}doesMovingAffectsUndo(){return!0}isMultiPaneAvailable(){return!1}isMultiPaneEnabled(){return!1}copiable(){return!1}cloneable(){return!1}movable(){return!1}isIncludedInAutoScale(){return!1}isHoveredEnabled(){return this.isSelectionEnabled()}showOnTopOnHovering(){return!0}isSelectionEnabled(){
return this._isSelectionEnabled}setSelectionEnabled(e){this._isSelectionEnabled=e}firstValue(){return null}priceRange(e,t,i){return null}autoScaleInfo(e,t,i){return{range:this.priceRange(e,t,i)}}stateForAlert(){return null}canHasAlert(){return!1}canHasAlertOnLineTools(){return!1}hasAlert(){return this._hasAlert.readonly()}alertCreationAvailable(){return this._alertCreationAvailable.readonly()}hasStateForAlert(){return a.alertsAvailable}idForAlert(){return this._id}alertStatus(){return this._alertStatus.readonly()}_getAlertCreationAvailable(){return a.alertsAvailable&&this.hasStateForAlert()}_updateAlertCreationAvailable(){a.alertsAvailable&&this._alertCreationAvailable.setValue(this._getAlertCreationAvailable())}}},419283:(e,t,i)=>{i.r(t),i.d(t,{SelectPointMode:()=>n,activePointSelectionMode:()=>K,alignTo45Degrees:()=>Te,barTimesUnderCursor:()=>Z,beenSetLineToolLastPoint:()=>B,cancelLineTool:()=>ee,cancelledLineTool:()=>D,changeLineStyle:()=>ce,changeLineTool:()=>ae,changedLineStyle:()=>U,changedLineTool:()=>E,continueLineTool:()=>X,continuedLineTool:()=>k,copiedLineTool:()=>$,copyLineTool:()=>de,createLineTool:()=>J,createdLineTool:()=>A,crosshairLock:()=>S,cursorTool:()=>C,drawOnAllCharts:()=>we,drawOnAllChartsMode:()=>Me,emojiTool:()=>w,finishChangingLineTool:()=>se,finishLineTool:()=>ue,finishMovingLineTool:()=>re,finishedChangingLineTool:()=>O,finishedLineTool:()=>H,finishedMovingLineTool:()=>N,hideAllDrawings:()=>xe,hideAllIndicators:()=>be,hideMarksOnBars:()=>ye,iconTool:()=>T,init:()=>pe,isDirectionalMovementActive:()=>V,isStudyEditingNow:()=>G,isToolCreatingNow:()=>P,isToolEditingNow:()=>L,isToolMovingNow:()=>I,lockDrawings:()=>Se,moveLineTool:()=>ne,movedLineTool:()=>R,properties:()=>_e,removeLineTool:()=>le,removedLineTool:()=>z,resetToCursor:()=>v,restoreLineTool:()=>he,restoreLineToolState:()=>me,restoredLineTool:()=>j,restoredLineToolState:()=>q,runOnDrawingStateReady:()=>fe,setLineToolLastPoint:()=>te,startChangingLineTool:()=>oe,startMovingLineTool:()=>ie,startedChangingLineTool:()=>W,startedMovingLineTool:()=>F,stickerTool:()=>M,tool:()=>y,toolIsCursor:()=>h,toolIsMeasure:()=>m});var n,r=i(650151),o=i(998418),a=i(868594),s=i(375397),l=i(566238),u=i(942634),c=i(62802),d=i(251954);function h(e){return"cursor"===e||"arrow"===e||"dot"===e||"performance"===e}function m(e){return"measure"===e}function v(e=!1){if(!e&&g){if(g.childs().stayInDrawingMode.value())return}y.setValue(C.value())}!function(e){e[e.None=0]="None",e[e.Replay=1]="Replay",e[e.Study=2]="Study"}(n||(n={}));let g=null,p=null,f=null,_=null,x=null,b=null
;const S=new l.WatchedObject(null),y=new s.WatchedValue,T=new s.WatchedValue,w=new s.WatchedValue,M=new s.WatchedValue,C=new s.WatchedValue,P=new s.WatchedValue(!1),L=new s.WatchedValue(!1),I=new s.WatchedValue(!1),V=new s.WatchedValue(!1),A=new u.Delegate,k=new u.Delegate,D=new u.Delegate,B=new u.Delegate,F=new u.Delegate,R=new u.Delegate,N=new u.Delegate,W=new u.Delegate,E=new u.Delegate,O=new u.Delegate,z=new u.Delegate,H=new u.Delegate,U=new u.Delegate,$=new u.Delegate,j=new u.Delegate,q=new u.Delegate,K=new s.WatchedValue(n.None),G=new s.WatchedValue(!1),Z=new Map;function Y(e,t){const i=t||{value:!1};return t=>{i.value||(i.value=!0,e.fire(t),i.value=!1)}}const Q={value:!1},J=Y(A,Q),X=Y(k,Q),ee=Y(D,Q),te=Y(B,Q),ie=Y(F),ne=Y(R),re=Y(N),oe=Y(W),ae=Y(E),se=Y(O),le=Y(z),ue=Y(H),ce=Y(U,Q),de=Y($,Q),he=Y(j),me=Y(q);let ve=!1,ge=[];function pe(){ve||(y.setValue(c.getValue("chart.cursorPreference","cursor")),y.subscribe((e=>h(e)&&C.setValue(e)),{callWithLast:!0}),C.subscribe((e=>{e&&"performance"!==e&&c.setValue("chart.cursorPreference",e)})),g=new a.DefaultProperty({defaultName:"drawings"}),p=(0,o.createPrimitiveProperty)(!1),f=(0,o.createPrimitiveProperty)(!1),_=(0,o.createPrimitiveProperty)(!1),x=(0,o.createPrimitiveProperty)(!c.getBool("BarsMarksContainer.visibile",!0)),b=(0,o.createPrimitiveProperty)(!1),y.subscribe((e=>{(0,d.emit)("onSelectedLineToolChanged")})),ve=!0,ge.forEach((e=>e())),ge=[])}function fe(e){ve?e():ge.push(e)}function _e(){return(0,r.ensureNotNull)(g)}function xe(){return(0,r.ensureNotNull)(p)}function be(){return(0,r.ensureNotNull)(f)}function Se(){return(0,r.ensureNotNull)(_)}function ye(){return(0,r.ensureNotNull)(x)}function Te(){return(0,r.ensureNotNull)(b)}function we(){return _e().childs().drawOnAllCharts}function Me(){return _e().childs().drawOnAllChartsMode}},334990:(e,t,i)=>{i.d(t,{PipFormatter:()=>o});var n=i(788387),r=i(735211);class o extends r.PriceFormatter{constructor(e){const{priceScale:t,minMove:i=1,type:r,typespecs:o,minMove2:a,ignoreLocaleNumberFormat:s}=e;("forex"===r||(0,n.isCFDSymbol)(r,o))&&a?(super({priceScale:a,ignoreLocaleNumberFormat:s}),this._isForex=!0):(super({priceScale:1,ignoreLocaleNumberFormat:s}),this._isForex=!1),this._pipPriceScale=t,this._pipMinMove=i,this._pipMinMove2=a}format(e,t={}){const{signPositive:i,tailSize:n,ignoreLocaleNumberFormat:r}=t;let o=this._isForex?this._pipMinMove2:this._pipMinMove;return void 0===o&&(o=NaN),super.format(e*this._pipPriceScale/o,{signPositive:i,tailSize:n,ignoreLocaleNumberFormat:r})}}},509078:(e,t,i)=>{i.d(t,{AreaName:()=>n,HitTarget:()=>r,HitTestResult:()=>u,hitTestResultDataAreEqual:()=>l,shouldDefaultActionBeExecuted:()=>s,tryCallHandler:()=>a});var n,r,o=i(650151);function a(e,t,i,n){if(e.isTouch){if(void 0!==n)return n(e,t),!0}else if(void 0!==i)return i(e,t),!0;return!1}function s(e,t,i,n){return void 0!==t.executeDefaultAction&&(e.isTouch?Boolean(t.executeDefaultAction[n]):Boolean(t.executeDefaultAction[i]))}function l(e,t){return e&&t&&e.equals&&t.equals?e.equals(t):e===t}!function(e){e.Style="Style",
e.Text="Text",e.Line="Line",e.Tooltip="Tooltip",e.Button="Button",e.SourceItemMove="SourceItemMove",e.AnchorPoint="AnchorPoint"}(n||(n={})),function(e){e[e.MovePointBackground=1]="MovePointBackground",e[e.Regular=2]="Regular",e[e.MovePoint=3]="MovePoint",e[e.ChangePoint=4]="ChangePoint",e[e.Custom=5]="Custom"}(r||(r={}));class u{constructor(e,t,i){this._target=e,this._data=t||null,this._eraseMarker=i}target(){return this._target}data(){return this._data}mergeData(e){this._data={...(0,o.ensureNotNull)(this._data),...e}}hasPressedMoveHandler(e){return null!==this._data&&function(e,t,i){if(e.isTouch){if(void 0!==i)return!0}else if(void 0!==t)return!0;return!1}(e,this._data.pressedMouseMoveHandler,this._data.touchMoveHandler)}tryCallMouseDownOrTouchStartHandler(e,t){return null!==this._data&&a(e,t,this._data.mouseDownHandler,this._data.touchStartHandler)}tryCallMouseUpOrTouchEndHandler(e,t){return null!==this._data&&a(e,t,this._data.mouseUpHandler,this._data.touchEndHandler)}tryCallMouseEnterHandler(e,t){return null!==this._data&&a(e,t,this._data.mouseEnterHandler)}tryCallMouseLeaveHandler(e,t){return null!==this._data&&a(e,t,this._data.mouseLeaveHandler)}tryCallMouseMoveHandler(e,t){return null!==this._data&&a(e,t,this._data.mouseMoveHandler)}tryCallClickOrTapHandler(e,t){return null!==this._data&&a(e,t,this._data.clickHandler,this._data.tapHandler)}tryCallDblClickOrDblTapHandler(e,t){return null!==this._data&&a(e,t,this._data.doubleClickHandler,this._data.doubleTapHandler)}tryCallContextMenuHandler(e,t){return null!==this._data&&a(e,t,this._data.contextMenuHandler,this._data.touchContextMenuHandler)}eraseMarker(){return this._eraseMarker}}},389276:(e,t,i)=>{i.d(t,{IntervalsVisibilitiesProperty:()=>o});var n=i(658843),r=i(412788);class o extends n.Property{state(e){var t;return null!==(t=(0,r.nonDefaultIntervalsVisibilities)(super.state(e)))&&void 0!==t?t:void 0}storeStateIfUndefined(){return!1}}},412788:(e,t,i)=>{i.d(t,{getIntervalsVisibilitiesForMode:()=>m,isActualInterval:()=>c,makeIntervalsVisibilitiesVisibleAtInterval:()=>l,mergeIntervalVisibilitiesDefaults:()=>h,nonDefaultIntervalsVisibilities:()=>d});var n=i(852290),r=i(822914),o=i(650151),a=i(378975),s=i(985429);function l(e,t){let i=t.multiplier();if(t.isTicks()&&(e.ticks=!0),t.isSeconds()&&(i<60?(e.seconds=!0,e.secondsFrom=Math.min(e.secondsFrom,i),e.secondsTo=Math.max(e.secondsTo,i)):(i=Math.floor(i/60),t=new a.Interval(a.ResolutionKind.Minutes,i))),t.isMinutes())if(i<60)e.minutes=!0,e.minutesFrom=Math.min(e.minutesFrom,i),e.minutesTo=Math.max(e.minutesTo,i);else{const t=Math.floor(i/60);e.hours=!0,e.hoursFrom=Math.min(e.hoursFrom,t),e.hoursTo=Math.max(e.hoursTo,t)}t.isDays()&&(e.days=!0,e.daysFrom=Math.min(e.daysFrom,i),e.daysTo=Math.max(e.daysTo,i)),t.isWeeks()&&(e.weeks=!0,e.weeksFrom=Math.min(e.weeksFrom,i),e.weeksTo=Math.max(e.weeksTo,i)),t.isMonths()&&(e.months=!0,e.monthsFrom=Math.min(e.monthsFrom,i),e.monthsTo=Math.max(e.monthsTo,i)),t.isRange()&&(e.ranges=!0)}function u(e,t,i,n){return e&&n>=t&&n<=i}function c(e,t){const i=t.childs()
;switch(e.kind()){case a.ResolutionKind.Ticks:return i.ticks.value();case a.ResolutionKind.Seconds:if(e.multiplier()<60)return u(i.seconds.value(),i.secondsFrom.value(),i.secondsTo.value(),e.multiplier());{const t=Math.floor(e.multiplier()/60);return u(i.minutes.value(),i.minutesFrom.value(),i.minutesTo.value(),t)}case a.ResolutionKind.Minutes:if(e.multiplier()<60)return u(i.minutes.value(),i.minutesFrom.value(),i.minutesTo.value(),e.multiplier());{const t=Math.floor(e.multiplier()/60);return u(i.hours.value(),i.hoursFrom.value(),i.hoursTo.value(),t)}case a.ResolutionKind.Days:return u(i.days.value(),i.daysFrom.value(),i.daysTo.value(),e.multiplier());case a.ResolutionKind.Weeks:return u(i.weeks.value(),i.weeksFrom.value(),i.weeksTo.value(),e.multiplier());case a.ResolutionKind.Months:return u(i.months.value(),i.monthsFrom.value(),i.monthsTo.value(),e.multiplier());case a.ResolutionKind.Range:return i.ranges.value()}return(0,o.assert)(!1,`Unsupported resolution: ${e.value()}`),!1}function d(e){const t=Object.keys(e).filter((t=>s.intervalsVisibilitiesDefaults[t]!==e[t]));return 0===t.length?null:t.reduce(((t,i)=>(t[i]=e[i],t)),{})}function h(e){return(0,n.default)((0,r.default)(s.intervalsVisibilitiesDefaults),null!=e?e:{})}function m(e,t){if(0===t||e.isTicks()&&3===t||e.isRange()&&2===t)return h();let i=!1;const n={ticks:!1,seconds:!1,minutes:!1,hours:!1,days:!1,weeks:!1,months:!1,ranges:!1},r=e=>e.multiplier();return[{checker:e=>e.isTicks(),getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.ticks=!0}},{checker:e=>e.isSeconds()&&e.multiplier()<60,getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.seconds=!0,n.secondsFrom=e,n.secondsTo=t}},{checker:e=>e.isSeconds()&&e.multiplier()>=60,getIntervalMultiplier:e=>Math.floor(e.multiplier()/60),markIntervalAsVisible:(e,t)=>{n.minutes=!0,n.minutesFrom=e,n.minutesTo=t}},{checker:e=>e.isMinutes()&&e.multiplier()<60,getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.minutes=!0,n.minutesFrom=e,n.minutesTo=t}},{checker:e=>e.isMinutes()&&e.multiplier()>=60,getIntervalMultiplier:e=>Math.floor(e.multiplier()/60),markIntervalAsVisible:(e,t)=>{n.hours=!0,n.hoursFrom=e,n.hoursTo=t}},{checker:e=>e.isDays(),getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.days=!0,n.daysFrom=e,n.daysTo=t}},{checker:e=>e.isWeeks(),getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.weeks=!0,n.weeksFrom=e,n.weeksTo=t}},{checker:e=>e.isMonths(),getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.months=!0,n.monthsFrom=e,n.monthsTo=t}},{checker:e=>e.isRange(),getIntervalMultiplier:r,markIntervalAsVisible:(e,t)=>{n.ranges=!0}}].forEach((n=>{if(n.checker(e)){i=!0;const r=n.getIntervalMultiplier(e);1===t?n.markIntervalAsVisible(r,r):3===t?n.markIntervalAsVisible(r,void 0):n.markIntervalAsVisible(void 0,r)}else(!i&&2===t||i&&3===t)&&n.markIntervalAsVisible(void 0,void 0)})),h(n)}},518439:(e,t,i)=>{var n;i.d(t,{PlotRowSearchMode:()=>n}),function(e){e[e.NearestLeft=-1]="NearestLeft",e[e.Exact=0]="Exact",e[e.NearestRight=1]="NearestRight"}(n||(n={}))},487945:(e,t,i)=>{function n(e){
const t=(null==e?void 0:e.symbolSource)&&e.symbolSource()===e,i=void 0!==(null==e?void 0:e.isActingAsSymbolSource);return t||i}function r(e){return n(e)&&"quotesProvider"in e}function o(e){return n(e)&&e.isActingAsSymbolSource().value()}i.d(t,{isActingAsSymbolSource:()=>o,isSymbolSource:()=>n,isSymbolSourceWithQuotesProvider:()=>r})},469805:(e,t,i)=>{i.d(t,{lineToolsDoNotAffectChartInvalidation:()=>n});const n=!0},422997:(e,t,i)=>{i.d(t,{DateAndPriceBaseProperties:()=>m,allPropertiesStateKeysBase:()=>h,nonThemedFactoryDefaultsBase:()=>c,themedFactoryDefaultsBase:()=>d});var n=i(960095),r=i(61499),o=i(432059),a=i(985429),s=i(658843),l=i(825446);const u=(0,n.getHexColorByName)("color-tv-blue-500"),c={linewidth:2,fontsize:12,fillLabelBackground:!0,fillBackground:!0,backgroundTransparency:60,intervalsVisibilities:{...a.intervalsVisibilitiesDefaults},customText:{visible:!1,fontsize:12,bold:!1,italic:!1}},d=new Map([[r.StdTheme.Light,{textcolor:(0,n.getHexColorByName)("color-black"),labelBackgroundColor:(0,n.getHexColorByName)("color-white"),linecolor:u,backgroundColor:(0,o.generateColor)(u,85),shadow:"rgba(0, 0, 0, 0.2)",customText:{color:u}}],[r.StdTheme.Dark,{textcolor:(0,n.getHexColorByName)("color-white"),labelBackgroundColor:(0,n.getHexColorByName)("color-cold-gray-800"),linecolor:u,backgroundColor:(0,o.generateColor)(u,85),shadow:"rgba(0, 0, 0, 0.4)",customText:{color:u}}]]),h=["customText.text"];class m extends l.LineDataSourceProperty{constructor({nonThemedDefaultsKeys:e,themedDefaultsKeys:t,...i}){var n,r,o;super({nonThemedDefaultsKeys:e,themedDefaultsKeys:t,templateKeys:[...null!=e?e:[],...null!=t?t:[],...h],...i});const a=null===(n=i.state)||void 0===n?void 0:n.customText;this._textProperty=new s.Property(null!==(r=null==a?void 0:a.text)&&void 0!==r?r:""),null===(o=this.childs().customText)||void 0===o||o.addChild("text",this._textProperty)}template(){const e=super.template();return e.customText.text=this._textProperty.value(),e}}},163130:(e,t,i)=>{i.d(t,{createIdeaLineToolByUrl:()=>m,isIdeaAuthorProfileImageUrl:()=>d,isIdeaUrl:()=>c});var n=i(650151),r=i(62802),o=i(66974),a=i(79342),s=i(716004),l=i(645468);const u=/^\/chart\/.+?\/([0-9a-zA-Z]{8})(-[-\w]+)?\/?$/;function c(e){try{const t=new URL(e);return((e=>"https:"===e.protocol&&e.hostname.endsWith(".tradingview.com"))(t)||(e=>!(0,o.isProd)()&&e.hostname.endsWith(window.location.hostname))(t))&&u.test(t.pathname)}catch(e){return!1}}function d(e){if(e.startsWith("data:image/svg+xml,"))return!0;try{const t=new URL(e),i=new URL(window.AWS_S3_CDN);return t.protocol===i.protocol&&t.hostname===i.hostname&&t.pathname.includes("/userpics/")}catch(e){return!1}}async function h(e){const t=new URL(`/api/v1/ideas/${i=e,(0,n.ensureNotNull)(u.exec(new URL(i).pathname))[1]}/`,location.href);var i;return fetch(t.toString()).then((e=>{if(!e.ok)throw new Error(`Error processing idea: ${e.statusText}`);return e.json()}))}function m(e,t,i=!1){return h(e).then((e=>{const o=function(e,t){var i;const r=(0,n.ensureDefined)(e.user);let o
;r.avatars&&d(r.avatars.small)&&(o=r.avatars.small.startsWith("data:image/svg+xml,")?r.avatars.small:`${r.avatars.small.replace(window.AWS_S3_CDN,"")}?resetCache=true`);const a={avatarUrl:o,badges:null===(i=r.badges)||void 0===i?void 0:i.map((e=>e.name)),username:r.username};return{createdAt:e.created_timestamp,direction:e.direction,name:(0,s.clean)(e.name,!0),author:a,uuid:e.uuid}}(e),u={price:0,time_t:o.createdAt,offset:0},c=t.mainSeries(),h=(0,n.ensureNotNull)(t.model().paneForSource(c)),m=h.newLineToolZOrder(!0),v={type:"drawing",source:{id:(0,a.randomHashN)(6),zorder:m,type:"LineToolIdea",position:50,state:{interval:"1",...l.LineToolIdea.createProperties().state()},ideaData:o,symbol:c.symbol(),ownerSource:c.id(),points:[u]},geometry:[],modelId:t.model().id()},g=t.pasteLineTool(h,v,!0,!0);return i&&r.setValue("hint.pasteIdea",!0,{forceFlush:!0}),g.pointAdded().subscribe(null,(()=>t.scrollToLineTool(g)),!0),g}))}},579135:(e,t,i)=>{i.d(t,{watchingDrawingStateForAddIdeaLineTool:()=>x});var n=i(444372),r=i(62802),o=i(345848),a=i(338619),s=i(457965),l=i(846778),u=i(26829),c=i(419283),d=i(994157),h=i(163130);const m=(0,a.getLogger)("Chart.IdeaDialog"),v=n.t(null,void 0,i(215982)),g=n.t(null,void 0,i(999798));let p=null;function f(e){"LineToolIdea"===e?(window.is_authenticated||(0,c.resetToCursor)(!0),(0,s.runOrSigninWithFeature)((()=>{c.tool.setValue("LineToolIdea"),p=(0,d.showCustomUrlEventDialog)({onConfirm:_,onClose:()=>{p=null,"LineToolIdea"===c.tool.value()&&(0,c.resetToCursor)(!0)},title:v,placeholderText:g}),(0,o.trackEvent)("Idea","Open idea dialog")}),{feature:"drawings",source:"Change drawing tool state"})):null!==p&&p.then((e=>e()))}function _(e){const t=(0,u.chartWidgetCollectionService)();if(null===t)return;if(!(0,h.isIdeaUrl)(e))return void m.logWarn(`Invalid idea url: ${e}`);const i=!Boolean(r.getBool("hint.pasteIdea")),n=t.activeChartWidget.value();(0,h.createIdeaLineToolByUrl)(e,n.model()).then((()=>{i&&(0,l.showPasteLineToolHint)(t.getContainer(),"hint.pasteIdea")}))}function x(){(0,c.runOnDrawingStateReady)((()=>{c.tool.subscribe(f)}))}},436687:(e,t,i)=>{i.d(t,{commonLineToolPropertiesStateKeys:()=>n});const n=["symbolStateVersion","zOrderVersion","frozen","title","symbolInfo","interval","symbol","currencyId","unitId","visible","intervalsVisibilities.ticks","intervalsVisibilities.seconds","intervalsVisibilities.secondsFrom","intervalsVisibilities.secondsTo","intervalsVisibilities.minutes","intervalsVisibilities.minutesFrom","intervalsVisibilities.minutesTo","intervalsVisibilities.hours","intervalsVisibilities.hoursFrom","intervalsVisibilities.hoursTo","intervalsVisibilities.days","intervalsVisibilities.daysFrom","intervalsVisibilities.daysTo","intervalsVisibilities.weeks","intervalsVisibilities.weeksFrom","intervalsVisibilities.weeksTo","intervalsVisibilities.months","intervalsVisibilities.monthsFrom","intervalsVisibilities.monthsTo","intervalsVisibilities.ranges"]},64720:(e,t,i)=>{i.d(t,{watchingDrawingStateForAddImageLineTool:()=>v})
;var n=i(650151),r=i(62802),o=i(345848),a=i(457965),s=i(846778),l=i(26829),u=i(419283);async function c(e,t){return async function(e){return(await Promise.all([i.e(73040),i.e(75816),i.e(46445),i.e(93703),i.e(21356),i.e(62093),i.e(44524),i.e(82421),i.e(59258),i.e(67158),i.e(77476),i.e(8222),i.e(82440),i.e(41682),i.e(60171),i.e(82321),i.e(62107),i.e(62526),i.e(77038)]).then(i.bind(i,408273))).renderImageDialog(e)}({onConfirm:e,onClose:t})}let d=null;function h(e){if("LineToolImage"!==e)return null==d||d.then((e=>e())),void(d=null);window.is_authenticated||(0,u.resetToCursor)(!0),(0,a.runOrSigninWithFeature)((()=>{u.tool.setValue("LineToolImage"),d=c(m,(()=>{null==d||d.then((e=>e())),d=null,"LineToolImage"===u.tool.value()&&(0,u.resetToCursor)(!0)})),(0,o.trackEvent)("Image","Open image dialog")}),{feature:"drawings",source:"Change drawing tool state"})}function m(e){const t=(0,l.chartWidgetCollectionService)();if(null===t)return;const i=!Boolean(r.getBool("hint.pasteImage")),o=t.activeChartWidget.value();o.model().pasteImageAsLineTool(e.url,e.blobUrl,(0,n.ensureNotNull)(o.model().model().paneForSource(o.model().mainSeries())),e.transparency),i&&(0,s.showPasteLineToolHint)(t.getContainer(),"hint.pasteImage")}function v(){(0,u.runOnDrawingStateReady)((()=>{u.tool.subscribe(h)}))}},905397:(e,t,i)=>{function n(e){return"setSelectionRange"in e}i.d(t,{isInplaceTextLineSourcePaneView:()=>n})},627620:(e,t,i)=>{var n;i.d(t,{isImageToolName:()=>h,isLineDrawnWithPressedButton:()=>u,isLineToolDrawWithoutPoints:()=>d,isLineToolFinishRequiredWhenCreatedByApi:()=>c,isLineToolName:()=>l,isMtpPredictorToolName:()=>a,isStudyLineToolName:()=>s,isTextToolName:()=>m});var r=i(954877);const o=new Set(["LineStudyMtpAnalysis","LineStudyMtpDecisionPoint","LineStudyMtpRiskReward","LineStudyMtpElliotWaveMain","LineStudyMtpElliotWaveMajor","LineStudyMtpElliotWaveMinor","LineStudyMtpDownWave1OrA","LineStudyMtpDownWave2OrB","LineStudyMtpDownWave3","LineStudyMtpDownWave4","LineStudyMtpDownWave5","LineStudyMtpDownWaveC","LineStudyMtpUpWave1OrA","LineStudyMtpUpWave2OrB","LineStudyMtpUpWave3","LineStudyMtpUpWave4","LineStudyMtpUpWave5","LineStudyMtpUpWaveC"]);function a(e){return o.has(e)}function s(e){return"LineToolRegressionTrend"===e||"LineToolVbPFixed"===e||"LineToolFixedRangeVolumeProfile"===e||"LineToolAnchoredVolumeProfile"===e||"LineToolAnchoredVWAP"===e}function l(e){return e in(n||(n=i.t(r,2)))||s(e)}function u(e){return"LineToolBrush"===e||"LineToolHighlighter"===e}function c(e){return u(e)||"LineToolPath"===e||"LineToolPolyline"===e||"LineToolGhostFeed"===e}function d(e){return"LineToolTweet"===e||"LineToolIdea"===e||"LineToolImage"===e}function h(e){return"LineToolImage"===e}function m(e){switch(e){case"LineToolBalloon":case"LineToolComment":case"LineToolText":case"LineToolTextAbsolute":case"LineToolCallout":case"LineToolNote":case"LineToolNoteAbsolute":case"LineToolSignpost":return!0}return!1}},896123:(e,t,i)=>{i.d(t,{LineDataSourcePointIndexProperty:()=>r});var n=i(658843);class r extends n.Property{constructor(e,t){super(),
this._waitingPointsetUpdate=!1,this._lineSource=e,this._pointIndex=t,this._cachedIndex=this.value()}value(){const e=this._lineSource.points();return 0===e.length?this._cachedIndex:e[this._pointIndex].index}setValue(e){this._cachedIndex=e;const t=this._lineSource.points(),i=e=>{const t=this._lineSource.points()[this._pointIndex];if(t.index===e)return;t.index=e,this._lineSource.startChanging(this._pointIndex,t),this._setPointImpl(t),this._lineSource.model().updateSource(this._lineSource),this._listeners.fire(this,"");const i=this._lineSource.endChanging(!0,!1);this._lineSource.syncMultichartState(i)};if(0===t.length){const e=()=>{i(this._cachedIndex),this._waitingPointsetUpdate=!1};if(this._waitingPointsetUpdate)return;this._lineSource.pointsetUpdated().subscribe(this,e,!0),this._waitingPointsetUpdate=!0}else i(e)}_setPointImpl(e){this._lineSource.setPoint(this._pointIndex,e)}}},295829:(e,t,i)=>{i.d(t,{LineDataSourcePointPriceProperty:()=>o});var n=i(650151),r=i(658843);class o extends r.Property{constructor(e,t){super(),this._lineSource=e,this._pointIndex=t,e.pointAdded().subscribe(this,(e=>{this._pointIndex===e&&this._listeners.fire(this,`${e}`)})),e.pointChanged().subscribe(this,(e=>{this._pointIndex===e&&this._listeners.fire(this,`${e}`)}))}value(){const e=this._lineSource.points()[this._pointIndex].price,t=(0,n.ensureNotNull)(this._lineSource.ownerSource()).formatter();if(t.parse){const i=t.format(e),n=t.parse(i);return n.res?n.value:e}return e}setValue(e){const t=this._lineSource.points()[this._pointIndex];t.price=parseFloat(""+e),this._lineSource.startChanging(this._pointIndex,t),this._lineSource.setPoint(this._pointIndex,t),this._lineSource.model().updateSource(this._lineSource),this._listeners.fire(this,"");const i=this._lineSource.endChanging(!0,!1);this._lineSource.syncMultichartState(i)}}},750665:(e,t,i)=>{i.d(t,{LineToolTradingPriceAxisView:()=>r});var n=i(129824);class r extends n.LineToolPriceAxisView{_formatPrice(e,t){return this._source.formatter().format(e)}}},311484:(e,t,i)=>{i.d(t,{SignpostPointIndexProperty:()=>r});var n=i(896123);class r extends n.LineDataSourcePointIndexProperty{constructor(e,t){super(e,t),this._source=e}_setPointImpl(e){this._source.setPointAndChangeIndex(this._pointIndex,e)}}},867757:(e,t,i)=>{i.d(t,{SignpostPointPriceProperty:()=>r});var n=i(658843);class r extends n.Property{constructor(e){super(),this._source=e,e.pointAdded().subscribe(this,(()=>this.listeners().fire(this,""))),e.pointChanged().subscribe(this,(()=>this.listeners().fire(this,"")))}value(){const e=this._source.properties().childs().position.value();return parseFloat(e.toFixed(2))}setValue(e){this._source.properties().childs().position.setValue(e),this._source.model().updateSource(this._source),this.listeners().fire(this,""),this._source.syncMultichartState({pricesChanged:!1,indexesChanged:!1})}}},926799:(e,t,i)=>{const n=i(817464).LineDataSource,r=i(631843).alignToStep,o=(i(339709).customFormatters,i(975179).createSeriesFormatter);class a extends n{constructor(e,t){super(e,t),
this.customization.forcePriceAxisLabel=!0,this.customization.disableErasing=!0,this.customization.showInObjectsTree=!1,this._createFormatter(e.mainSeries().symbolInfo()),this.setSelectionEnabled(!1)}isSynchronizable(){return!1}pointsCount(){return a.POINTS_COUNT}hasContextMenu(){return!1}state(){return null}startMoving(){super.startMoving.apply(this,arguments),this._cursorMoved=!1}endMoving(){super.endMoving.apply(this,arguments),this._cursorMoved=!1}userEditEnabled(){return!0}movable(){return!1}canBeHidden(){return!1}isUserDeletable(){return!1}showInObjectTree(){return!1}doesMovingAffectsUndo(){return!1}isAvailableInFloatingWidget(){return!1}timeAxisViews(){return null}cloneable(){return!1}copiable(){return!1}_correctPoints(e,t){this._currentMovingPoint&&this._startMovingPoint?this._currentMovingPoint.logical.price-this._startMovingPoint.logical.price&&(this._cursorMoved=!0):this._cursorMoved=!1;for(var i=1/this.priceScale().mainSource().base(),n=0;n<e.length;n++){var o=e[n];this._cursorMoved&&(o.price=this._currentMovingPoint.logical.price),o.price=r(o.price,i),e[n]=o}}_createFormatter(e){this._formatter=o(e,"default",!1,!0)}}a.POINTS_COUNT=1,e.exports.LineToolTrading=a},576671:(e,t,i)=>{i.d(t,{watchingDrawingStateForAddTweetLineTool:()=>x});var n=i(444372),r=i(62802),o=i(345848),a=i(338619),s=i(457965),l=i(846778),u=i(26829),c=i(419283),d=i(994157),h=i(393747);const m=(0,a.getLogger)("Chart.TweetDialog"),v=n.t(null,void 0,i(636549)),g=n.t(null,void 0,i(247734));let p=null;function f(e){"LineToolTweet"===e?(window.is_authenticated||(0,c.resetToCursor)(!0),(0,s.runOrSigninWithFeature)((()=>{c.tool.setValue("LineToolTweet"),p=(0,d.showCustomUrlEventDialog)({onConfirm:_,onClose:()=>{p=null,"LineToolTweet"===c.tool.value()&&(0,c.resetToCursor)(!0)},title:v,placeholderText:g}),(0,o.trackEvent)("Tweet","Open tweet dialog")}),{feature:"drawings",source:"Change drawing tool state"})):null!==p&&p.then((e=>e()))}function _(e){const t=(0,u.chartWidgetCollectionService)();if(null===t)return;if(!(0,h.isTwitterUrl)(e))return void m.logWarn(`Invalid tweet url: ${e}`);const i=!Boolean(r.getBool("hint.pasteTweet")),n=t.activeChartWidget.value();(0,h.createTweetLineToolByUrl)(e,n.model()).then((()=>{i&&(0,l.showPasteLineToolHint)(t.getContainer(),"hint.pasteTweet")}))}function x(){(0,c.runOnDrawingStateReady)((()=>{c.tool.subscribe(f)}))}},665798:(e,t,i)=>{i.r(t),i.d(t,{addHorizontalLineToPath:()=>d,addLineToPath:()=>M,addPixelPerfectLineToPath:()=>P,addVerticalLineToPath:()=>m,clearRectWithGradient:()=>u,clipPolygonByEdge:()=>I,computeDashPattern:()=>w,createCircle:()=>S,drawHorizontalLine:()=>h,drawLine:()=>C,drawPixelPerfectLine:()=>L,drawPoly:()=>y,drawRoundRect:()=>f,drawRoundRectWithInnerBorder:()=>_,drawVerticalLine:()=>v,fillRectInnerBorder:()=>c,fillRectWithBorder:()=>b,scaleDrawRoundRectRadii:()=>g,scaledDashPattern:()=>x,setLineStyle:()=>T});var n=i(86441),r=i(5531),o=i(666574),a=i(497503),s=i(631088),l=i(347441);function u(e,t,i,n,r,o,a){e.save(),e.globalCompositeOperation="copy";const s=e.createLinearGradient(0,0,0,r)
;s.addColorStop(0,o),s.addColorStop(1,a),e.fillStyle=s,e.fillRect(t,i,n,r),e.restore()}function c(e,t,i,n,r,o){e.fillRect(t+o,i,n-2*o,o),e.fillRect(t+o,i+r-o,n-2*o,o),e.fillRect(t,i,o,r),e.fillRect(t+n-o,i,o,r)}function d(e,t,i,n){const r=e.lineWidth%2?.5:0;e.moveTo(i,t+r),e.lineTo(n,t+r)}function h(e,t,i,n){e.beginPath(),d(e,t,i,n),e.stroke()}function m(e,t,i,n){const r=e.lineWidth%2?.5:0;e.moveTo(t+r,i),e.lineTo(t+r,n)}function v(e,t,i,n){e.beginPath(),m(e,t,i,n),e.stroke()}function g(e,t){return Array.isArray(e)?e.map((e=>Math.round(e*t))):Math.round(e*t)}function p(e,t){return Array.isArray(e)?e.map((e=>0===e?e:e+t)):e+t}function f(e,t,i,n,r,o,a){let s,l,u,c;if(Array.isArray(o))if(2===o.length){const e=Math.max(0,o[0]),t=Math.max(0,o[1]);s=e,l=e,u=t,c=t}else{if(4!==o.length)throw new Error("Wrong border radius - it should be like css border radius");s=Math.max(0,o[0]),l=Math.max(0,o[1]),u=Math.max(0,o[2]),c=Math.max(0,o[3])}else{const e=Math.max(0,o);s=e,l=e,u=e,c=e}a||e.beginPath(),e.moveTo(t+s,i),e.lineTo(t+n-l,i),0!==l&&e.arcTo(t+n,i,t+n,i+l,l),e.lineTo(t+n,i+r-u),0!==u&&e.arcTo(t+n,i+r,t+n-u,i+r,u),e.lineTo(t+c,i+r),0!==c&&e.arcTo(t,i+r,t,i+r-c,c),e.lineTo(t,i+s),0!==s&&e.arcTo(t,i,t+s,i,s)}function _(e,t,i,n,r,o,s=0,l=0,u="",c=a.LineStyle.Solid){if(e.save(),!l||!u||u===o)return f(e,t,i,n,r,s),e.fillStyle=o,e.fill(),void e.restore();const d=l/2;if("transparent"!==o){const d="transparent"!==u&&c!==a.LineStyle.Solid;f(e,d?t:t+l,d?i:i+l,d?n:n-2*l,d?r:r-2*l,d?s:p(s,-l)),e.fillStyle=o,e.fill()}if("transparent"!==u){f(e,t+d,i+d,n-l,r-l,p(s,-d)),e.lineWidth=l,e.strokeStyle=u,T(e,c),e.closePath(),e.stroke()}e.restore()}function x(e,t){return t=Math.max(1,t),e.map((e=>e*t))}function b(e,t,i,n,r,a,l,u,c){const{context:d}=e,m=a%2/2,v=t+m,g=n+m;let p,f;if(u){const{borderMode:e,borderWidth:s,color:l,dashPattern:c,lineStyle:h}=u;switch(e){case"outer":{const e=-a/2-s/2,t=-s/2;f={left:v+e,right:g-e,top:i+t,bottom:r-t};break}case"center":{const e=s%2/2;f={left:t+e,right:n+e,top:i+e,bottom:r+e};break}case"inner":{const e=-a/2+s/2,t=s/2;f={left:v+e,right:g-e,top:i+t,bottom:r-t}}}d.strokeStyle=l,d.lineWidth=s;let m=-1;c?d.setLineDash(x(c,s)):void 0!==h&&(T(d,h),h===o.LINESTYLE_SOLID&&(m=1)),p={left:f.left+m*s/2,top:f.top+m*s/2,right:f.right-m*s/2,bottom:f.bottom-m*s/2}}if(l&&(d.fillStyle=l.color,p||(p={left:v-a/2,right:g+a/2,top:i,bottom:r}),d.fillRect(p.left,p.top,p.right-p.left,p.bottom-p.top)),c){const{lineWidth:o,lineColor:a,lineStyle:l,excludeBoundaries:u}=c;d.save(),d.lineCap="butt",d.lineWidth=o,d.strokeStyle=a,T(d,l);const m=()=>h(d,Math.floor((i+r)/2),t,n);u?(0,s.drawWithExclusionAreaByScope)(e,u,m):m(),d.restore()}f&&d.strokeRect(f.left,f.top,f.right-f.left,f.bottom-f.top)}function S(e,t,i,n){e.beginPath(),e.arc(t,i,n,0,2*Math.PI,!1),e.closePath()}function y(e,t,i){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(const i of t)e.lineTo(i.x,i.y);e.closePath(),e.stroke(),i&&e.fill()}function T(e,t){let i=[];t!==o.LINESTYLE_SOLID&&(i=w(e.lineWidth,t)),e.setLineDash(i)}function w(e,t){
return[[e,2*e],[5*e,6*e],[6*e,6*e],[e,4*e],[2*e,e]][t-1]}function M(e,t,i,n,r){e.moveTo(t,i),e.lineTo(n,r)}function C(e,t,i,n,r){isFinite(t)&&isFinite(n)&&isFinite(i)&&isFinite(r)&&(e.beginPath(),M(e,t,i,n,r),e.stroke())}function P(e,t,i,n,r,o){const{horizontalPixelRatio:a,verticalPixelRatio:s}=o;t===n?m(e,Math.round(t*a),i*s,r*s):i===r?d(e,Math.round(i*s),t*a,n*a):M(e,t*a,i*s,n*a,r*s)}function L(e,t,i,n,r,o=l.dpr1PixelRatioInfo){e.beginPath(),P(e,t,i,n,r,o),e.stroke()}function I(e,t,i,o){const a=(0,n.equalPoints)(i,o[0])?(0,n.equalPoints)(i,o[1])?null:o[1]:o[0];return null!==e&&null!==a?(0,r.intersectPolygonAndHalfplane)(e,(0,n.halfplaneThroughPoint)((0,n.lineThroughPoints)(t,i),a)):null}},391218:(e,t,i)=>{i.d(t,{svgRenderer:()=>C});var n=i(650151),r=i(338619);const o=(0,r.getLogger)("Chart.SvgParser");function a(e,t){const i=e.split(/[,\s]/).map((e=>parseFloat(e.trim())));let n=0;for(const e of i){if(!Number.isFinite(e)&&n<t)return null;n+=1}return i}const s=/([a-zA-Z]+)\((.*)\)/g;function l(e){var t;const i=null===(t=e.getAttribute("transform"))||void 0===t?void 0:t.toLowerCase();if(void 0===i)return null;const n=[];let r;s.lastIndex=0;do{if(r=s.exec(i),null!==r){const e=r[1],t=r[2];switch(e){case"matrix":const i=a(t,6);null!==i&&n.push({type:e,a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]});break;case"rotate":const r=a(t,1);null!==r&&n.push({type:e,a:r[0],x:r[1],y:r[2]});break;case"translate":const s=a(t,1);null!==s&&n.push({type:e,x:s[0],y:s[1]});break;case"scale":const l=a(t,1);null!==l&&n.push({type:e,x:l[0],y:l[1]});break;default:o.logWarn(`Unsupported transform operation: ${e}`)}}}while(null!==r);return 0===n.length?null:n}function u(e,t){var i,n;for(const r of t)switch(r.type){case"matrix":e.transform(r.a,r.b,r.c,r.d,r.e,r.f);break;case"rotate":void 0!==r.x&&void 0!==r.y&&e.translate(r.x,r.y),e.rotate(r.a*Math.PI/180),void 0!==r.x&&void 0!==r.y&&e.translate(-r.x,-r.y);break;case"scale":e.scale(r.x,null!==(i=r.y)&&void 0!==i?i:r.x);break;case"translate":e.translate(r.x,null!==(n=r.y)&&void 0!==n?n:0)}}function c(e,t){var i;return parseFloat(null!==(i=e.getAttribute(t))&&void 0!==i?i:"")}const d=/^url\(#(.*)\)/;function h(e){var t,i;return null!==(i=null===(t=d.exec(e))||void 0===t?void 0:t[1])&&void 0!==i?i:null}function m(e,t,i){const r={},o=e.getAttribute("fill");if(null!==o){const e=h(o);r.getFillStyle=null!==e?i=>(0,n.ensureDefined)(t.getStyle(e,i)):e=>o}const a=e.getAttribute("stroke");if(null!==a){const e=h(a);r.getStrokeStyle=null!==e?i=>(0,n.ensureDefined)(t.getStyle(e,i)):e=>a}const s=c(e,"stroke-width");Number.isFinite(s)&&(r.strokeWidth=s);const u=c(e,"opacity");Number.isFinite(u)&&(r.fillOpacity=u,r.strokeOpacity=u);const d=c(e,"stroke-opacity");Number.isFinite(d)&&(r.strokeOpacity=d);const m=c(e,"fill-opacity");if(Number.isFinite(m)&&(r.fillOpacity=m),i){const t=l(e);null!==t&&(r.transform=t)}return r}class v{constructor(e){this._transformOperations=e}apply(e,t){null!==this._transformOperations?(e.save(),u(e,this._transformOperations)):e.restore()}}class g{constructor(e,t,i){this._styleData={...i,
...m(e,t,!0)}}apply(e,t){if(!this._isValid())return;const{getFillStyle:i,getStrokeStyle:n,strokeWidth:r,transform:o,strokeOpacity:a,fillOpacity:s}=this._styleData,l=void 0!==o||void 0!==a||void 0!==s;l&&(e.save(),void 0!==o&&u(e,o)),this._render(e);const c=null==i?void 0:i(e);"none"!==c&&(t.doNotApplyColors||(void 0!==s&&(e.globalAlpha=s),e.fillStyle=null!=c?c:"black"),this._fill(e));const d=null==n?void 0:n(e);void 0!==d&&"none"!==d&&(void 0!==r&&(e.lineWidth=r),t.doNotApplyColors||(void 0!==s&&(e.globalAlpha=s),e.strokeStyle=d),this._stroke(e)),l&&e.restore()}_fill(e){e.fill()}_stroke(e){e.stroke()}}class p extends g{constructor(e,t,i){var n;super(e,t,i);const r=e.getAttribute("d");this._path=null!==r?new Path2D(r):null,this._fillRule=null!==(n=e.getAttribute("fill-rule"))&&void 0!==n?n:void 0}_fill(e){e.fill((0,n.ensureNotNull)(this._path),this._fillRule)}_stroke(e){e.stroke((0,n.ensureNotNull)(this._path))}_render(e){}_isValid(){return null!==this._path}}class f extends g{constructor(e,t,i){super(e,t,i),this._cx=c(e,"cx"),this._cy=c(e,"cy"),this._r=c(e,"r")}_render(e){e.beginPath(),e.arc(this._cx,this._cy,this._r,0,2*Math.PI)}_isValid(){return Number.isFinite(this._cx)&&Number.isFinite(this._cy)&&Number.isFinite(this._r)}}class _ extends g{constructor(e,t,i){super(e,t,i),this._cx=c(e,"cx"),this._cy=c(e,"cy"),this._rx=c(e,"rx"),this._ry=c(e,"ry")}_render(e){e.beginPath(),e.ellipse(this._cx,this._cy,this._rx,this._ry,0,0,2*Math.PI)}_isValid(){return Number.isFinite(this._cx)&&Number.isFinite(this._cy)&&Number.isFinite(this._rx)&&Number.isFinite(this._ry)}}class x{constructor(e){this._originalViewBox=e}apply(e,t){const i=t.targetViewBox;e.translate(i.x,i.y),e.scale(i.width/this._originalViewBox.width,i.height/this._originalViewBox.height),e.beginPath(),e.rect(0,0,this._originalViewBox.width,this._originalViewBox.height),e.clip(),e.translate(-this._originalViewBox.x,-this._originalViewBox.y)}}const b=(0,r.getLogger)("Chart.SvgParser");function S(e){const t=e.getAttribute("gradientUnits");if("objectBoundingBox"===t)return void b.logWarn(`Unsupported linearGradient gradientUnits: ${t}`);const i=[],n=e.getElementsByTagName("stop");for(let e=0;e<n.length;++e){const t=n[e],r=c(t,"offset"),o=t.getAttribute("stop-color");null!==o&&i.push([Number.isFinite(r)?r:0,o])}const r=c(e,"x1"),o=c(e,"y1"),a=c(e,"x2"),s=c(e,"y2");return e=>{const t=e.createLinearGradient(r,o,a,s);for(const e of i)t.addColorStop(e[0],e[1]);return t}}const y=(0,r.getLogger)("Chart.SvgParser");const T=new DOMParser,w=(0,r.getLogger)("Chart.SvgParser");function M(e,t,i,n){var r;const o=e.children;let a,s=n;"g"!==e.tagName&&"svg"!==e.tagName||(s={...s,...m(e,i,!1)},a=null!==(r=l(e))&&void 0!==r?r:void 0),void 0!==a&&t.push(new v(a));for(let e=0;e<o.length;++e){const n=o[e];"defs"!==n.tagName&&M(n,t,i,s)}switch(void 0!==a&&t.push(new v(null)),e.tagName){case"g":case"svg":case"defs":break;case"path":t.push(new p(e,i,n));break;case"circle":t.push(new f(e,i,n));break;case"ellipse":t.push(new _(e,i,n));break;default:
w.logWarn(`Unsupported tag name: ${e.tagName}`)}}function C(e){const t=T.parseFromString(e,"application/xml"),i=[],r=t.getElementsByTagName("svg")[0],o=(0,n.ensureNotNull)(r.getAttribute("viewBox")).split(" ").map(parseFloat),a={x:o[0],y:o[1],width:o[2],height:o[3]};i.push(new x(a));let s={getStyle:()=>{}};const l=r.getElementsByTagName("defs");return l.length>0&&(s=function(e){const t={},i=e.children;for(let e=0;e<i.length;++e){const n=i[e],r=n.getAttribute("id");r&&("linearGradient"===n.tagName?t[r]=S(n):y.logWarn(`Unsupported defs tag: ${n.tagName}`))}const n=new WeakMap;return{getStyle:(e,i)=>{const r=t[e];if(!r)return;let o=n.get(i);void 0===o&&(o=new Map,n.set(i,o));const a=o.get(e);if(void 0!==a)return a;const s=r(i);return o.set(e,s),s}}}(l[0])),M(r,i,s),{viewBox:()=>a,render:(e,t)=>{e.save();for(const n of i)n.apply(e,t);e.restore()}}}},343272:(e,t,i)=>{i.d(t,{sortSources:()=>r,sortSourcesPreOrdered:()=>n});const n={LatestUpdates:10000001,BarMarks:10000002,TimeScaleMarks:10000003,ChartEventsSource:10000004,Dividends:10000005,Splits:10000006,Earnings:10000007,RollDates:10000008,FutureContractExpiration:10000009,LineToolOrder:10000010,LineToolPosition:10000011,LineToolExecution:10000012,AlertLabelInactive:10000013,AlertLabel:10000014};function r(e,t){if(0===e.length)return[];if(!t)return[...e].sort(((e,t)=>e.zorder()-t.zorder()));if(!(t.model().mainPane()===t))return[...e].sort(((e,t)=>e.zorder()-t.zorder()));const i=t.model().panes(),n=i.indexOf(t),r=e=>i.findIndex((t=>t.hasDataSource(e)));return e.map((e=>{const i=!t.hasDataSource(e);return{source:e,isMultipane:i,aboveSeries:e.zorder()>t.model().mainSeries().zorder(),paneIndex:i?r(e):n}})).sort(((e,t)=>e.isMultipane||t.isMultipane?e.isMultipane&&!t.isMultipane?t.aboveSeries?-1:1:!e.isMultipane&&t.isMultipane?e.aboveSeries?1:-1:e.paneIndex-t.paneIndex:e.source.zorder()-t.source.zorder())).map((e=>e.source))}},968720:(e,t,i)=>{i.d(t,{PriceAxisViewRenderer:()=>h,hittestByData:()=>d});var n=i(86441),r=i(934026),o=i(937713),a=i(881025),s=i(631088),l=i(509078),u=i(665798);const c=new Path2D("M4.09.93c.4.16.75.4 1.02.73a5.47 5.47 0 0 0-3.78 3.27A2.5 2.5 0 0 1 3.2.77c.31 0 .61.06.89.16Zm8.24 3.35a2.5 2.5 0 0 0-3.27-3.23c-.38.16-.7.4-.97.7a5.47 5.47 0 0 1 3.56 3.5c.3-.26.53-.6.68-.97Zm-3.15-.84a4.5 4.5 0 1 0-5.5 7.12 4.5 4.5 0 0 0 5.5-7.12ZM6 4h1v4H4V7h2V4Z");function d(e,t){var i;const a=(0,o.lastMouseOrTouchEventInfo)().isTouch?10:0,s=e.hitTestData;if(void 0===s||!e.visible)return null;const{itemBox:u,clickHandler:c,tooltip:d}=s;if(u){const o=(0,n.box)(new n.Point(u.min.x-a,u.min.y-a),new n.Point(u.max.x+a,u.max.y+a));if((0,r.pointInBox)(t,o))return new l.HitTestResult(null!==(i=e.hitTarget)&&void 0!==i?i:l.HitTarget.Custom,{clickHandler:null==c?void 0:c.bind(null,t),tapHandler:null==c?void 0:c.bind(null,t),hoverModelFromAxis:s.hoverModelFromAxis,activeItem:s.activeItem,tooltip:d})}return null}class h{constructor(e,t){this._bodyBox=null,this.setData(e,t)}setData(e,t){this._data=e,this._commonData=t}lastDrawnBodyBox(){return this._bodyBox}draw(e,t,i,r,o){var l,c,d,h
;const m=this._data,{mediaSize:v,bitmapSize:g,horizontalPixelRatio:p,verticalPixelRatio:f}=t;if(!m.visible||this._isOutOfScreen(i,v.height))return;const _=this._commonData,x=void 0!==m.labelIcon,b=i.paddingTop+_.additionalPaddingTop,S=i.paddingBottom+_.additionalPaddingBottom,{paddingOuter:y,paddingInner:T,fontSize:w,borderSize:M}=i,C=m.ignoreAdditionalPaddingInner?0:i.additionalPaddingInner;let P=m.text,L=m.textColor||_.textColor,I=m.secondLine||"",V=_.secondLineTextColor||L,A=m.thirdLine||"";const k=_.thirdLineTextColor||L;0===I.length&&(I=A,V=k,A=""),0===P.length&&(P=I,L=V,I=A,V=k,A=""),e.save(),void 0!==_.globalAlpha&&(e.globalAlpha*=_.globalAlpha),e.font=i.font;const D=r.yMidCorrection(e,P)*f,B=w+b+S,F=(null!==(l=m.labelIconMinWidth)&&void 0!==l?l:0)*p,R=Boolean(I),N=Boolean(A),W=T+y+C,E=[Math.ceil(r.measureText(e,P)),R?Math.ceil(r.measureText(e,I)):0,N?Math.ceil(r.measureText(e,A)):0],O=Math.max(1,Math.floor(f));let z=Math.round(B*f);z%2!=O%2&&(z+=1);const H=Math.round((w+i.lineSpacing)*f),U=Math.round(2*(w+i.lineSpacing)*f),$=Math.max(1,Math.floor(M*p)),j=m.separatorVisible?$:0,q=m.borderVisible?$:0,K=x?Math.max(z,F):Math.round((Math.max(...E)+W)*p),G=Math.round(C*p),Z=g.width,Y=Math.ceil(T*p),Q=Math.round((null!==(c=_.fixedCoordinate)&&void 0!==c?c:_.coordinate)*f)-Math.floor(.5*f),J=Math.floor(Q+O/2-z/2),X=J+z,ee="right"===o,te=void 0!==m.xCoord?Math.round(m.xCoord*p)+(ee?1:-1)*Math.round(K/2):ee?Z-j:j;let ie,ne=te;const re=null!==(d=m.backgroung)&&void 0!==d?d:_.background;e.fillStyle=re;const oe=2*f;if(e.textAlign=ee?"right":"left",e.textBaseline="middle",ee?(ne=te-K,ie=te-G-Y+j):(ne=te+K,ie=te+G+Y-j),this._bodyBox=null,P||x){const i=N?z+U:R?z+H:z,r=null!==(h=_.borderColor)&&void 0!==h?h:re,o=void 0!==m.xCoord?oe:0;if(((t,r,a)=>{if(ee){(0,u.drawRoundRectWithInnerBorder)(e,ne,J,K,i,t,m.overridenRadius?(0,u.scaleDrawRoundRectRadii)(m.overridenRadius,f):[oe,o,o,oe],q,r,a);const s=(0,n.point)(ne/p,J/f),l=s.add((0,n.point)(K/p,i/f));this._bodyBox=(0,n.box)(s,l)}else{(0,u.drawRoundRectWithInnerBorder)(e,te,J,K,i,t,m.overridenRadius?(0,u.scaleDrawRoundRectRadii)(m.overridenRadius,f):[o,oe,oe,o],q,r,a);const s=(0,n.point)(te/p,J/f),l=s.add((0,n.point)(K/p,i/f));this._bodyBox=(0,n.box)(s,l)}})(re,r,_.borderStyle),x){switch(m.labelIcon){case 0:this._drawPlusIcon(e,te,ne,J,Q,X,O);break;case 1:this._drawClockExistingAlertIcon(e,te,ne,t,J,i)}return void e.restore()}e.save(),e.translate(ie,(J+X)/2+D),(0,s.drawScaled)(e,p,f,(()=>{e.fillStyle=L,e.fillText(P,0,0)})),e.restore()}R&&(e.fillStyle=V,e.save(),e.translate(ie,(J+X)/2+D+H),(0,s.drawScaled)(e,p,f,(()=>{e.fillText((0,a.startWithLTR)(I),0,0)})),e.restore()),N&&(e.fillStyle=k,e.save(),e.translate(ie,(J+X)/2+D+U),(0,s.drawScaled)(e,p,f,(()=>{e.fillText((0,a.startWithLTR)(A),0,0)})),e.restore()),e.restore()}topBottomTotalHeight(e){const t=this._lines();if(!this._data.visible||0===t)return{top:0,bottom:0,total:0}
;const i=e.fontSize/2+e.paddingTop+this._commonData.additionalPaddingTop,n=(t-.5)*e.fontSize+(t-1)*e.lineSpacing+e.paddingBottom+this._commonData.additionalPaddingBottom;return{top:i,bottom:n,total:i+n}}hitTest(e){return d(this._data,e)}_drawPlusIcon(e,t,i,n,r,o,a){e.fillStyle=this._commonData.textColor,e.strokeStyle=this._commonData.textColor,e.lineWidth=a;const s=Math.abs(t-i);let l=Math.round(.35*s);l%2!=a%2&&(l+=1);let u=Math.round(.65*s);u%2!=a%2&&(u+=1);const c=Math.floor((s-l)/2),d=Math.min(t,i),h=d+Math.floor(s/2-a/2);e.fillRect(d+c,r,l,a),e.fillRect(h,n+c,a,l),e.beginPath(),e.arc(h+a/2,r+a/2,u/2,0,2*Math.PI,!1),e.stroke()}_drawClockExistingAlertIcon(e,t,i,n,r,o){e.fillStyle=this._commonData.textColor;const a=Math.abs(t-i),s=Math.min(t,i),{horizontalPixelRatio:l,verticalPixelRatio:u}=n,d=a/(23*l),h=a/(23*u),m=12*l*d,v=10.73*u*h,g=Math.floor((a-m)/2),p=Math.floor((o-v)/2)-1;e.save(),e.translate(s+g,r+p),e.scale(l*d,u*h),e.fill(c),e.restore()}_lines(){const e=this._data;return(e.text?1:0)+(e.secondLine?1:0)+(e.thirdLine?1:0)}_isOutOfScreen(e,t){var i;const n=this._commonData,r=null!==(i=n.fixedCoordinate)&&void 0!==i?i:n.coordinate,{total:o}=this.topBottomTotalHeight(e),a=o/this._lines();return r-a/2-3>t||r+(o-a/2)+3<0}}},704670:(e,t,i)=>{i.d(t,{PriceRange:()=>o,mergePriceRanges:()=>a});var n=i(124829);const r=(0,i(338619).getLogger)("Chart.PriceRange");class o{constructor(e,t){if(null!==e&&"object"==typeof e){const t=e;this._minValue=t.m_minValue,this._maxValue=t.m_maxValue}else{const i=e;this._minValue=i,void 0!==t&&(this._maxValue=t)}}equals(e){return this._minValue===e._minValue&&this._maxValue===e._maxValue}clone(){return new o(this._minValue,this._maxValue)}minValue(){return this._minValue}setMinValue(e){this._minValue=e}maxValue(){return this._maxValue}setMaxValue(e){this._maxValue=e}length(){return this._maxValue-this._minValue}isEmpty(){return this._maxValue===this._minValue||this._maxValue!=this._maxValue||this._minValue!=this._minValue}serialize(){return{m_maxValue:this._maxValue,m_minValue:this._minValue}}state(){return{max:this._maxValue,min:this._minValue}}merge(e){return new o(Math.min(this.minValue(),e.minValue()),Math.max(this.maxValue(),e.maxValue()))}apply(e,t){this._minValue=Math.min(this._minValue,e),this._maxValue=Math.max(this._maxValue,t)}set(e,t){this._minValue=e,this._maxValue=t}scaleAroundCenter(e){if(!(0,n.isNumber)(e))return void r.logDebug("PriceRange.scaleAroundCenter: invalid coeff");if(0===this._maxValue-this._minValue)return;const t=.5*(this._maxValue+this._minValue);let i=this._maxValue-t,o=this._minValue-t;i*=e,o*=e,this._maxValue=t+i,this._minValue=t+o}shift(e){(0,n.isNumber)(e)?(this._maxValue+=e,this._minValue+=e):r.logDebug("PriceRange.shift: invalid coeff")}containsStrictly(e){return e.minValue()>this._minValue&&e.maxValue()<this._maxValue}static compare(e,t){return null===e||null===t?e===t:e.equals(t)}}function a(e){return e.reduce(((e,t)=>e?t?e.merge(t):e:t),null)}},259638:(e,t,i)=>{i.d(t,{SeriesTimeRangeVolumeCalculator:()=>n});class n{constructor(e){this._value=null,
this._series=e,this._series.dataEvents().dataUpdated().subscribe(this,this._onSeriesUpdated)}destroy(){this._series.dataEvents().dataUpdated().unsubscribeAll(this)}volume(e,t){if(null!==this._value&&this._value.from===e&&this._value.to===t)return this._value.value;let i=0;const n=this._series.data().bars(),r=n.firstIndex(),o=n.lastIndex();if(null!==r&&e<r&&t<r||null!==o&&e>o&&t>o)i=NaN;else{const n=this._series.data().bars().rangeIterator(Math.min(e,t),Math.max(e,t));for(const e of n){const t=e.value[5];if(void 0===t){i=NaN;break}i+=t}}return this._value={from:e,to:t,value:i},i}_onSeriesUpdated(e,t){if(null===this._value)return;if(t)return void(this._value=null);const i=this._series.data().bars().lastIndex();(null===i||i<=this._value.to)&&(this._value=null)}}},157504:(e,t,i)=>{i.d(t,{areEqualSymbols:()=>o,compareSymbolParams:()=>u,symbolParams:()=>l,symbolSameAsCurrent:()=>s});i(764829);var n=i(975179),r=i(378975);function o(e,t){return void 0===e?void 0===t:void 0!==t&&e.toUpperCase()===t.toUpperCase()}function a(e,t){return e.some((e=>o(t,e)))}function s(e,t){if(null===t)return!1;if(t){if(o(t.full_name,e)||o(t.pro_name,e))return!0;if(o(t.ticker,e))return!0;if(t.aliases&&a(t.aliases,e))return!0;if(t.alternatives&&a(t.alternatives,e))return!0;if(0===e.indexOf("FRA:")&&o(t.pro_name,e.replace("FRA:","FWB:")))return!0}return!1}function l(e){return{symbol:e.symbol(),currency:e.currency(),unit:e.unit(),interval:e.interval(),style:e.style()}}function u(e,t,i){const{symbol:o,currency:a,unit:s,style:l,interval:u}=t,c=void 0!==o&&!e.symbolSameAsResolved(o);let d,h;const m=e.symbolInfo();null!==m?(d=void 0!==a&&!function(e,t){return null===e&&!(0,n.isConvertedToOtherCurrency)(t)||e===(0,n.symbolCurrency)(t)}(a,m),h=void 0!==s&&!function(e,t,i){return null===e&&!(0,n.isConvertedToOtherUnit)(t,i)||e===(0,n.symbolUnit)(t,i)}(s,m,i)):(d=void 0!==a&&a!==e.currency(),h=void 0!==s&&s!==e.unit());return{symbolChanged:c,intervalChanged:void 0!==u&&!r.Interval.isEqual(e.interval(),u),currencyChanged:d,unitChanged:h,styleChanged:void 0!==l&&l!==e.style(),styleChangeRequiresRestart:void 0!==l&&(0,n.styleChangeRequiresRestart)(l,e.style())}}},5486:(e,t,i)=>{function n(e){return{width:e.width,actualBoundingBoxAscent:e.actualBoundingBoxAscent,actualBoundingBoxDescent:e.actualBoundingBoxDescent,fontBoundingBoxAscent:e.fontBoundingBoxAscent,fontBoundingBoxDescent:e.fontBoundingBoxDescent}}i.d(t,{TextWidthCache:()=>r,getMinTextMetrics:()=>n});class r{constructor(e=150){this._actualSize=0,this._usageTick=1,this._oldestTick=1,this._tick2Labels=new Map,this._cache=new Map,this._fontStyle="",this._maxSize=e}reset(){this._actualSize=0,this._cache.clear(),this._usageTick=1,this._oldestTick=1,this._tick2Labels.clear()}measureText(e,t){return this.getMetrics(e,t).width}yMidCorrection(e,t){const i=this.getMetrics(e,t);return void 0!==i.actualBoundingBoxAscent&&void 0!==i.actualBoundingBoxDescent?(i.actualBoundingBoxAscent-i.actualBoundingBoxDescent)/2:0}getMetrics(e,t){e.font!==this._fontStyle&&(this.reset(),this._fontStyle=e.font)
;const i=this._cache.get(t);if(void 0!==i)return i.metrics;if(this._actualSize===this._maxSize){const e=this._tick2Labels.get(this._oldestTick);this._tick2Labels.delete(this._oldestTick),this._cache.delete(e),this._oldestTick++,this._actualSize--}const r=e.textBaseline;e.textBaseline="middle";const o=n(e.measureText(t));return e.textBaseline=r,0===o.width&&t.length||(this._cache.set(t,{metrics:o,tick:this._usageTick}),this._tick2Labels.set(this._usageTick,t),this._actualSize++,this._usageTick++),o}}},83810:(e,t,i)=>{i.d(t,{TimeAxisView:()=>a});var n=i(432059),r=i(631088);class o{constructor(){this._data=null}setData(e){this._data=e}draw(e,t,i){if(null===this._data||!this._data.visible||0===this._data.text.length)return;const n=this._data;e.font=i.font;const o=Math.round(i.widthCache.measureText(e,n.text));if(o<=0)return;e.save();const a=i.paddingHorizontal,s=o+2*a,l=s/2;let u=n.coordinate,c=Math.floor(u-l)+.5;if(n.alwaysInViewPort){const e=n.width;c<0?(u+=Math.abs(0-c),c=Math.floor(u-l)+.5):c+s>e&&(u-=Math.abs(e-(c+s)),c=Math.floor(u-l)+.5)}const d=c+s,h=Math.ceil(0+i.borderSize+i.offsetSize+i.paddingTop+i.fontSize+i.paddingBottom),{horizontalPixelRatio:m,verticalPixelRatio:v}=t;e.fillStyle=n.background;const g=Math.round(c*m),p=Math.round(0*v),f=Math.round(d*m),_=Math.round(h*v),x=Math.round(2*m);e.beginPath(),e.moveTo(g,p),e.lineTo(g,_-x),e.arcTo(g,_,g+x,_,x),e.lineTo(f-x,_),e.arcTo(f,_,f,_-x,x),e.lineTo(f,p),e.fill();const b=0+i.borderSize+i.offsetSize+i.paddingTop+i.fontSize/2;e.textAlign="left",e.textBaseline="middle",e.fillStyle=n.color;const S=i.widthCache.yMidCorrection(e,"Apr0");e.translate((c+a)*m,(b+S)*v),(0,r.drawScaled)(e,m,v,(()=>e.fillText(n.text,0,0))),e.restore()}}class a{constructor(e){this._renderer=new o,this._rendererData={background:"",color:"",coordinate:0,text:"",visible:!1,width:0,alwaysInViewPort:!0},this._invalidated=!0,this._model=e,this._renderer.setData(this._rendererData)}update(){this._invalidated=!0}renderer(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer}coordinate(){return this._rendererData.coordinate}_getAlwaysInViewPort(){return!0}_getText(e){const t=this._model.timeScale().indexToUserTime(e);return null!==t?this._model.dateTimeFormatter().format(t):""}_updateImpl(){const e=this._rendererData;if(e.visible=!1,this._model.timeScale().isEmpty()||!this._isVisible())return;const t=this._getIndex();null!==t&&Number.isFinite(t)&&(e.visible=!0,e.width=this._model.timeScale().width(),e.background=this._getBgColor(),e.color=(0,n.colorFromBackground)(e.background),e.coordinate=this._model.timeScale().indexToCoordinate(t),e.alwaysInViewPort=this._getAlwaysInViewPort(),e.text=this._getText(t),this._invalidated=!1)}}},669763:(e,t,i)=>{i.d(t,{UndoCommand:()=>r});var n=i(370407);class r{constructor(e,t=!0,i=!0){this._text=e||new n.TranslatedString("",""),this._executeOnPush=t,this._affectsState=i}text(){return this._text}executeOnPush(){return this._executeOnPush}affectsState(){return this._affectsState}canMerge(e){return!1}merge(e){
throw new Error("Should be re-implemented in child classes")}}},447935:(e,t,i)=>{i.d(t,{getChartAlertsFacade:()=>s,getChartAlertsFacadeIfCreatedBefore:()=>l});var n=i(383851),r=i(653801);let o,a;async function s(){return o||(o=async function(){const[e,{getAlertsCollection:t},o,a]=await Promise.all([Promise.all([i.e(32856),i.e(94674),i.e(2909),i.e(1867),i.e(10196),i.e(45761),i.e(56580),i.e(91599),i.e(36679)]).then(i.bind(i,816545)),Promise.all([i.e(94251),i.e(11183),i.e(1867),i.e(10196),i.e(45761),i.e(56580),i.e(14141)]).then(i.bind(i,856580)),(0,r.getChartSourceIdsGetter)(),(0,n.getAlertsFiresFocusHandler)()]);return new e.ChartAlertsFacade(t(),a,o)}()),a||(a=await o),a}function l(){return null!=a?a:null}},653801:(e,t,i)=>{i.d(t,{getChartSourceIdsGetter:()=>n});const n=(0,i(895171).default)((async()=>{const{ChartSourceIdsGetter:e}=await Promise.all([i.e(94251),i.e(97947),i.e(1867),i.e(10196),i.e(45761),i.e(56580),i.e(79979)]).then(i.bind(i,742240));return new e}))},694852:(e,t,i)=>{function n(e,t,i,n){return`${n?n+" ":""}${i?i+" ":""}${e}px ${t}`}i.d(t,{makeFont:()=>n,parseFont:()=>o});const r=/(bold )?(italic )?(\d+)(px|pt) (.*)$/;function o(e){const t=r.exec(e);return null===t?null:{family:t[5],size:parseInt(t[3])*("pt"===t[4]?.75:1),bold:Boolean(t[1]),italic:Boolean(t[2])}}},708050:(e,t,i)=>{async function n(e){(await Promise.all([i.e(4651),i.e(37387),i.e(75816),i.e(46445),i.e(65857),i.e(22164),i.e(36010),i.e(33253),i.e(491),i.e(34693),i.e(88778),i.e(43311),i.e(35955),i.e(20431),i.e(82321),i.e(29147),i.e(24229),i.e(45113),i.e(94913)]).then(i.bind(i,535571))).renderRunOrSigninWithFeatureDialog(e)}i.d(t,{createRunOrSigniWithFeatureDialog:()=>n})},39510:(e,t,i)=>{i.d(t,{showGoProAlertsOnSecondsDialog:()=>r});var n=i(590508);i(659863);function r(){(0,n.createGoProDialog)({feature:"alertsOnSeconds"})}},387964:(e,t,i)=>{function n(e){let t;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if(e instanceof Date)t=new Date(e.valueOf());else if(Array.isArray(e)){t=[];let i=0;const r=e.length;for(;i<r;i++)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=n(e[i]))}else{t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=n(e[i]))}return t}i.d(t,{deepCopy:()=>n})}}]);
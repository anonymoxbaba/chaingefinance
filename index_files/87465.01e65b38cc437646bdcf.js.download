"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[87465],{200441:(t,e,i)=>{i.d(e,{AbstractBarColorer:()=>s});class s{constructor(){this._backColorers=[]}barStyle(t,e,i){const s={};for(const r of this._backColorers)r.applyBarStyle(t,e,s,i);return this.applyBarStyle(t,e,s,i),s}pushBackBarColorer(t){this._backColorers.unshift(t)}firstColoredBar(t){return null}}},546821:(t,e,i)=>{i.d(e,{actualCurrencyUnitVisibility:()=>h,currencyUnitVisibilityOptions:()=>n,currencyUnitVisibilityProperty:()=>l,migrateShowCurrencyAndShowUnitProperties:()=>d,restoreCurrencyUnitVisibilitySettingsValue:()=>a});var s=i(154241),r=i(62802),o=i.n(r);const{property:l,availableValues:n,restoreDefaultValue:a,actualBehavior:h}=(0,s.createVisibilityController)("PriceAxisCurrencyAndUnit.visibility");let u=!1;function d(t,e){u||(u=!0,void 0===o().getValue("PriceAxisCurrencyAndUnit.visibility")&&l().setValue(t||e?"alwaysOn":"alwaysOff"))}},49839:(t,e,i)=>{i.d(e,{DataWindowItem:()=>s,DataWindowView:()=>r});class s{constructor(t,e,i,s=!1){this._visible=!0,this._id=t,this._title=e,this._value=i,this._unimportant=s}id(){return this._id}title(){return this._title}setTitle(t){this._title=t}text(){return this._value}value(){return this._value}setValue(t){this._value=t}visible(){return this._visible}setVisible(t){this._visible=t}color(){return this._color}setColor(t){this._color=t}unimportant(){return this._unimportant}}class r{constructor(){this._items=[],this._header="",this._title=""}header(){return this._header}title(){return this._title}items(){return this._items}update(){}}},799878:(t,e,i)=>{i.d(e,{FormattersSerializer:()=>h});var s=i(650151),r=i(735211),o=i(957365),l=i(142567),n=i(941252);const a={price:r.PriceFormatter,volume:o.VolumeFormatter,percentage:l.PercentageFormatter,quoteSessionPrice:n.QuoteSessionPriceFormatter};var h;!function(t){function e(t){return(0,s.ensureDefined)(a[t.type]).deserialize(t.state)}t.serialize=function(t){const e=(0,s.ensureDefined)(a[t.type]);return{type:t.type,state:e.serialize(t)}},t.deserialize=e,t.safeDeserialize=function(t){try{return e(t)}catch(t){return null}}}(h||(h={}))},941252:(t,e,i)=>{i.d(e,{QuoteSessionPriceFormatter:()=>r});var s=i(735211);class r{constructor(t){this.type="quoteSessionPrice",this.reset(t)}state(){return this._priceFormatter.state()}reset(t){this._priceFormatter=t||new s.PriceFormatter({priceScale:100,minMove:1,fractional:!1})}update(t,e){const i=null!=e.pricescale||null!=e.minmov||null!=e.fractional||null!=e.minmove2,r=null!=t.pricescale&&null!=t.minmov&&null!=t.fractional&&null!=t.minmove2;i&&r&&(this._priceFormatter=new s.PriceFormatter({priceScale:t.pricescale,minMove:t.minmov,fractional:t.fractional||!1,minMove2:t.minmove2}))}format(t,e){return this._priceFormatter.format(t,e)}hasForexAdditionalPrecision(){return this._priceFormatter.hasForexAdditionalPrecision()}static serialize(t){return t.state()}static deserialize(t){const e=new s.PriceFormatter(t);return new r(e)}}},498830:(t,e,i)=>{i.d(e,{getPriceValueFormatterForSource:()=>a,
getPriceValueFormatterForStudy:()=>h,shouldBeFormattedAsIndexedTo100:()=>l,shouldBeFormattedAsPercent:()=>o});var s=i(975179),r=i(487945);function o(t){const e=t.priceScale();return!(null===e||!e.isPercentage())&&(!(0,r.isActingAsSymbolSource)(t)||(0,s.isPriceSourceStyle)(t.style()))}function l(t){const e=t.priceScale();return!(null===e||!e.isIndexedTo100())&&(!(0,r.isActingAsSymbolSource)(t)||(0,s.isPriceSourceStyle)(t.style()))}function n(t){const e=t.priceScale();return l(t)&&null!==e?(i,s)=>{var r;return e.formatPriceIndexedTo100(i,null!==(r=t.firstValue())&&void 0!==r?r:100,s)}:o(t)&&null!==e?(i,s)=>{var r;return e.formatPricePercentage(i,null!==(r=t.firstValue())&&void 0!==r?r:100,s)}:null}function a(t){const e=n(t);if(e)return e;const i=t.formatter();return i.format.bind(i)}function h(t,e){const i=n(t);if(i)return i;const s=t.plotFormatter(e);return s.format.bind(s)}},345159:(t,e,i)=>{i.d(e,{HorizontalLinePaneView:()=>o});var s=i(467841),r=i(666574);class o{constructor(){this._lineRendererData={y:0,color:"rgba(0, 0, 0, 0)",linewidth:1,linestyle:r.LINESTYLE_SOLID,visible:!1},this._lineRenderer=new s.HorizontalLineRenderer,this._invalidated=!0,this._lineRenderer.setData(this._lineRendererData)}update(t){this._invalidated=!0}renderer(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._lineRenderer}}},581899:(t,e,i)=>{i.d(e,{notAvailable:()=>s});i(444372),i(764829);const s="âˆ…"},114555:(t,e,i)=>{i.d(e,{AreaBackgroundItem:()=>a,AreaBackgroundItemsGroup:()=>l,AreaBackgroundRenderer:()=>h,CachedMap:()=>n});var s=i(650151),r=i(961970),o=i(117908);class l extends o.CachedContainer{constructor(t){super(),this.color=t}}class n{constructor(){this._map=new Map,this._usedKeys=new Set,this._invalidations=0}invalidateCache(){this._invalidations+=1,50===this._invalidations&&(this._deleteUnused(),this._invalidations=0),this._usedKeys.clear(),this._map.forEach(((t,e)=>t.invalidateCache()))}get(t){const e=this._map.get(t);return void 0!==e&&this._usedKeys.add(t),e}set(t,e){this._usedKeys.add(t),this._map.set(t,e)}[Symbol.iterator](){const t=Array.from(this._usedKeys)[Symbol.iterator]();return{[Symbol.iterator](){return this},next:()=>{const e=t.next();return e.value?{value:[e.value,(0,s.ensureDefined)(this._map.get(e.value))],done:!1}:{value:void 0,done:!0}}}}forEach(t){this._map.forEach(((e,i)=>{this._usedKeys.has(i)&&t(e,i)}))}delete(t){const e=this._map.get(t);void 0!==e&&e.invalidateCache(),this._usedKeys.delete(t)}_deleteUnused(){const t=[];this._map.forEach(((e,i)=>{this._usedKeys.has(i)||t.push(i)}));for(const e of t)this._map.delete(e)}}class a extends o.CachedContainer{constructor(){super(),this.points1=new o.CachedContainer,this.points2=new o.CachedContainer,this.push(this.points1),this.push(this.points2)}addPoints1Point(t,e){let i=this.points1.newItem();null!==i?(i.x=t,i.y=e):i={x:t,y:e},this.points1.push(i)}addPoints2Point(t,e){let i=this.points2.newItem();null!==i?(i.x=t,i.y=e):i={x:t,y:e},this.points2.push(i)}invalidateCache(){this.points1.invalidateCache(),this.points2.invalidateCache()}}
class h extends r.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=null,this._data=null!=t?t:null}setData(t){this._data=t}hitTest(t){return null}_drawImpl(t){var e,i;if(null===this._data)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:o}=t,l=.25*this._data.barSpacing;for(const[,t]of this._data.colorAreas){s.beginPath();for(let e=0;e<t.length();e++){const i=t.at(e);if(i.points1.isEmpty()||i.points2.isEmpty())continue;const n=i.points1.at(0).x,a=i.points1.at(0).y;if(s.moveTo(Math.round(n*r),a*o),1!==i.points1.length()&&1!==i.points2.length()){for(const t of i.points1.iterator(1))s.lineTo(Math.round(t.x*r),t.y*o);for(const t of i.points2.iterator(i.points2.length()-1,!0))s.lineTo(Math.round(t.x*r),t.y*o)}else{const t=i.points2.at(0).x,e=i.points2.at(0).y;s.lineTo(Math.round((n+l)*r),a*o),s.lineTo(Math.round((t+l)*r),e*o),s.lineTo(Math.round((t-l)*r),e*o),s.lineTo(Math.round((n-l)*r),a*o)}}if(s.closePath(),0===t.color.type)s.fillStyle=t.color.color;else{const r=s.createLinearGradient(0,t.color.coordinate1*o,0,t.color.coordinate2*o);r.addColorStop(0,null!==(e=t.color.color1)&&void 0!==e?e:"transparent"),r.addColorStop(1,null!==(i=t.color.color2)&&void 0!==i?i:"transparent"),s.fillStyle=r}s.fill()}}}},467841:(t,e,i)=>{i.d(e,{HorizontalLineRenderer:()=>a});var s=i(509078),r=i(665798),o=i(286436),l=i(961970),n=i(631088);class a extends l.BitmapCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null,this._hitTest=new s.HitTestResult(s.HitTarget.Regular)}setData(t){this._data=t}setHitTest(t){this._hitTest=t}hitTest(t){if(null===this._data||!1===this._data.visible||null===this._hitTest)return null;const e=(0,o.interactionTolerance)().line,i=Math.abs(t.y-this._data.y)<=e+this._data.linewidth/2,s=void 0===this._data.left||this._data.left-t.x<=e,r=void 0===this._data.right||t.x-this._data.right<=e;return i&&s&&r?this._hitTest:null}_drawImpl(t){if(null===this._data||!1===this._data.visible)return;const{context:e,horizontalPixelRatio:i,verticalPixelRatio:s,mediaSize:o}=t;if(this._data.y<-this._data.linewidth/2||this._data.y>o.height+this._data.linewidth/2)return;e.lineCap="butt",e.strokeStyle=this._data.color,e.lineWidth=Math.max(1,Math.floor(this._data.linewidth*i)),void 0!==this._data.linestyle&&(0,r.setLineStyle)(e,this._data.linestyle);const l=void 0!==this._data.left?Math.max(this._data.left,0):0,a=void 0!==this._data.right?Math.min(this._data.right,o.width):o.width,h=Math.round(this._data.y*s),u=Math.round(l*i),d=Math.round(a*i),c=this._data.excludeBoundaries;void 0!==c&&(0,n.addExclusionAreaByScope)(t,c),(0,r.drawHorizontalLine)(e,h,u,d)}}},117908:(t,e,i)=>{i.d(e,{CachedContainer:()=>r,ObjectValuesCache:()=>o});class s{constructor(t,e,i,s){this._items=t,this._actualLength=e,this._step=s?-1:1,this._currentIndex=i-this._step}[Symbol.iterator](){return this}next(){return this._currentIndex+=this._step,this._currentIndex>=this._actualLength||this._currentIndex<0?{value:void 0,done:!0}:{done:!1,value:this._items[this._currentIndex]}}}class r{constructor(){this._items=[],
this._actualLength=0,this._invalidations=0}push(t){this._items.length===this._actualLength?this._items.push(t):this._items[this._actualLength]!==t&&(this._items[this._actualLength]=t),this._actualLength+=1}newItem(){const t=this._items.length>this._actualLength?this._items[this._actualLength]:null;return null!==t&&Boolean(t.invalidateCache)&&t.invalidateCache(),t}invalidateCache(){this._invalidations+=1,3e3===this._invalidations&&(this._items.splice(this._actualLength),this._invalidations=0),this._actualLength=0}at(t){return this._items[t]}data(){return this._items}length(){return this._actualLength}isEmpty(){return 0===this._actualLength}iterator(t,e){return new s(this._items,this._actualLength,t,e)}}class o extends r{constructor(){super(...arguments),this._startIndex=0}setStartIndex(t){this._startIndex=t}isValidIndex(t){return t>=this._startIndex}at(t){const e=t-this._startIndex;for(;e>=this._actualLength;)this._items.length<=e?this._items.push(this._newObject()):this._clearObject(this._items[this._actualLength]),this._actualLength+=1;return this._items[e]}}},336928:(t,e,i)=>{i.d(e,{PriceLineAxisView:()=>a,SeriesPriceLineAxisView:()=>h,StudyPriceLineAxisView:()=>u});var s=i(347808),r=i(650151),o=i(666574),l=i(665798);class n{constructor(t,e){this.setData(t,e)}setData(t,e){this._data=t,this._commonData=e}draw(t,e,i,s,n){var a;if(!this._data.visible)return;const{bitmapSize:h,verticalPixelRatio:u}=e,d=null!==(a=this._commonData.fixedCoordinate)&&void 0!==a?a:this._commonData.coordinate;t.lineWidth=Math.max(1,Math.floor((0,r.ensureDefined)(this._data.linewidth)*u)),t.lineCap="butt",(0,l.setLineStyle)(t,void 0===this._data.linestyle?o.LINESTYLE_DOTTED:this._data.linestyle),t.strokeStyle=this._commonData.textColor,(0,l.drawHorizontalLine)(t,Math.round(d*u),0,h.width)}topBottomTotalHeight(t){return{top:0,bottom:0,total:0}}}class a extends s.PriceAxisView{constructor(t){super(t||n)}ignoreAlignment(){return!0}_updateRendererData(t,e,i){if(e.visible=!1,t.visible=!1,!this._isVisible())return;const s=this._value();s.noData||(i.background="",i.textColor=this._priceLineColor(s.color),i.coordinate=s.coordinate,i.floatCoordinate=s.floatCoordinate,t.linewidth=this._lineWidth(),t.linestyle=this._lineStyle(),t.backgroundAreaVisible=this._backgroundAreaVisible(),t.backgroundAreaColor=this._backgroundAreaColor(),t.backgroundAreaHeight=this._backgroundAreaHeight(),t.visible=!0)}_lineStyle(){return o.LINESTYLE_DOTTED}_backgroundAreaVisible(){return!1}_backgroundAreaColor(){return""}_backgroundAreaHeight(){return 0}}class h extends a{constructor(t){super(),this._series=t}_value(){return this._series.lastValueData(void 0,!0)}_priceLineColor(t){return this._series.priceLineColor(t)}_lineWidth(){return this._series.properties().childs().priceLineWidth.value()}_isVisible(){const t=this._series.model().properties().childs().scalesProperties.childs().showSeriesLastValue.value();return this._series.properties().childs().showPriceLine.value()&&t}}class u extends a{constructor(t,e){super(),this._study=t,this._plotname=e}_value(){
return this._study.lastValueData(this._plotname,!0)}_lineWidth(){return this._study.properties().childs().styles.childs()[this._plotname].childs().linewidth.value()}_lineStyle(){return o.LINESTYLE_DOTTED}_priceLineColor(t){return t}_isVisible(){const t=this._study.model().properties().childs().scalesProperties.childs().showStudyLastValue.value(),e=this._study.isPlotVisibleAt(this._plotname,1);return this._study.properties().childs().styles.childs()[this._plotname].childs().trackPrice.value()&&t&&e}}},449524:(t,e,i)=>{i.d(e,{PaneRendererBars:()=>o});var s=i(286436),r=i(161160);class o extends r.PaneRendererSeriesBase{constructor(t){super(),this._bars=t.bars,this._dontDrawOpen=t.dontDrawOpen,this._thinBars=t.thinBars}_drawImpl(t){const{context:e,horizontalPixelRatio:i,verticalPixelRatio:s}=t;e.save();let r=null;for(const t of this._bars){let o=this._calcRealBarWidth(t.right-t.left,i);if(o>=2){Math.max(1,Math.floor(i))%2!=o%2&&o--}const l=this._thinBars?Math.min(o,Math.floor(i)):o,n=l<=o&&t.right-t.left>=Math.floor(1.5*i);r!==t.color&&(e.fillStyle=t.color,r=t.color);const a=Math.floor(.5*l),h=Math.round(t.center*i),u=h-a,d=l,c=u+d-1,_=Math.min(t.high,t.low),f=Math.max(t.high,t.low),p=Math.round(_*s)-a,y=Math.round(f*s)+a,v=Math.max(y-p,l);e.fillRect(u,p,d,v);const m=Math.ceil(1.5*o);if(n){const i=h-m,r=h+m,o=Math.min(u-i,r-c);if(!this._dontDrawOpen){let r=Math.max(p,Math.round(t.open*s)-a),l=r+d-1;l>p+v-1&&(l=p+v-1,r=l-d+1),e.fillRect(i,r,o,l-r+1)}let l=Math.max(p,Math.round(t.close*s)-a),n=l+d-1;n>p+v-1&&(n=p+v-1,l=n-d+1),e.fillRect(c+1,l,o,n-l+1)}}e.restore()}_getTolerance(){return(0,s.interactionTolerance)().series}_calcRealBarWidth(t,e){const i=Math.floor(e);return Math.max(i,Math.floor((0,s.optimalBarWidth)(t,e)))}}},161160:(t,e,i)=>{i.d(e,{PaneRendererSeriesBase:()=>o});var s=i(509078),r=i(961970);class o extends r.BitmapCoordinatesPaneRenderer{constructor(){super(...arguments),this._bars=[]}hitTest(t){const e=this._bars;if(0===e.length)return null;const i=this._getTolerance(),s=e[0],r=e[e.length-1];if(t.x<s.left-i)return null;if(t.x>r.right+i)return null;let o=0,l=e.length-1,n=-1;for(;o<=l;){const i=Math.floor((o+l)/2),s=e[i];if(t.x>=s.left&&t.x<=s.right){n=i;break}t.x>s.right?o=i+1:l=i-1}if(-1===n)return null;if(this._isPointAtBar(e[n],t.y,i))return this._getHitTest();let a=n;for(;a>=1&&t.x-e[a-1].right<i;)a--;let h=n;for(;h<=e.length-2&&e[h+1].left-t.x<i;)h++;const u=Math.max(0,a),d=Math.min(e.length-1,h);for(let s=u;s<=d;s++)if(s!==n&&this._isPointAtBar(e[s],t.y,i))return this._getHitTest();return null}_getHitTest(){return new s.HitTestResult(s.HitTarget.Regular)}_isPointAtBar(t,e,i){const s=Math.min(t.high,t.low),r=Math.max(t.high,t.low);return s-i<=e&&e<=r+i}}},559327:(t,e,i)=>{i.d(e,{PaneRendererCandles:()=>h});var s=i(650151),r=i(509078),o=i(665798),l=i(286436),n=i(161160);function a(t,e,i,s){const r=Math.floor(e);return t.map((t=>{let o=(0,l.optimalCandlestickWidth)((t.right-t.left)*s,e);o>=2&&r%2!=o%2&&o--;const n=Math.floor(.5*o),a=function(t,e){let i=Math.floor(1*e);t<=2*i&&(i=Math.floor(.5*(t-1)))
;const s=Math.max(Math.floor(e),i);if(t<=2*s)return Math.max(Math.floor(e),Math.floor(1*e));return s}(o,e),h=Math.round(t.center*e),u=h-n,d=u+o-1,c=Math.abs(Math.max(t.open,t.close)-Math.min(t.open,t.close))*i,_=Math.round(Math.min(t.open,t.close)*i),f=Math.round(Math.max(t.open,t.close)*i);let p=Math.min(Math.floor(e),Math.floor(o*e));p=Math.max(Math.floor(e),Math.min(p,o));const y=Math.floor(.5*p);return{rawBodyHeight:c,top:_,bottom:f,center:h,left:u,right:d,candleWidth:o,high:Math.round(t.high*i),low:Math.round(t.low*i),wickWidth:p,wickOffset:y,borderWidth:a}}))}class h extends n.PaneRendererSeriesBase{constructor(t){super(),this._scaleCoeff=1,this._borderVisible=!1,this._wickVisible=!1,this._bodyVisible=!0,this._borderColor=void 0,this._wickColor=void 0,this._hittest=void 0,this._isPriceScaleInverted=!1,t&&this.setData(t)}setData(t){var e;this._bars=t.bars,this._scaleCoeff=null!==(e=t.scaleCoeff)&&void 0!==e?e:1,this._borderVisible=t.borderVisible,this._bodyVisible=t.bodyVisible,this._wickVisible=t.wickVisible,this._borderColor=t.borderColor,this._wickColor=t.wickColor,this._hittest=t.hittest,this._isPriceScaleInverted=t.isPriceScaleInverted}hitTest(t){return this._wickVisible||this._borderVisible||this._bodyVisible?super.hitTest(t):null}_drawImpl(t){const{context:e,horizontalPixelRatio:i,verticalPixelRatio:s}=t;if(0===this._bars.length)return;const r=a(this._bars,i,s,this._scaleCoeff);this._wickVisible&&this._drawWicks(e,r),this._borderVisible&&this._drawBorder(e,r),this._bodyVisible&&this._drawCandles(e,r)}_getTolerance(){return(0,l.interactionTolerance)().series}_getHitTest(){return this._hittest||new r.HitTestResult(r.HitTarget.Regular)}_isPointAtBar(t,e,i){const s=this._bodyVisible||this._borderVisible,r=this._wickVisible;if(!s&&!r)return!1;if(s){const s=r?Math.min(t.high,t.low):Math.min(t.open,t.close),o=r?Math.max(t.high,t.low):Math.max(t.open,t.close);return s-i<=e&&e<=o+i}{const s=Math.min(t.open,t.close),r=Math.max(t.open,t.close);return t.high-i<=e&&e<=s+i||r-i<=e&&e<=t.low+i}}_drawWicks(t,e){let i="",r=null;this._bars.forEach(((o,l)=>{const n=o.wickColor?o.wickColor:(0,s.ensureDefined)(this._wickColor);n!==i&&(t.fillStyle=n,i=n);let{top:a,bottom:h}=e[l];const{rawBodyHeight:u,borderWidth:d,center:c,high:_,low:f,wickWidth:p,wickOffset:y}=e[l];this._isPriceScaleInverted&&([h,a]=[a,h]);let v=c-y;const m=v+p-1;null!==r&&(v=Math.max(r+1,v),v=Math.min(v,m));const g=m-v+1;u<=d&&(a!==_&&(a=Math.round(a-.5*d)),h=h!==f?Math.round(a-.5*d)+d-1:f-1),a!==_&&t.fillRect(v,_,g,a-_),f-h-1&&t.fillRect(v,h+1,g,f-h-1),r=m}))}_drawBorder(t,e){let i="",r=null;this._bars.forEach(((l,n)=>{if(l.borderColor!==i&&(t.fillStyle=l.borderColor?l.borderColor:(0,s.ensureDefined)(this._borderColor),i=l.borderColor),this._bodyVisible&&l.hollow)return;let{left:a}=e[n];const{rawBodyHeight:h,top:u,bottom:d,right:c,borderWidth:_}=e[n];null!==r&&(a=Math.max(r+1,a),a=Math.min(a,c));const f=c-a+1;h<=_?t.fillRect(a,Math.round(u-.5*_),f,_):f>2*_?(0,o.fillRectInnerBorder)(t,a,u,c-a+1,d-u+1,_):t.fillRect(a,u,f,d-u+1),r=c}))}_drawCandles(t,e){
let i="";this._bars.forEach(((s,r)=>{let{top:l,bottom:n,left:a,right:h}=e[r];const{rawBodyHeight:u,borderWidth:d,candleWidth:c}=e[r];if(!(this._borderVisible&&c<=2*d)||s.hollow){if(s.color!==i){const e=s.color;t.fillStyle=e,i=e}if(s.hollow)t.fillStyle=s.color,u<=d?t.fillRect(a,Math.round(l-.5*d),c,d):(0,o.fillRectInnerBorder)(t,a,l,h-a+1,n-l+1,d);else{if(!this._borderVisible&&u<=d)return void t.fillRect(a,Math.round(l-.5*d),c,d);if(this._borderVisible&&(a+=d,l+=d,h-=d,n-=d),l>n)return;t.fillRect(a,l,h-a+1,n-l+1)}}}))}}},156863:(t,e,i)=>{i.d(e,{HHistBasedValuesProvider:()=>p});var s=i(150335),r=i(650151),o=i(638456),l=i(518439),n=i(419283),a=i(627183),h=i(307801),u=i(627620),d=i(581899);function c(t,e="",i=""){return{id:e,index:t,title:i,value:"",visible:!1}}const _=o.CheckMobile.any(),f=(0,a.getVolumeFormatter)();class p{constructor(t,e,i=!1){this._emptyValues=[],this._study=t,this._model=e,this._emptyTitles=i,void 0!==this._study.metaInfo().graphics.hhists&&this._emptyValues.push(c(0),c(1),c(2))}getItems(){return this._emptyValues}getValues(t){var e,i;const o=this._emptyValues.map((t=>({...t})));o.forEach((t=>{t.visible=this._study.isVisible(),t.value=d.notAvailable}));const n=this._study.properties().childs().inputs.childs().volume.value();switch(n){case h.HHistVolumeMode.UpDown:this._emptyTitles||(o[0].title="Up",o[1].title="Down",o[2].title="Total");break;case h.HHistVolumeMode.Total:this._emptyTitles||(o[0].title="Total"),o[1].visible=!1,o[2].visible=!1;break;case h.HHistVolumeMode.Delta:this._emptyTitles||(o[0].title="Delta",o[1].title="Max(Up, Down)",o[2].title="Total")}const a=this._study.priceScale(),u=this._model.timeScale();if(null===a||a.isEmpty()||u.isEmpty()||this._hideValues())return o;if(null===t||!isFinite(t)){const e=this._study.data().last();if(null===e)return o;t=e.index}const c=this._model.crossHairSource(),_=c.price;if(!isFinite(c.y)&&(t=function(t,e){var i;const s=null===(i=t.visibleBarsStrictRange())||void 0===i?void 0:i.lastBar();if(!s)return null;const r=e.data().search(s,l.PlotRowSearchMode.NearestLeft);return r?r.index:null}(this._model.timeScale(),this._model.mainSeries()),null===t))return o;const p=function(t,e,i,s){if(0===t.size)return null;if(!i){const t=(0,r.ensureNotNull)(s.data().valueAt(e));i=s.barFunction()(t)}const o=function(t,e){let i=null;return t.forEach(((t,s)=>{s<=e&&(null===i||s>i)&&(i=s)})),i}(t,e);if(null===o)return null;const l=t.get(o);if(!l||0===l.size)return null;return function(t,e){let i=null;return t.forEach((t=>{t.priceLow<=e&&e<t.priceHigh&&(i=t)})),i}(l,i)}(this._study.graphics().hhistsByTimePointIndex(),t,_,this._model.mainSeries());if(null===p)return o.forEach((t=>{t.value="0"})),o;const y=this._study.metaInfo().graphics.hhists;if(void 0===y)return o;if(void 0===y[p.styleId])return o;const v=null===(i=null===(e=this._study.properties().childs().graphics.childs().hhists)||void 0===e?void 0:e.childs()[p.styleId])||void 0===i?void 0:i.childs(),m=t=>(0,s.isNumber)(t)?f.format(t):"";if(n!==h.HHistVolumeMode.Delta){if(p.rate.forEach(((t,e)=>{o[e].value=m(t),
o[e].color=(0,r.ensureDefined)(v).colors[e].value()})),n===h.HHistVolumeMode.UpDown){const t=p.rate[0]+p.rate[1];o[2].value=m(t),o[2].color=(0,r.ensureDefined)(v).valuesColor.value()}}else{const t=p.rate[0]>p.rate[1]?0:1,e=(0,r.ensureDefined)(v).colors[t].value(),i=p.rate[0]+p.rate[1];[2*p.rate[t]-i,p.rate[t],i].forEach(((t,i)=>{o[i].value=m(t),o[i].color=e}))}return o}_hideValues(){return _&&(null===this._model.crossHairSource().pane||(0,u.isLineToolName)(n.tool.value())||null!==this._model.lineBeingEdited())}}},316980:(t,e,i)=>{i.d(e,{StudyDataWindowValuesProvider:()=>o});var s=i(911144),r=i(156863);class o{constructor(t,e){this._study=t,this._model=e,this._hhistBasedStudy=void 0!==t.metaInfo().graphics.hhists,this._valuesProvider=this._createValuesProvider(t,e)}getItems(){return this._valuesProvider.getItems()}getValues(t){const e=this._valuesProvider.getValues(t),i=t=>!!this._hhistBasedStudy||this._study.isPlotVisibleAt(t,2);for(const t of e)t.visible=t.visible&&i(t.id);return e}_createValuesProvider(t,e){return this._hhistBasedStudy?new r.HHistBasedValuesProvider(t,e):new s.StudyValuesProvider(t,e)}}},843563:(t,e,i)=>{i.d(e,{StudyLegendValuesProvider:()=>o});var s=i(911144),r=i(156863);class o{constructor(t,e,i,s){this._study=t,this._model=e,this._showStudyValues=null!=s?s:e.properties().childs().paneProperties.childs().legendProperties.childs().showStudyValues,this._hhistBasedStudy=void 0!==t.metaInfo().graphics.hhists,this._valuesProvider=this._createValuesProvider(t,e,i)}getItems(){return this._valuesProvider.getItems()}getValues(t){const e=this._valuesProvider.getValues(t),i=this._study.properties(),s=this._showStudyValues.value()&&i.childs().showLegendValues.value(),r=t=>!!this._hhistBasedStudy||this._study.isPlotVisibleAt(t,8);for(const t of e)t.visible=t.visible&&s&&r(t.id);return e}_createValuesProvider(t,e,i){return this._hhistBasedStudy?new r.HHistBasedValuesProvider(t,e,i):new s.StudyValuesProvider(t,e,i)}}},911144:(t,e,i)=>{i.d(e,{StudyValuesProvider:()=>b});var s=i(150335),r=i(638456),o=i(432059),l=i(764829),n=i(518439),a=i(627620),h=i(419283),u=i(748947),d=i(962973),c=i(296842),_=i(498830),f=i(650151),p=i(581899),y=i(287741);const v=r.CheckMobile.any(),m=l.enabled("hide_last_na_study_output"),g=l.enabled("always_show_legend_values_on_mobile");class b{constructor(t,e,i){this._emptyValues=[],this._colorProviders=new Map,this._study=t,this._model=e,this._studyMetaInfo=this._study.metaInfo(),this._studyProperties=this._study.properties().childs(),this._isFundamental=(0,c.isFundamentalStudyMetaInfo)(this._studyMetaInfo);const s=this._studyMetaInfo.plots;s&&s.forEach(((t,e)=>{if((0,u.isPlotWithTechnicalValues)(t))return;const s=t.id;this._emptyValues.push(function(t,e="",i=""){return{id:e,index:t,title:i,value:"",visible:!1}}(e,s,i?"":this._study.guiPlotName(y.TitleDisplayTarget.StatusLine,s)));const r=(0,u.isOhlcPlot)(t)?t.target:s;this._colorProviders.set(r,(0,d.createStudyPlotColorProvider)(this._studyMetaInfo,this._study.properties(),r))}))}getItems(){return this._emptyValues}getPlotColor(t,e){var i
;const r=e[t+1];if(!(0,s.isNumber)(r))return"";const o=r>0;let l;const n=this._studyMetaInfo.plots[t];let a=n.id;const h=this._studyProperties;if((0,u.isOhlcPlot)(n))a=n.target||a,l=(0,f.ensureDefined)(h.ohlcPlots.childs()[a].childs().color).value();else if((0,u.isArrowsPlot)(n)){const t=(0,f.ensureDefined)(h.styles.childs()[a]);l=o?t.childs().colorup.value():t.childs().colordown.value()}else l=(0,f.ensureDefined)(null===(i=h.styles.childs()[a])||void 0===i?void 0:i.child("color")).value();let d=l;const c=this._colorProviders.get(a),_=c&&c.getPlotPointStyle(e);return _&&((0,u.isArrowsPlot)(n)?(o&&void 0!==_.colors[5]&&(d=_.colors[5]),o||void 0===_.colors[6]||(d=_.colors[6])):void 0!==_.colors[0]&&(d=_.colors[0])),"transparent"===d&&(d=l),d}getValues(t){var e,i;const r=this._emptyValues.map((t=>({...t})));let l=null;const a=this._study.data().lastIndex(),h=this._studyProperties;if(null!==a)for(const t of r){if(0===(null===(e=h.styles.childs()[t.id])||void 0===e?void 0:e.childs().display.value()))continue;const i=this._study.nearestIndex(a,n.PlotRowSearchMode.NearestLeft,t.index+1);if(void 0===i)continue;const s=i+this._study.offset(t.id);l=null!==l?Math.max(s,l):s}(null===t||null!==l&&t>l)&&(t=l);const d=this._hideValues(),c=this._study.isVisible()&&!d?p.notAvailable:"";for(const t of r)t.value=c;if(d)return r;m&&r.length&&(r[r.length-1].value="");const y=this._study.priceScale();if(!this._study.isVisible()||null===t||null===y||y.isEmpty()||this._model.timeScale().isEmpty())return r;const v={};for(const e of r){const r=e.id,l=(0,_.getPriceValueFormatterForStudy)(this._study,r),d=(0,f.ensureDefined)(h.styles.childs()[r]),c=d.childs().display.value();if(e.visible=0!==c,!e.visible)continue;const p=d.hasChild("plottype")?null===(i=d.child("plottype"))||void 0===i?void 0:i.value():null,y=this._isFundamental&&(p===u.LineStudyPlotStyle.StepLine||p===u.LineStudyPlotStyle.StepLineWithDiamonds),m=e.index,g=t-this._study.offset(r),b=y||null!==a&&g>a?n.PlotRowSearchMode.NearestLeft:n.PlotRowSearchMode.Exact,S=this._study.nearestIndex(g,b);if(void 0===S)continue;let w=v[r];if(void 0===w&&(w=this._study.getMinFirstBarIndexForPlot(r),Number.isFinite(w)&&(v[r]=w)),w>S)continue;const P=this._study.data().last(),x=this._study.data().valueAt(S)||(null!==P?P.value:null);if(null===x)continue;const M=x[m+1];(0,s.isNumber)(M)&&(e.value=l(M),e.color=(0,o.resetTransparency)(this.getPlotColor(m,x)))}return r}_hideValues(){return g?(0,a.isLineToolName)(h.tool.value())||null!==this._model.lineBeingEdited():v&&(null===this._model.crossHairSource().pane||(0,a.isLineToolName)(h.tool.value())||null!==this._model.lineBeingEdited())}}},872050:(t,e,i)=>{i.d(e,{tpoThemedColors:()=>d});var s=i(960095),r=i(432059);const o=(0,s.getHexColorByName)("color-cold-gray-900"),l=(0,s.getHexColorByName)("color-cold-gray-200"),n=(0,s.getHexColorByName)("color-deep-blue-a700"),a=(0,s.getHexColorByName)("color-deep-blue-a200"),h=(0,s.getHexColorByName)("color-grapes-purple-a200"),u=(0,r.generateColor)(h,85),d={poc:[o,l],poorHigh:[n,a],poorLow:[n,a],singleprints:[u,u],
vah:[o,l],val:[o,l]}},924166:(t,e,i)=>{i.d(e,{EXCLUDED_FOR_ALERT_ID_INPUTS:()=>f,collectDepsForAlert:()=>v,plotsForAlert:()=>y});var s=i(484156),r=i(650151),o=i(218049),l=i(338619),n=i(675647),a=i(637761),h=i(732634),u=i(748947);const d=(0,l.getLogger)("Chart.Study");function c(t,e,i){void 0!==i&&i.forEach((i=>{const s=t[i];"string"==typeof s?t[i]=_(s,e):(0,o.isExtendedInput)(s)&&(0,o.isExtendedInputSource)(s)?s.v=_((0,o.getInputValue)(s),e):d.logError(`Cannot patch source input, its type is not source: ${JSON.stringify(s)}`)}))}function _(t,e){const[i,s]=t.split("$"),r=e.get(i);return r?r+(void 0===s?"":"$"+s):t}const f=["text","pineFeatures"];function p(t){return(0,s.default)(t,f)}function y(t,e){const i=[u.isLinePlot,u.isShapesPlot,u.isCharsPlot,u.isArrowsPlot,u.isOhlcPlot,u.isAlertConditionPlot];return t.plots.map(((t,e)=>({...t,pinePlotIndex:e}))).filter((t=>i.some((e=>e(t))))).map((i=>{const s={id:i.id,type:i.type,pinePlotIndex:i.pinePlotIndex,offset:e(i.id)};if(t.styles&&void 0!==t.styles[i.id]){const e=(0,r.ensureDefined)((0,r.ensureDefined)(t.styles)[i.id]);s.title=e.title||"",s.text=e.text||""}return(0,u.isOhlcPlot)(i)&&i.target&&t.ohlcPlots&&t.ohlcPlots[i.target]&&(s.ohlcTitle=(0,r.ensureDefined)((0,r.ensureDefined)(t.ohlcPlots)[i.target]).title),s}))}function v(t,e){const i=[],s=new Map;let o;for(let r=t.length-1;r>=0;r--){const l=t[r],u=(0,n.extractStudyId)(l.metaInfo().id),d=a.StudyMetaInfo.getStudyIdWithLatestVersion(l.metaInfo());o=l.inputsForAlertState();c(o,s,l.metaInfo().inputs.filter((t=>"source"===t.type)).map((t=>t.id)));const _=l.metaInfo().isTVScript?p(o):o,f=(0,h.getStudyIdForAlert)(u,_,e);i.push({id:f,study:d,inputs:o}),s.set(l.id(),f)}const l=i.reverse();return{idForAlert:(0,r.ensureDefined)(l[0].id),inputsForAlert:(0,r.ensureDefined)(o),studyDependencies:l}}},151848:(t,e,i)=>{i.d(e,{translatedIntervalString:()=>r});var s=i(395394);function r(t){const e=(0,s.getTranslatedResolutionModel)(t,!0);return null===e?t:e.multiplier+(e.mayOmitShortKind?"":e.shortKind)}},154241:(t,e,i)=>{i.d(e,{createVisibilityController:()=>h});var s=i(444372),r=i(778785),o=i(998418),l=i(62802);const n="visibleOnMouseOver";function a(t){return"alwaysOn"===t||"alwaysOff"===t?t:n}function h(t,e){let h,u;function d(){if(!h){h=(0,o.createPrimitiveProperty)();let i=l.getValue(t);void 0===i&&void 0!==e&&(i=l.getValue(e)),h.setValue(a(i)),h.subscribe(h,(e=>{l.setValue(t,a(e.value()))}))}return h}return{property:d,availableValues:function(){return[{id:"visibleOnMouseOver",value:"visibleOnMouseOver",title:s.t(null,void 0,i(437967))},{id:"alwaysOn",value:"alwaysOn",title:s.t(null,void 0,i(336299))},{id:"alwaysOff",value:"alwaysOff",title:s.t(null,void 0,i(840452))}]},actualBehavior:function(){if(!u){u=(0,o.createPrimitiveProperty)();const t=d(),e=()=>{const e=function(t){switch(t){case"alwaysOn":return"alwaysOn";case"alwaysOff":return"alwaysOff";case"visibleOnMouseOver":return r.mobiletouch?"visibleOnTapSelection":"visibleOnMouseOver";default:throw new Error(`Unknown visibility type: ${t}`)}}(t.value());u&&u.setValue(e)}
;t.subscribe(u,e),e()}return u},restoreDefaultValue:function(){d().setValue(n),l.remove(t)}}}},732634:(t,e,i)=>{i.r(e),i.d(e,{getSeriesIdForAlert:()=>l,getStudyIdForAlert:()=>n});var s=i(923533),r=i(484593),o=i(378975);function l(t,e){return(0,s.hash)(t+o.Interval.normalize(e)).toString()}function n(t,e,i){return(0,s.hash)(t+(0,r.sortedStringify)(e)+(null!=i?i:"")).toString()}},19303:(t,e,i)=>{var s;i.d(e,{DataSourceDangerReason:()=>s}),function(t){t.Spread="spread",t.PineRepainting="pine-repainting",t.CryptoCap="cryptocap"}(s||(s={}))},474150:(t,e,i)=>{var s;function r(t,e){let i="Study"===t||t===s.StudyLineTool||/^study_\w+/.test(t);return e&&(i=i||"StudyStrategy"===t||"ReplayStudyStrategy"===t),i}i.r(e),i.d(e,{StateForAlertType:()=>s,isStudyStateForAlertType:()=>r}),function(t){t.MainSeries="MainSeries",t.Study="Study",t.StudyLineTool="StudyLineTool",t.StudyStrategy="StudyStrategy",t.ReplayStudyStrategy="ReplayStudyStrategy"}(s||(s={}))},230839:(t,e,i)=>{function s(t,e){for(const i of e.keys())t.add(i)}i.d(e,{addToSet:()=>s})},923533:(t,e,i)=>{function s(t){let e,i=0;if(0===t.length)return i;for(var s=0;s<t.length;s++)e=t.charCodeAt(s),i=(i<<5)-i+e,i&=i;return i}i.r(e),i.d(e,{hash:()=>s})}}]);
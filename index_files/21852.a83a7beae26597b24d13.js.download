"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[21852,47365],{675128:(e,t,o)=>{function r(e){let t=null;return()=>(null===t&&(t=e()),t)}o.d(t,{lazyValue:()=>r})},476047:(e,t,o)=>{o.d(t,{QuoteSessionSnapshoter:()=>h});var r=o(942634),i=o(622864),s=o(79342),l=o(307239),a=o(194001),n=o(176637);const c=new Map([["change","ch"],["last_price","lp"],["change_percent","chp"],["update_mode_seconds",null]]);new Map([["ch","change"],["lp","last_price"],["chp","change_percent"]]);class h{constructor(e){if(this._onSymbolData=new r.Delegate,this._incomplete=new Set,this._connected=!1,this._batcher=null,this._handler=e=>{switch(e.method){case"connected":this._connected||(this._connected=!0,this._handleConnected());break;case"quote_symbol_data":this._connected&&this._handleSymbolData(e.params[0]);break;case"quote_completed":this._connected&&this._handleCompleteData(e.params[0]);break;case"disconnected":this._connected&&(this._connected=!1,this._batcher=null)}},0===e.fields.length)throw new Error('Support for empty "fields" array is not implemented');const{provider:t=a.QuoteSession}=e;this._fields=new Set(e.fields),this._session=new t(window.ChartApiInstance,["snapshoter",e.name,(0,s.randomHash)()].filter(Boolean).join("_")),this._session.connect(this._handler)}getSnapshotSync(e,t){const o=h.cache.get(e);return o&&this._isSnapshotReady(o,t)?o:null}getSnapshotsForAllSync(e,t){return e.map((e=>this.getSnapshotSync(e,t)))}getSnapshot(e,t,o){var r;const s=null!==(r=null==o?void 0:o.signal)&&void 0!==r?r:null;return new Promise(((o,r)=>{if(s&&s.aborted)throw(0,i.createAbortError)();const l=()=>{this._onSymbolData.unsubscribe(this,a),r((0,i.createAbortError)())},a=(r=e)=>{if(r!==e)return!1;const i=h.cache.get(e);return!(!i||!this._isSnapshotReady(i,t))&&(this._onSymbolData.unsubscribe(this,a),null==s||s.removeEventListener("abort",l),o(i),!0)};if(!a()&&(null==s||s.addEventListener("abort",l,{once:!0}),this._onSymbolData.subscribe(this,a),!this._incomplete.has(e))){if(this._incomplete.add(e),!this._connected)return;if(null===this._batcher){const t=this._batcher={symbols:new Set([e]),promise:Promise.resolve().then((()=>{this._batcher===t&&(this._session.quoteAddSymbols([...t.symbols]),this._batcher=null)}))}}else this._batcher.symbols.add(e)}}))}getSnapshotsForAll(e,t,o){return Promise.all(e.map((e=>this.getSnapshot(e,t,o))))}static relax(e){return e}static isSuccess(e){return"error"!==e.status}static hasAllFields(e,t){for(const o of Array.from(t))if(!e.hasOwnProperty(o))return!1;return!0}_isSnapshotReady(e,t){return"error"===e.status||this._hasAllFields(e,t)}_hasAllFields(e,t){return h.hasAllFields(e.values,Array.from(t))}_handleConnected(){if(this._fields.size>0){const e=[...this._fields].flatMap((e=>{const t=c.get(e);return null!==t?null!=t?t:e:[]}));this._session.quoteSetFields(e)}this._incomplete.size>0&&this._session.quoteAddSymbols([...this._incomplete])}_handleCompleteData(e){var t;const o=null!==(t=h.cache.get(e))&&void 0!==t?t:{symbolname:e,status:"ok",values:{}}
;h.cache.update(o,this._fields,!0),this._session.quoteRemoveSymbols([e]),this._incomplete.delete(e),this._onSymbolData.fire(e)}_handleSymbolData(e){(0,l.normalizeUpdateMode)(e.values);const t=e.symbolname;h.cache.update(e,this._fields,!1),"error"===e.status?this._handleCompleteData(t):this._onSymbolData.fire(t)}}h.cache=n.QUOTE_FIELDS_CACHE},293269:(e,t,o)=>{o.d(t,{barFunctionByStyle:()=>i});var r=o(368628);function i(e,t){switch(e){case 12:return(0,r.barFunction)("low","low","close");case 2:case 18:case 20:case 14:case 15:case 3:case 10:case 13:return(0,r.barFunction)(null!=t?t:"close");default:return(0,r.barFunction)("close","open")}}},35403:(e,t,o)=>{o.d(t,{getDataVendorString:()=>i});var r=o(764829);function i(e){return null==e||r.enabled("bovespa_widget")?null:"QUANDL"===e.exchange?"Quandl.com":["BMFBOVESPA","BME","NAG","TSE","TFX","NZX","BCBA","TWSE","TASE","EURONEXT","TOCOM","BMV","SIX","SGX","GPW","SWB","BCS","WB","SZSE","BELEX","BAHRAIN","EGX","TADAWUL","BVL","LUXSE","DFM","BVC","NSENG","IDX","HSI","QSE","OSE"].includes(e.exchange)?"ICE Data Services":null}},546608:(e,t,o)=>{o.d(t,{alwaysShowLastPriceAndLastDayChange:()=>r,lastDayChangeAvailable:()=>i});o(764829);const r=!1,i=!0},613438:(e,t,o)=>{o.d(t,{fromIndexedTo100:()=>c,fromLog:()=>_,fromPercent:()=>l,getCurrentModePriceText:()=>C,getOppositeModePriceText:()=>v,logFormulaForBase:()=>p,logFormulasAreSame:()=>b,toIndexedTo100:()=>h,toIndexedTo100Range:()=>d,toLog:()=>u,toPercent:()=>a,toPercentRange:()=>n});var r=o(704670),i=o(750139);const s={logicalOffset:4,coordOffset:1e-4};function l(e,t){return t<0&&(e=-e),e/100*t+t}function a(e,t){const o=100*(e-t)/(t||1);return t<0?-o:o}function n(e,t){const o=a(e.minValue(),t),i=a(e.maxValue(),t);return new r.PriceRange(o,i)}function c(e,t){return t<0&&(e=-e),(e-=100)/100*t+t}function h(e,t){const o=100*(e-t)/t+100;return t<0?-o:o}function d(e,t){const o=h(e.minValue(),t),i=h(e.maxValue(),t);return new r.PriceRange(o,i)}function u(e,t){const o=Math.min(10**305-t.coordOffset,Math.abs(e));if(o<1e-25)return 0;const r=(0,i.log10)(o+t.coordOffset)+t.logicalOffset;return e<0?-r:r}function _(e,t){const o=Math.abs(e);if(o<1e-15)return 0;const r=Math.pow(10,Math.min(o-t.logicalOffset,305))-t.coordOffset;return e<0?-r:r}function p(e){if(null===e)return s;const t=1/e;if(t>=s.coordOffset||t<1e-15)return s;const o=Math.abs(Math.log10(e));return{logicalOffset:o,coordOffset:1/Math.pow(10,o)}}function b(e,t){return e.logicalOffset===t.logicalOffset&&e.coordOffset===t.coordOffset}function C(e,t){return e.isPercentage()?t.formattedPricePercentage:e.isIndexedTo100()?t.formattedPriceIndexedTo100:t.formattedPriceAbsolute}function v(e,t){return e.isPercentage()||e.isIndexedTo100()?t.formattedPriceAbsolute:t.formattedPricePercentage}},463246:(e,t,o)=>{o.r(t),o.d(t,{QuotesProvider:()=>l});var r=o(625545),i=o(942634),s=o(79342);class l{constructor(e="full",t){var o;this._quotes=null,this._quoteSessionSymbol=null,this._quoteSessionClientId="",this._pausedQuoteSessionSymbol=null,this._quotesUpdate=new i.Delegate,
this._quoteSymbolChanged=new i.Delegate,this._multiplexerType=e,this._hibernated=t,null===(o=this._hibernated)||void 0===o||o.subscribe((e=>{e?this.pause():this.resume()}))}setQuotesSessionSymbol(e){this._quoteSessionSymbol!==e&&(this._pausedQuoteSessionSymbol=null,this._quoteSessionClientId||(this._quoteSessionClientId="series-"+(0,s.guid)()),this._unsubscribeQuoteSession(),this._quoteSessionSymbol=e,this._quoteSymbolChanged.fire(),e&&this._subscribeQuoteSession(e))}symbol(){return this._quoteSessionSymbol}quotesUpdate(){return this._quotesUpdate}quoteSymbolChanged(){return this._quoteSymbolChanged}quotes(){return this._quotes}async quotesSnapshot(e){return(0,r.getQuoteSessionInstance)("simple").snapshot(e)}isPaused(){return null!==this._pausedQuoteSessionSymbol}pause(){null===this._pausedQuoteSessionSymbol&&(this._pausedQuoteSessionSymbol=this._quoteSessionSymbol,this._unsubscribeQuoteSession())}resume(){null!==this._pausedQuoteSessionSymbol&&(this._subscribeQuoteSession(this._pausedQuoteSessionSymbol),this._pausedQuoteSessionSymbol=null)}destroy(){var e;this._unsubscribeQuoteSession(),null===(e=this._hibernated)||void 0===e||e.release()}_onUpdate(e,t){this._quotes=e&&e.values||null,t&&t.values&&this._quotesUpdate.fire(e,t)}_subscribeQuoteSession(e){this._quoteSessionSymbol=e,(0,r.getQuoteSessionInstance)(this._multiplexerType).subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,this._onUpdate.bind(this))}_unsubscribeQuoteSession(){this._quoteSessionSymbol&&((0,r.getQuoteSessionInstance)(this._multiplexerType).unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=null,this._quotes=null)}}},269734:(e,t,o)=>{o.d(t,{SeriesBarColorer:()=>p});var r=o(960095),i=o(650151),s=o(725356),l=o(518439),a=o(200441);const n=(0,r.getHexColorByName)("color-minty-green-500"),c=(0,r.getHexColorByName)("color-ripe-red-500");function h(e){return{barColor:e.upColor.value(),barBorderColor:e.borderUpColor?e.borderUpColor.value():e.borderColor.value()}}function d(e){return{barColor:e.downColor.value(),barBorderColor:e.borderDownColor?e.borderDownColor.value():e.borderColor.value()}}function u(e,t){return e.borderUpColorProjection&&e.borderUpColor?{barColor:t?e.upColorProjection.value():e.upColor.value(),barBorderColor:t?e.borderUpColorProjection.value():e.borderUpColor.value()}:{barColor:t?e.upColorProjection.value():e.upColor.value()}}function _(e,t){return e.borderDownColorProjection&&e.borderDownColor?{barColor:t?e.downColorProjection.value():e.downColor.value(),barBorderColor:t?e.borderDownColorProjection.value():e.borderDownColor.value()}:{barColor:t?e.downColorProjection.value():e.downColor.value()}}class p extends a.AbstractBarColorer{constructor(e){super(),this._series=e}applyBarStyle(e,t,o,r){const i=o;i.barColor=void 0,i.barBorderColor=void 0,i.barWickColor=void 0,i.isBarHollow=void 0,i.isBarUp=void 0,i.upColor=void 0,i.downColor=void 0,i.isTwoColorBar=void 0,i.isMergedBar=void 0;const s=this._series.properties();switch(s.childs().style.value()){case 2:case 18:case 14:case 15:
this._applyLineStyle(o,s);break;case 3:this._applyAreaStyle(o,s);break;case 16:this._applyHLCAreaStyle(e,t,o,r,s);break;case 0:this._applyBarStyle(e,o,r,s);break;case 17:case 1:case 19:this._applyCandleStyle(e,o,r,s);break;case 9:this._applyHollowCandleStyle(e,o,r,s);break;case 8:this._applyHAStyle(e,t,o,r,s);break;case 10:this._applyBaseLineStyle(e,t,o,r,s);break;case 12:this._applyHiLoStyle(t,o,s);break;case 13:this._applyColumnStyle(e,o,r,s);break;case 4:this._applyRenkoStyle(e,t,o,r,s);break;case 7:this._applyPBStyle(e,t,o,r,s);break;case 5:this._applyKagiStyle(e,t,o,r,s);break;case 6:this._applyPnfStyle(e,t,o,r,s);break;case 11:this._applyRangeStyle(e,t,o,r,s);break;case 20:this._applySVPStyle(e,o,r,s)}return o}static upColor(e,t){const o=e.childs(),r=o.style.value();switch(r){case 18:return{barColor:o.tpoStyle.childs().color.value()};case 20:return{barColor:o.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 2:return{barColor:o.lineStyle.childs().color.value()};case 14:return{barColor:o.lineWithMarkersStyle.childs().color.value()};case 15:return{barColor:o.steplineStyle.childs().color.value()};case 3:return{barColor:o.areaStyle.childs().linecolor.value()};case 16:return{barColor:o.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:n};case 0:return{barColor:o.barStyle.childs().upColor.value()};case 17:return h(o.volFootprintStyle.childs());case 19:return h(o.volCandlesStyle.childs());case 1:return h(o.candleStyle.childs());case 9:return h(o.hollowCandleStyle.childs());case 8:return h(o.haStyle.childs());case 10:return{barColor:o.baselineStyle.childs().topLineColor.value()};case 12:return{barColor:o.hiloStyle.childs().color.value(),barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:o.columnStyle.childs().upColor.value()};case 4:return u(o.renkoStyle.childs(),t);case 7:return u(o.pbStyle.childs(),t);case 5:return u(o.kagiStyle.childs(),t);case 6:return u(o.pnfStyle.childs(),t);case 11:0;const r=o.rangeStyle.childs(),i=r.barStyle.value()===s.RangeBarStyle.Bars;return{barColor:t?r.upColorProjection.value():i?r.upColor.value():r.candlesUpColor.value(),barBorderColor:t?r.upColorProjection.value():i?r.upColor.value():r.candlesBorderUpColor.value()}}(0,i.ensureNever)(r)}static downColor(e,t){const o=e.childs(),r=o.style.value();switch(r){case 2:return{barColor:o.lineStyle.childs().color.value()};case 18:return{barColor:o.tpoStyle.childs().color.value()};case 20:return{barColor:o.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 14:return{barColor:o.lineWithMarkersStyle.childs().color.value()};case 15:return{barColor:o.steplineStyle.childs().color.value()};case 3:return{barColor:o.areaStyle.childs().linecolor.value()};case 16:return{barColor:o.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:c};case 0:return{barColor:o.barStyle.childs().downColor.value()};case 17:return d(o.volFootprintStyle.childs());case 1:return d(o.candleStyle.childs());case 19:return d(o.volCandlesStyle.childs());case 9:
return d(o.hollowCandleStyle.childs());case 8:return d(o.haStyle.childs());case 10:return{barColor:o.baselineStyle.childs().bottomLineColor.value()};case 12:return{barColor:o.hiloStyle.childs().color.value(),barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:o.columnStyle.childs().downColor.value()};case 4:return _(o.renkoStyle.childs(),t);case 7:return _(o.pbStyle.childs(),t);case 5:return _(o.kagiStyle.childs(),t);case 6:return _(o.pnfStyle.childs(),t);case 11:0;const r=o.rangeStyle.childs(),i=r.barStyle.value()===s.RangeBarStyle.Bars;return{barColor:t?r.downColorProjection.value():i?r.downColor.value():r.candlesDownColor.value(),barBorderColor:t?r.downColorProjection.value():i?r.downColor.value():r.candlesBorderDownColor.value()}}(0,i.ensureNever)(r)}_applyLineStyle(e,t){e.barColor=p.upColor(t).barColor}_applyAreaStyle(e,t){e.barColor=p.upColor(t).barColor}_applyHLCAreaStyle(e,t,o,r,i){var s;const l=this._isUp(e,!1,r,(null===(s=this._series.data().first())||void 0===s?void 0:s.index)!==e)?p.upColor(i,t):p.downColor(i,t);o.barColor=l.barColor,o.barBorderColor=l.barBorderColor}_applyBarStyle(e,t,o,r){const i=this._isUp(e,!1,o,r.childs().barStyle.childs().barColorsOnPrevClose.value())?p.upColor(r):p.downColor(r);t.barColor=i.barColor,t.barBorderColor=i.barBorderColor}_applyCandleStyle(e,t,o,r){var i;const s=r.childs(),l=1===s.style.value()?s.candleStyle.childs():19===s.style.value()?s.volCandlesStyle.childs():s.volFootprintStyle.childs(),a=this._isUp(e,!1,o,l.barColorsOnPrevClose.value()&&(null===(i=this._series.data().first())||void 0===i?void 0:i.index)!==e),n=a?p.upColor(r):p.downColor(r);t.barColor=n.barColor,t.barBorderColor=n.barBorderColor,t.barWickColor=a?l.wickUpColor?l.wickUpColor.value():l.wickColor.value():l.wickDownColor?l.wickDownColor.value():l.wickColor.value()}_applyHollowCandleStyle(e,t,o,r){var i;const s=r.childs().hollowCandleStyle.childs(),l=this._isUp(e,!1,o,(null===(i=this._series.data().first())||void 0===i?void 0:i.index)!==e),a=l?p.upColor(r):p.downColor(r);t.barColor=a.barColor,t.barBorderColor=a.barBorderColor,t.barWickColor=l?s.wickUpColor?s.wickUpColor.value():s.wickColor.value():s.wickDownColor?s.wickDownColor.value():s.wickColor.value();const n=this._findBar(e,!1,o);t.isBarHollow=n[1]<=n[4]}_applyHAStyle(e,t,o,r,i){const s=i.childs().haStyle.childs(),l=this._isUp(e,t,r,s.barColorsOnPrevClose.value()),a=l?p.upColor(i):p.downColor(i);o.barColor=a.barColor,o.barBorderColor=a.barBorderColor,o.barWickColor=l?s.wickUpColor.value():s.wickDownColor.value()}_applyBaseLineStyle(e,t,o,r,s){const l=this._findBar(e,t,r),a=s.childs().baselineStyle.childs(),n=this._series.priceScale(),c=Math.round(n.height()*(Math.abs(100-a.baseLevelPercentage.value())/100)),h=(0,i.ensureNotNull)(this._series.firstValue()),d=n.coordinateToPrice(c,h);l[4]>d?o.barColor=p.upColor(s,t).barColor:o.barColor=p.downColor(s,t).barColor}_applyHiLoStyle(e,t,o){const r=p.upColor(o,e);t.barColor=r.barColor,t.barBorderColor=r.barBorderColor}_applyColumnStyle(e,t,o,r){
const i=r.childs().columnStyle.childs(),s=this._isUp(e,!1,o,i.barColorsOnPrevClose.value())?p.upColor(r):p.downColor(r);t.color=s.barColor,t.barColor=t.color}_applyRenkoStyle(e,t,o,r,i){const s=i.childs().renkoStyle.childs(),l=this._isUp(e,t,r,!1),a=l?p.upColor(i,t):p.downColor(i,t);o.barColor=a.barColor,o.barBorderColor=a.barBorderColor,o.barWickColor=l?s.wickUpColor.value():s.wickDownColor.value(),o.isBarUp=l}_applyPBStyle(e,t,o,r,i){const s=this._isUp(e,t,r,!1),l=s?p.upColor(i,t):p.downColor(i,t);o.barColor=l.barColor,o.barBorderColor=l.barBorderColor,o.isBarUp=s}_applyKagiStyle(e,t,o,r,i){let s;o.upColor=p.upColor(i,t).barColor,o.downColor=p.downColor(i,t).barColor;const l=this._findBar(e,t,r);l[3]<l[6]&&l[6]<l[2]?(s=l[1]<=l[4],o.isTwoColorBar=!0):(s=l[1]<=l[4]?l[1]===l[6]:l[1]!==l[6],o.isTwoColorBar=!1),o.barColor=s?o.upColor:o.downColor,o.isBarUp=l[1]<=l[4]}_applyPnfStyle(e,t,o,r,i){const s=this._findBar(e,t,r)[6],l=s>0,a=p.upColor(i,t),n=p.downColor(i,t);o.isBarUp=l,o.isMergedBar=2===Math.abs(s),o.upColor=a.barColor,o.downColor=n.barColor,o.barColor=l?a.barColor:n.barColor}_applyRangeStyle(e,t,o,r,i){const l=i.childs().rangeStyle.childs(),a=l.barStyle.value()===s.RangeBarStyle.Bars,n=this._isUp(e,!1,r,!1),c=n?p.upColor(i,t):p.downColor(i,t),h=n?t?l.upColorProjection.value():a?void 0:l.candlesWickUpColor.value():t?l.downColorProjection.value():a?void 0:l.candlesWickDownColor.value();o.barColor=c.barColor,o.barBorderColor=c.barBorderColor,o.wickColor=h,o.barWickColor=h}_applySVPStyle(e,t,o,r){const i=this._isUp(e,!1,o,!1)?p.upColor(r,!1):p.downColor(r,!1);t.barColor=i.barColor,t.barBorderColor=i.barBorderColor}_findBar(e,t,o){return o?o.value:this._getSeriesBars(t).valueAt(e)||[]}_findPrevBar(e,t,o){if(o&&o.previousValue)return o.previousValue;const r=this._series.bars().search(e-1,l.PlotRowSearchMode.NearestLeft,4);return null!==r?r.value:[]}_getSeriesBars(e){return e?this._series.nsBars():this._series.bars()}_isUp(e,t,o,r){const i=this._findBar(e,t,o);if(r){return this._findPrevBar(e,t,o)[4]<=i[4]}return i[1]<=i[4]}}},314218:(e,t,o)=>{o.d(t,{SeriesAreaPaneView:()=>n});var r=o(432059),i=o(403862),s=o(982949),l=o(112377),a=o(98069);class n extends a.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs().areaStyle.childs(),o=t.transparency.value(),a={simpleMode:!1,barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:t.linecolor.value(),lineStyle:t.linestyle.value(),lineWidth:t.linewidth.value(),isSeries:!0,withMarkers:!1,bottom:e.height(),color1:(0,r.generateColor)(t.color1.value(),o),color2:(0,r.generateColor)(t.color2.value(),o),skipHoles:!0},n=new s.CompositeRenderer;return n.append(new i.PaneRendererArea(a)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&n.append(new l.SelectionRenderer(this._selectionData)),n}}},309152:(e,t,o)=>{o.d(t,{SeriesBarsPaneView:()=>a})
;var r=o(982949),i=o(112377),s=o(841698),l=o(449524);class a extends s.SeriesBarCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.properties().childs(),t={bars:this._bars,dontDrawOpen:e.barStyle.childs().dontDrawOpen.value(),thinBars:11===e.style.value()?e.rangeStyle.childs().thinBars.value():e.barStyle.childs().thinBars.value()},o=new r.CompositeRenderer;return o.append(new l.PaneRendererBars(t)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&o.append(new i.SelectionRenderer(this._selectionData)),o}_createItem(e,t,o){const r={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:o.barColor,left:NaN,right:NaN,timePointIndex:e};return(0,s.baseBarCandlesUpdater)(t,r)?r:null}}},856122:(e,t,o)=>{o.d(t,{SeriesBaselinePaneView:()=>b});var r=o(432059),i=o(982949),s=o(86441),l=o(5531),a=o(204652),n=o(286436),c=o(828473),h=o(367637),d=o(509078);class u extends h.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null}setData(e){this._data=e}hitTest(e){if(null===this._data)return null;const{items:t,topLineWidth:o,bottomLineWidth:r}=this._data,i=(0,n.interactionTolerance)().series+(o+r)/4,l=(0,c.lowerbound)(t,e,((e,t)=>e.center<=t.x)),h=Math.max(1,l-1),u=Math.min(t.length-1,l+1);for(let o=h;o<=u;++o){const r=t[o-1],l=t[o],{distance:n}=(0,a.distanceToSegment)((0,s.point)(r.center,r.y),(0,s.point)(l.center,l.y),(0,s.point)(e.x,e.y));if(n<=i)return new d.HitTestResult(d.HitTarget.Regular)}return null}_drawImpl(e){if(null===this._data)return;const{items:t,baseLevelCoordinate:o,bottom:r,bottomFillColor1:i,bottomFillColor2:a,topFillColor1:c,topFillColor2:h,topLineColor:d,bottomLineColor:u,topLineWidth:_,bottomLineWidth:p}=this._data;if(!function(e){if(0===e.length)return!1;const t=e.findIndex((e=>(0,n.coordinateIsValid)(e.y)));if(-1===t)return!1;let o=e.length-1;for(;o>t&&!(0,n.coordinateIsValid)(e[o].y);)o--;return!(t>o)}(t))return;const b=e.context,{topItems:C,bottomItems:v}=function(e,t){const o=[],r=[];let i=null;for(let a=0;a<e.length;a++){let c=e[a];const h=e[a+1]||{};if((0,n.coordinateIsValid)(c.y))c.y<=t&&o.push(c),c.y>=t&&r.push(c),i=c;else{if(null===i)continue;c=i}if((0,n.coordinateIsValid)(h.y)&&(c.y>t&&h.y<t||c.y<t&&h.y>t))if(Math.abs(c.center-h.center)<1){const e={center:c.center,y:t};o.push(e),r.push(e)}else{const e=(0,l.intersectLineSegments)((0,s.point)(c.center,c.y),(0,s.point)(h.center,h.y),(0,s.point)(c.center,t),(0,s.point)(h.center,t));if(null!==e){const t={center:c.center+(h.center-c.center)*e,y:c.y+(h.y-c.y)*e};o.push(t),r.push(t)}}}return{topItems:o,bottomItems:r}}(t,o);b.lineCap="round",b.lineJoin="round",0!==C.length&&(b.beginPath(),b.moveTo(C[0].center,o),this._makeLine(b,C,!0,0),b.closePath(),b.fillStyle=this._makeLinearGradient(b,c,h,o-r,o),b.fill(),b.beginPath(),this._makeLine(b,C,!1,0),b.lineWidth=_,b.strokeStyle=d,b.stroke()),0!==v.length&&(b.beginPath(),b.moveTo(v[0].center,o),this._makeLine(b,v,!0,1),b.closePath(),b.fillStyle=this._makeLinearGradient(b,i,a,o,o+r),
b.fill(),b.beginPath(),this._makeLine(b,v,!1,1),b.lineWidth=p,b.strokeStyle=u,b.stroke())}_makeLine(e,t,o,r){if(null===this._data)return;const i=t.findIndex((e=>(0,n.coordinateIsValid)(e.y)));if(-1===i)return;const{barSpacing:s,baseLevelCoordinate:l}=this._data,a=.25*s;let c;const h=t.length;for(let s=i;s<h;s++){const h=t[s],d=t[s+1]||{};if((0,n.coordinateIsValid)(h.y)){if(0===r){if(c&&c.y>=l&&h.y>=l){e.moveTo(h.center,h.y);continue}}else if(c&&c.y<=l&&h.y<=l){e.moveTo(h.center,h.y);continue}if(c&&(0,n.coordinateIsValid)(c.y))e.lineTo(h.center,h.y),o&&!(0,n.coordinateIsValid)(d.y)&&e.lineTo(h.center,l);else if(d&&(0,n.coordinateIsValid)(d.y))o?(s!==i&&e.lineTo(h.center,l),e.lineTo(h.center,h.y)):e.moveTo(h.center,h.y);else if(o){if(0===s)continue;s!==i&&e.lineTo(h.center-a,l),e.lineTo(h.center-a,h.y),e.lineTo(h.center+a,h.y),e.lineTo(h.center+a,l)}else e.moveTo(h.center-a,h.y),e.lineTo(h.center+a,h.y);c=h}}}_makeLinearGradient(e,t,o,r,i){const s=e.createLinearGradient(0,r,0,i);return s.addColorStop(0,t),s.addColorStop(1,o),s}}var _=o(112377),p=o(98069);class b extends p.SeriesSingleLinePaneView{constructor(){super(...arguments),this._renderer=new u,this._topFillColor1="",this._topFillColor2="",this._bottomFillColor1="",this._bottomFillColor2="",this._topLineColor="",this._bottomLineColor="",this._topLineWidth=0,this._bottomLineWidth=0,this._barSpacing=0,this._bottom=0,this._baseLevelCoordinate=0}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData({items:this._items,topFillColor1:this._topFillColor1,topFillColor2:this._topFillColor2,bottomFillColor1:this._bottomFillColor1,bottomFillColor2:this._bottomFillColor2,topLineColor:this._topLineColor,bottomLineColor:this._bottomLineColor,topLineWidth:this._topLineWidth,bottomLineWidth:this._bottomLineWidth,barSpacing:this._barSpacing,baseLevelCoordinate:this._baseLevelCoordinate,bottom:this._bottom});const e=new i.CompositeRenderer;return e.append(this._renderer),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&e.append(new _.SelectionRenderer(this._selectionData)),e}_updateImpl(){super._updateImpl();const e=this._source.priceScale();if(!e)return;const t=this._source.properties().childs().baselineStyle.childs(),o=t.transparency.value();this._topFillColor1=(0,r.generateColor)(t.topFillColor1.value(),o),this._topFillColor2=(0,r.generateColor)(t.topFillColor2.value(),o),this._bottomFillColor1=(0,r.generateColor)(t.bottomFillColor1.value(),o),this._bottomFillColor2=(0,r.generateColor)(t.bottomFillColor2.value(),o),this._topLineColor=t.topLineColor.value(),this._bottomLineColor=t.bottomLineColor.value(),this._topLineWidth=t.topLineWidth.value(),this._bottomLineWidth=t.bottomLineWidth.value(),this._barSpacing=this._model.timeScale().barSpacing(),this._bottom=e.height(),this._baseLevelCoordinate=Math.round(this._bottom*(Math.abs(100-t.baseLevelPercentage.value())/100))}}},483275:(e,t,o)=>{o.d(t,{SeriesWaterlinePaneView:()=>a});var r=o(345159),i=o(86e3),s=o(509078),l=o(666574)
;class a extends r.HorizontalLinePaneView{constructor(e){super(),this._getters=e;const t={cursorType:i.PaneCursorType.VerticalResize,activeItem:0,areaName:s.AreaName.SourceItemMove};this._lineRenderer.setHitTest(new s.HitTestResult(s.HitTarget.MovePoint,t)),this._lineRendererData.visible=!0,this._lineRendererData.linestyle=l.LINESTYLE_SPARSE_DOTTED}_updateImpl(){const{baseLevelPercentage:e,paneHeight:t,color:o}=this._getters,r=Math.abs(100-e());this._lineRendererData.y=Math.round(t()*(r/100)),this._lineRendererData.color=o()}}},88854:(e,t,o)=>{o.d(t,{SeriesCandlesPaneView:()=>n});var r=o(982949),i=o(286436),s=o(112377),l=o(841698),a=o(559327);class n extends l.SeriesBarCandlesPaneView{constructor(e,t,o=1){super(e,t),this._scaleCoeff=1,this._scaleCoeff=o}renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs(),o=1===t.style.value()?t.candleStyle.childs():19===t.style.value()?t.volCandlesStyle.childs():t.volFootprintStyle.childs(),l=this._model.timeScale().barSpacing(),n={bars:this._bars,barSpacing:l,bodyVisible:o.drawBody.value(),borderVisible:o.drawBorder.value(),borderColor:o.borderColor.value(),wickColor:o.wickColor.value(),barWidth:(0,i.optimalBarWidth)(l),wickVisible:o.drawWick.value(),isPriceScaleInverted:e.isInverted(),scaleCoeff:this._scaleCoeff},c=new r.CompositeRenderer;return c.append(new a.PaneRendererCandles(n)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&c.append(new s.SelectionRenderer(this._selectionData)),c}_createItem(e,t,o){const r={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,left:NaN,right:NaN,timePointIndex:e,color:o.barColor,borderColor:o.barBorderColor,wickColor:o.barWickColor,hollow:o.isBarHollow};return(0,l.baseBarCandlesUpdater)(t,r)?r:null}}},315641:(e,t,o)=>{o.d(t,{SeriesColumnsPaneView:()=>_});var r=o(650151),i=o(86441),s=o(764829),l=o(203308),a=o(509078),n=o(982949),c=o(518439),h=o(836687),d=o(112377),u=o(559678);class _{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,s.enabled)("source_selection_markers"),this._selectionData=null,this._histogramBase=0,this._source=e,this._model=t,this._selectionIndexer=new h.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e={barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:"",histogramBase:this._histogramBase},t=new n.CompositeRenderer;return t.append(new u.PaneRendererColumns(e)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new d.SelectionRenderer(this._selectionData)),t}_updateImpl(){this._items=[];const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const o=e.visibleBarsStrictRange();if(null===o)return;if(0===this._source.bars().size())return
;const s=this._source.nearestIndex(o.firstBar(),c.PlotRowSearchMode.NearestRight),n=this._source.nearestIndex(o.lastBar(),c.PlotRowSearchMode.NearestLeft);if(void 0===s||void 0===n)return;const h=this._source.bars().range(s,n),d=this._source.barColorer(),u={},_=this._source.barFunction(),p=h.reduce(((e,t,r)=>{const i=_(r);if(!(0,l.default)(i))return e;u.value=r;let s=this._source.precomputedBarStyle(r);return void 0===s&&(s=d.barStyle(t,!1,u),this._source.setPrecomputedBarStyle(r,s)),this._items.push({timePointIndex:t,left:NaN,center:NaN,right:NaN,y:i,style:s}),u.previousValue=r,o.contains(t)&&null!=e?e:i}),null);if(null!==p)if(t.pointsArrayToCoordinates(this._items,p),e.fillBarBorders(this._items),this._histogramBase=t.isInverted()?0:t.height(),this._model.selection().isSelected(this._source)){const o=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:a.HitTarget.Regular};const s=(0,r.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=a.HitTarget.Regular;for(let r=0;r<o.length;r++){const l=o[r],a=this._source.bars().valueAt(l);if(null===a)continue;const n=_(a),c=e.indexToCoordinate(l),h=t.priceToCoordinate(n,p);this._selectionData.points.push(new i.Point(c,h)),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(h/s))}}else this._selectionIndexer.clear()}}},733828:(e,t,o)=>{o.d(t,{SeriesHiLoPaneView:()=>C});var r=o(448874),i=o(694852),s=o(828473),l=o(286436),a=o(509078),n=o(367637);class c extends n.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null,this._barWidth=null}setData(e){this._data=e,this._barWidth=Math.max(1,Math.round((0,l.optimalHiLoWidth)(e.barSpacing)))}hitTest(e){if(null===this._data||null===this._barWidth)return null;const t=this._data.bars,o=.5*this._data.barSpacing;if(0===t.length)return null;if(e.x<t[0].center-o)return null;if(e.x>t[t.length-1].center+o)return null;const r=t[(0,s.lowerbound)(t,e.x-o,((e,t)=>e.center<t))];if(e.x<r.center-o||e.x>r.center+o)return null;const i=(0,l.interactionTolerance)().series+this._barWidth/2,n=Math.min(r.high,r.low),c=Math.max(r.high,r.low),h=this._data.fontSize;return n-i-h<=e.y&&e.y<=n+i||c-i<=e.y&&e.y<=c+i+h?new a.HitTestResult(a.HitTarget.Regular):null}_drawImpl(e){if(null===this._data||null===this._barWidth)return;const{font:t,fontSize:o,labelColor:r,bars:s,inverted:l,labelsPadding:a}=this._data,n=e.context;n.textAlign="center",n.fillStyle=r,n.font=(0,i.makeFont)(o,t);for(let e=0;e<s.length;++e){const t=s[e],o=Math.round(Math.min(t.high,t.low)),r=Math.round(Math.max(t.high,t.low)),i=Math.round(t.center);n.textBaseline="alphabetic",n.fillText(l?t.lowLabel:t.highLabel,i,o-a),n.textBaseline="top",n.fillText(l?t.highLabel:t.lowLabel,i,r+a)}}}var h=o(982949),d=o(112377),u=o(511275),_=o(631088),p=o(559327),b=o(841698);class C extends b.SeriesBarCandlesPaneView{constructor(e,t){super(e,t),this._labelsRenderer=new c,this._candlesRenderer=new p.PaneRendererCandles,this._maxLengthLabel="",
this._calculateFontSize=(0,r.default)(((e,t)=>Math.max(1,(0,s.lowerboundExt)((e=>e+1),null,(o=>{const r=(0,i.makeFont)(o,u.CHART_FONT_FAMILY);return(0,_.measureText)(e,r).width<=t}),7,36))),((e,t)=>`${e}/${t}`))}renderer(){const e=this._source.priceScale();if(!e||e.isEmpty())return null;const t=new h.CompositeRenderer,o=this._needLabels(),r=this._source.properties().childs().hiloStyle.childs(),i=this._model.timeScale().barSpacing();if(this._invalidated){const e=this._source.formatter();this._maxLengthLabel="",this._updateImpl({generateLabels:o,formatter:e}),this._invalidated=!1}if(this._candlesRenderer.setData({bars:this._bars,wickVisible:!1,bodyVisible:r.drawBody.value(),barSpacing:i,borderVisible:r.showBorders.value(),barWidth:(0,l.optimalHiLoWidth)(i),isPriceScaleInverted:e.isInverted()}),t.append(this._candlesRenderer),o){const o=this._calculateLabelFontSize();o&&o>=8&&(this._labelsRenderer.setData({bars:this._bars,barSpacing:i,font:u.CHART_FONT_FAMILY,fontSize:o,labelColor:r.labelColor.value(),inverted:e.isInverted(),labelsPadding:.4*o}),t.append(this._labelsRenderer))}return this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new d.SelectionRenderer(this._selectionData)),t}topPixelMargin(){return this._margin()}bottomPixelMargin(){return this._margin()}_createItem(e,t,o,r){const i={center:NaN,left:NaN,right:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:o.barColor,borderColor:o.barBorderColor,hollow:!1,highLabel:"",lowLabel:"",timePointIndex:e};if(!(0,b.baseBarCandlesUpdater)(t,i))return null;if(i.open=i.high,i.close=i.low,r.generateLabels){const e=r.formatter.format(i.high),t=r.formatter.format(i.low);i.highLabel=e,i.lowLabel=t;const o=(e.length>t.length?e:t).replace(/\d/g,"0");o.length>this._maxLengthLabel.length&&(this._maxLengthLabel=o)}return i}_margin(){if(this._needLabels()){const e=this._calculateLabelFontSize();if(e&&e>=8)return 1.4*e}return 0}_calculateLabelFontSize(){return""===this._maxLengthLabel?null:this._calculateFontSize(this._maxLengthLabel,Math.floor(this._model.timeScale().barSpacing())-2)}_needLabels(){const e=this._source.properties().childs().hiloStyle.childs().showLabels.value(),t=this._model.timeScale().barSpacing();return e&&t>5}}},836835:(e,t,o)=>{o.d(t,{SeriesHLCAreaPaneView:()=>C});var r=o(86441),i=o(650151),s=o(764829),l=o(114555),a=o(836687),n=o(112377),c=o(518439),h=o(286436),d=o(982949),u=o(509078),_=o(708698),p=o(117908);class b extends p.ObjectValuesCache{_newObject(){return{high:void 0,close:void 0,low:void 0}}_clearObject(e){e.high=void 0,e.close=void 0,e.low=void 0}}class C{constructor(e,t){this._isMarkersEnabled=(0,s.enabled)("source_selection_markers"),this._hlcAreaCache=new b,this._highPoints=new p.CachedContainer,this._closePoints=new p.CachedContainer,this._lowPoints=new p.CachedContainer,this._barsBorders=new p.CachedContainer,this._filledAreas=new l.CachedMap,this._renderer=new d.CompositeRenderer,this._invalidated=!0,this._source=e,this._model=t,this._selectionIndexer=new a.SelectionIndexes(t.timeScale())}update(){
this._invalidated=!0}renderer(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer}_updateImpl(){var e,t,o,s,a,d,p,b,C;this._renderer.clear();const v=this._model.timeScale(),S=this._source.priceScale();if(v.isEmpty()||!S||S.isEmpty())return;const m=v.visibleBarsStrictRange();if(null===m)return;if(0===this._source.bars().size())return;const y=this._source.firstValue();if(null===y)return;const g=null!==(e=this._source.nearestIndex(m.firstBar()-1,c.PlotRowSearchMode.NearestLeft))&&void 0!==e?e:m.firstBar()-1,f=null!==(t=this._source.nearestIndex(m.lastBar()+1,c.PlotRowSearchMode.NearestRight))&&void 0!==t?t:m.lastBar()+1;this._hlcAreaCache.invalidateCache(),this._hlcAreaCache.setStartIndex(g),this._barsBorders.invalidateCache(),this._highPoints.invalidateCache(),this._lowPoints.invalidateCache(),this._closePoints.invalidateCache(),this._filledAreas.invalidateCache();let w,P,B;this._source.bars().range(g,f).each(((e,t)=>{if(this._hlcAreaCache.isValidIndex(e)){const o=this._hlcAreaCache.at(e);o.close=t[4],o.high=t[2],o.low=t[3]}return!1}));const L=new Map,k=g+this._hlcAreaCache.length();for(let e=g;e<k;e++){const t=this._hlcAreaCache.at(e),r=null!==(o=t.close)&&void 0!==o?o:null,i=null!==(s=t.high)&&void 0!==s?s:null,l=null!==(a=t.low)&&void 0!==a?a:null;(null!==r||null!==i||null!==l||Number.isFinite(w)||Number.isFinite(P)||Number.isFinite(B))&&(w=r,P=i,B=l,this._highPoints.push(i),this._closePoints.push(r),this._lowPoints.push(l),this._barsBorders.push({timePointIndex:e,left:NaN,center:NaN,right:NaN}),L.set(e,this._barsBorders.length()-1))}S.pricesArrayToCoordinates(this._highPoints.data(),y,this._highPoints.length()),S.pricesArrayToCoordinates(this._closePoints.data(),y,this._closePoints.length()),S.pricesArrayToCoordinates(this._lowPoints.data(),y,this._lowPoints.length()),v.fillBarBorders(this._barsBorders.data(),{startItemIndex:0,endItemIndex:this._barsBorders.length()});const x=this._source.properties().childs().hlcAreaStyle.childs(),I=x.highCloseFillColor.value(),N=x.closeLowFillColor.value(),R=null!==(d=this._filledAreas.get(I))&&void 0!==d?d:new l.AreaBackgroundItemsGroup({type:0,color:I}),T=null!==(p=R.newItem())&&void 0!==p?p:new l.AreaBackgroundItem;R.push(T),this._filledAreas.set(I,R);const A=null!==(b=this._filledAreas.get(N))&&void 0!==b?b:new l.AreaBackgroundItemsGroup({type:0,color:N}),M=null!==(C=A.newItem())&&void 0!==C?C:new l.AreaBackgroundItem;A.push(M),this._filledAreas.set(N,A);const D=[],F=[],V=[],W=this._barsBorders.length();for(let e=0;e<W;e++){const t=this._closePoints.at(e),o=this._highPoints.at(e),r=this._lowPoints.at(e),i=this._barsBorders.at(e),s=i.center,l=(0,h.coordinateIsValid)(t),a=(0,h.coordinateIsValid)(o),n=(0,h.coordinateIsValid)(r);l&&a&&n&&(T.addPoints1Point(s,o),T.addPoints2Point(s,t),M.addPoints1Point(s,t),M.addPoints2Point(s,r),D.push({y:o,...i}),F.push({y:t,...i}),V.push({y:r,...i}))}const E=v.barSpacing();if(this._renderer.append(new l.AreaBackgroundRenderer({barSpacing:E,colorAreas:this._filledAreas})),
this._renderer.append(new _.PaneRendererLine({barSpacing:E,items:V,simpleMode:!0,withMarkers:!1,lineColor:x.lowLineColor.value(),lineStyle:x.lowLineStyle.value(),lineWidth:x.lowLineWidth.value(),skipHoles:!0})),this._renderer.append(new _.PaneRendererLine({barSpacing:E,items:D,simpleMode:!0,withMarkers:!1,lineColor:x.highLineColor.value(),lineStyle:x.highLineStyle.value(),lineWidth:x.highLineWidth.value(),skipHoles:!0})),this._renderer.append(new _.PaneRendererLine({barSpacing:E,items:F,simpleMode:!0,withMarkers:!1,lineColor:x.closeLineColor.value(),lineStyle:x.closeLineStyle.value(),lineWidth:x.closeLineWidth.value(),skipHoles:!0})),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled){const e=this._selectionIndexer.indexes(),t=[],o=[],s=(0,i.ensureNotNull)(this._model.paneForSource(this._source)).height();for(let i=0;i<e.length;i++){const l=e[i],a=L.get(l);if(void 0===a)continue;const n=this._closePoints.at(a),c=this._barsBorders.at(a).center;t.push(new r.Point(c,n)),o.push(this._model.backgroundColorAtYPercentFromTop(n/s))}this._renderer.append(new n.SelectionRenderer({bgColors:o,points:t,visible:!0,barSpacing:v.barSpacing(),hittestResult:u.HitTarget.Regular}))}else this._selectionIndexer.clear()}}},649171:(e,t,o)=>{o.d(t,{SeriesHollowCandlesPaneView:()=>n});var r=o(982949),i=o(286436),s=o(112377),l=o(559327),a=o(88854);class n extends a.SeriesCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs().hollowCandleStyle.childs(),o=this._model.timeScale().barSpacing(),a={bars:this._bars,barSpacing:o,bodyVisible:t.drawBody.value(),borderVisible:t.drawBorder.value(),borderColor:t.borderColor.value(),wickColor:t.wickColor.value(),barWidth:(0,i.optimalBarWidth)(o),wickVisible:t.drawWick.value(),isPriceScaleInverted:e.isInverted()},n=new r.CompositeRenderer;return n.append(new l.PaneRendererCandles(a)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&n.append(new s.SelectionRenderer(this._selectionData)),n}}},452647:(e,t,o)=>{o.d(t,{SeriesLinePaneView:()=>c});var r=o(509078),i=o(982949),s=o(708698),l=o(810873),a=o(112377),n=o(98069);class c extends n.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.properties().childs(),t=e.style.value();let o,n=!1;2===t?o=e.lineStyle.childs():14===t?(o=e.lineWithMarkersStyle.childs(),n=!0):15===t?o=e.steplineStyle.childs():18===t&&(o=e.tpoStyle.childs());const c={barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:o.color.value(),lineStyle:o.linestyle.value(),withMarkers:n,lineWidth:o.linewidth.value(),simpleMode:!0,hitTestResult:r.HitTarget.Regular,skipHoles:!0};let h,d;if(h=15===t?new l.PaneRendererStepLine(c):new s.PaneRendererLine(c),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData){const e=new i.CompositeRenderer;e.append(h),
e.append(new a.SelectionRenderer(this._selectionData)),d=e}else d=h;return d}}},841698:(e,t,o)=>{o.d(t,{SeriesBarCandlesPaneView:()=>h,baseBarCandlesUpdater:()=>c});var r=o(86441),i=o(764829),s=o(836687),l=o(518439),a=o(509078);function n(e){return null!=e}function c(e,t){const o=e[1],r=e[2],i=e[3],s=e[4];return!!(n(o)&&n(r)&&n(i)&&n(s))&&(t.open=o,t.high=r,t.low=i,t.close=s,!0)}class h{constructor(e,t){this._bars=[],this._invalidated=!0,this._isMarkersEnabled=(0,i.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new s.SelectionIndexes(t.timeScale())}items(){return this._bars}update(){this._invalidated=!0}_updateImpl(e){const t=this._model.timeScale(),o=this._source.priceScale();if(this._bars=[],t.isEmpty()||!o||o.isEmpty())return;const i=t.visibleBarsStrictRange();if(null===i)return;if(0===this._source.bars().size())return;let s=this._source.nearestIndex(i.firstBar(),l.PlotRowSearchMode.NearestRight);const n=this._source.nearestIndex(i.lastBar(),l.PlotRowSearchMode.NearestLeft);if(void 0===s||void 0===n)return;for(;s<=n;s++){if(null!==this._source.bars().valueAt(s))break}if(s>n)return;const c=this._source.bars().range(s,n),h=this._source.barColorer(),d={};if(c.each(((t,o)=>{d.value=o;const r=h.firstColoredBar(t);let i;null!==r&&r>=t?this._source.setPrecomputedBarStyle(o,void 0):i=this._source.precomputedBarStyle(o),void 0===i&&(i=h.barStyle(t,!1,d),this._source.setPrecomputedBarStyle(o,i));const s=this._createItem(t,o,i,e);return!!s&&(d.previousValue=o,this._bars.push(s),!1)})),0===this._bars.length)return;const u=this._source.firstValue();if(null!==u)if(o.barPricesToCoordinates(this._bars,u),t.fillBarBorders(this._bars),this._model.selection().isSelected(this._source)){const e=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,hittestResult:a.HitTarget.Regular,barSpacing:t.barSpacing()};const i=this._model.paneForSource(this._source);if(!i)return;const s=i.height();for(let i=0;i<e.length;i++){const l=e[i],a=this._source.bars().valueAt(l);if(null===a)continue;const n=a[1],c=a[4];if(null==n||null==c)continue;const h=.5*(n+c),d=t.indexToCoordinate(l),_=o.priceToCoordinate(h,u);this._selectionData.points.push(new r.Point(d,_)),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(_/s))}}else this._selectionIndexer.clear()}}},98069:(e,t,o)=>{o.d(t,{SeriesSingleLinePaneView:()=>d});var r=o(203308),i=o(86441),s=o(650151),l=o(764829),a=o(836687),n=o(518439),c=o(509078),h=o(828473);class d{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,l.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new a.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}_updateImpl(){var e,t;this._items=[];const o=this._model.timeScale(),l=this._source.priceScale();if(o.isEmpty()||!l||l.isEmpty())return;const a=o.visibleBarsStrictRange();if(null===a)return;if(0===this._source.bars().size())return
;const d=null!==(e=this._source.nearestIndex(a.firstBar()-1,n.PlotRowSearchMode.NearestLeft))&&void 0!==e?e:a.firstBar()-1,u=null!==(t=this._source.nearestIndex(a.lastBar()+1,n.PlotRowSearchMode.NearestRight))&&void 0!==t?t:a.lastBar()+1,_=this._source.barFunction();let p=null;const b=this._model.timeScale().barSpacing();if(b<.1&&this._source.supportsPressedChunks()){p=this._source.firstValue();const e=this._source.pressedChunks(b,(0,s.ensureNotNull)(this._source.priceSource())),t=(0,h.lowerbound)(e,d,((e,t)=>e.startTime<t)),o=Math.min(e.length-1,(0,h.lowerbound)(e,u,((e,t)=>e.endTime<t)));for(let r=t;r<=o;r++){const t=e[r];[t.open,t.high,t.low,t.close].forEach((e=>{this._items.push({timePointIndex:t.startTime,y:e,left:NaN,center:NaN,right:NaN})}))}}else{p=this._source.bars().range(d,u).reduce(((e,t,o)=>{const i=_(o);return(0,r.default)(i)?(this._items.push({timePointIndex:t,y:i,left:NaN,center:NaN,right:NaN}),a.contains(t)?null!=e?e:i:e):e}),null)}if(null!==p)if(l.pointsArrayToCoordinates(this._items,p),o.fillBarBorders(this._items),this._model.selection().isSelected(this._source)){const e=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:o.barSpacing(),hittestResult:c.HitTarget.Regular};const t=(0,s.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=c.HitTarget.Regular;for(let r=0;r<e.length;r++){const s=e[r],a=this._source.bars().valueAt(s);if(null===a)continue;const n=_(a),c=o.indexToCoordinate(s),h=l.priceToCoordinate(n,p);this._selectionData.points.push(new i.Point(c,h)),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(h/t))}}else this._selectionIndexer.clear();else this._items=[]}}},65905:(e,t,o)=>{o.d(t,{SeriesValuesProvider:()=>L,calculateColor:()=>P,changesData:()=>B});var r=o(650151),i=o(150335),s=o(724377),l=o(444372),a=o(638456),n=o(432059),c=o(881025),h=o(518439),d=o(419283),u=o(627183),_=o(269734);function p(e,t){return 100*(t-e)/Math.abs(e||1)}var b=o(498830),C=o(627620),v=o(581899),S=o(546608);const m=S.lastDayChangeAvailable||S.alwaysShowLastPriceAndLastDayChange,y=a.CheckMobile.any(),g=(0,u.getPercentageFormatter)(),f=(0,u.getVolumeFormatter)(2),w=`${v.notAvailable} (${v.notAvailable}%)`;function P(e,t){const o=(0,s.parseRgb)(t),r=(0,s.parseRgb)(e);return(0,s.distanceRgb)(o,r)<70?(0,s.rgbToHexString)((0,s.invertRgb)(o)):t}function B(e,t,o,r,i){var s;let l,a;if(null!==t){const e=i[4],o=t.change||0;a={change:o,currentPrice:e,prevPrice:e-o,percentChange:t.change_percent||0}}const n=o[4],c=e.search(r-1,h.PlotRowSearchMode.NearestLeft,1),d=null!==(s=null==c?void 0:c.value[4])&&void 0!==s?s:null;return null!==d&&null!=n&&(l={change:n-d,currentPrice:n,prevPrice:d,percentChange:p(d,n)}),{barChange:l,lastDayChange:a}}class L{constructor(e,t){this._series=e,this._model=t,this._emptyValues=[{title:l.t(null,void 0,o(16610)),visible:!1,value:"",index:0,id:""},{title:l.t(null,void 0,o(778254)),visible:!1,value:"",index:1,id:""},{title:l.t(null,void 0,o(165318)),visible:!1,value:"",
index:2,id:""},{title:l.t(null,void 0,o(862578)),visible:!1,value:"",index:3,id:""},{title:"",visible:!1,value:"",index:4,id:""},{title:"",visible:!1,value:"",index:5,id:""},{title:l.t(null,void 0,o(537276)),visible:!1,value:"",index:6,id:""},{title:l.t(null,{context:"study"},o(424261)),visible:!1,value:"",index:7,id:""},{title:l.t(null,void 0,o(463815)),visible:!1,value:"",index:8,id:""}]}getItems(){return this._emptyValues}getValues(e){var t,o,s,l,a,d;const u=this._showLastPriceAndChangeOnly(),_=this._emptyValues.map(((e,t)=>({...e,value:6===t||8===t?w:v.notAvailable,visible:5!==t&&4!==t&&!u})));if(this._model.timeScale().isEmpty()||0===this._series.bars().size()||this._series.priceScale().isEmpty())return _;const p=(0,r.ensureNotNull)(this._series.data().bars().last());(0,i.isNumber)(e)||(e=p.index);const C=this._series.nearestIndex(e,h.PlotRowSearchMode.NearestLeft);if(void 0===C)return _;const S=this._series.data().valueAt(C),y=this._model.backgroundTopColor().value();if(null===S)return _;const L=S[1],k=S[2],x=S[3],I=S[4],{barChange:N,lastDayChange:R}=B(this._series.data(),this._series.quotes(),S,C,p.value),T=(0,b.getPriceValueFormatterForSource)(this._series);if((0,b.shouldBeFormattedAsPercent)(this._series)||(0,b.shouldBeFormattedAsIndexedTo100)(this._series))_[6].value="",_[8].value="";else{const e=this._series.formatter(),r={signPositive:!0};if(void 0!==N){const{currentPrice:i,prevPrice:s,change:l,percentChange:a}=N,n=null!==(o=null===(t=e.formatChange)||void 0===t?void 0:t.call(e,i,s,r))&&void 0!==o?o:e.format(l,r);_[6].value=(0,c.forceLTRStr)(`${n} (${g.format(a,r)})`)}if(void 0!==R){const{currentPrice:t,prevPrice:o,change:i,percentChange:a}=R,n=null!==(l=null===(s=e.formatChange)||void 0===s?void 0:s.call(e,t,o,r))&&void 0!==l?l:e.format(i,r);_[8].value=(0,c.forceLTRStr)(`${n} (${g.format(a,r)})`)}}let A=null;if(u)_[5].value=null==I?v.notAvailable:T(I),_[5].visible=!0,A=this._getChangeColor(null==R?void 0:R.change),_[6].visible=void 0!==N,_[8].visible=void 0!==R||m;else{_[0].value=null==L?v.notAvailable:T(L),_[1].value=null==k?v.notAvailable:T(k),_[2].value=null==x?v.notAvailable:T(x),_[3].value=null==I?v.notAvailable:T(I),_[4].value=T(this._series.barFunction()(S));const e=S[5];(0,i.isNumber)(e)?_[7].value=f.format(e):_[7].visible=!1;const t=this._series.intervalObj().is1Tick();_[0].visible=!t,_[1].visible=!t,_[2].visible=!t,_[8].visible=void 0!==R||m,_[6].visible=void 0!==N;const o=this._series.barColorer().barStyle(C,!1);A=P(y,null!==(a=o.barBorderColor)&&void 0!==a?a:o.barColor)}A=(0,n.resetTransparency)(P(y,A));for(const e of _)e.color||(e.color=A);return _[8].visible&&(_[8].color=(0,n.resetTransparency)(P(y,this._getChangeColor(null===(d=R)||void 0===d?void 0:d.change)))),_}_mobileNonTrackingMode(){return y&&(null===this._model.crossHairSource().pane||(0,C.isLineToolName)(d.tool.value())||null!==this._model.lineBeingEdited())}_showLastPriceAndChangeOnly(){return S.alwaysShowLastPriceAndLastDayChange||this._mobileNonTrackingMode()}_getChangeColor(e){var t
;const o=void 0===e||e>=0?_.SeriesBarColorer.upColor(this._series.properties()):_.SeriesBarColorer.downColor(this._series.properties());return null!==(t=o.barBorderColor)&&void 0!==t?t:o.barColor}}},61625:(e,t,o)=>{function r(e,t,o){return e===t||e===o}o.d(t,{symbolSameAsResolved:()=>r})},605244:(e,t,o)=>{o.d(t,{showSupportDialog:()=>r});o(659863);function r(e){return Promise.all([o.e(10790),o.e(46445),o.e(93703),o.e(44524),o.e(2520),o.e(53953),o.e(49481),o.e(53799),o.e(62564),o.e(46489),o.e(25480),o.e(29800),o.e(77476),o.e(23141),o.e(95083),o.e(29296),o.e(73399),o.e(49742),o.e(88488),o.e(16356),o.e(42810),o.e(96645),o.e(10417),o.e(91797),o.e(3062),o.e(22602),o.e(30358),o.e(91248),o.e(43602),o.e(36610),o.e(51499),o.e(610),o.e(13502),o.e(81354),o.e(57253),o.e(82321),o.e(25977),o.e(24951),o.e(23127),o.e(13217),o.e(56205),o.e(4387),o.e(60903),o.e(23460),o.e(14742),o.e(10841),o.e(28151),o.e(57274)]).then(o.bind(o,901361)).then((t=>new t.SupportDialog(e).open()))}}}]);
(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[63908],{129592:(e,t,i)=>{"use strict";i.d(t,{createGroup:()=>l,keyboardPressedKeysState:()=>a,pressedKeys:()=>s,registerWindow:()=>d,unregisterWindow:()=>u});var n=i(163586),r=i(764250);i(591800);const o=new n.ActionManager,s=o.pressedKeys(),a=o.keyboardPressedKeysState();function l(e){return new r.ActionGroup(o,e)}function d(e){o.listen(e)}function u(e){o.unlisten(e)}},351440:(e,t,i)=>{"use strict";async function n(){return Promise.all([i.e(33334),i.e(75816),i.e(93703),i.e(21356),i.e(62093),i.e(44524),i.e(77476),i.e(40702),i.e(82321),i.e(62526),i.e(97486)]).then(i.bind(i,826618))}i.d(t,{importPopupRender:()=>n})},613122:(e,t,i)=>{"use strict";i.r(t),i.d(t,{PublicationType:()=>n,closeCurrentPublicationViewPopup:()=>c,getPublicationType:()=>a,importEntryComponent:()=>l,openPublicationViewPopup:()=>p,preloadPublicationViewPopup:()=>h});var n,r=i(783359),o=i(351440);!function(e){e.Idea="idea",e.Script="script",e.Video="video"}(n||(n={}));const s=new Set([r.ScriptType.Indicator,r.ScriptType.Library,r.ScriptType.Strategy,"indicator","library","strategy"]);function a({isVideo:e,isScript:t,scriptType:i}){switch(!0){case e:return n.Video;case t:case s.has(i||""):return n.Script;default:return n.Idea}}async function l(e){switch(e){case n.Video:return Promise.all([i.e(69975),i.e(46445),i.e(93703),i.e(44524),i.e(2520),i.e(53953),i.e(49481),i.e(53799),i.e(62564),i.e(46489),i.e(58985),i.e(29800),i.e(77476),i.e(65857),i.e(22164),i.e(23141),i.e(95083),i.e(29296),i.e(73399),i.e(49742),i.e(62234),i.e(16356),i.e(77280),i.e(21251),i.e(3062),i.e(30358),i.e(87393),i.e(55057),i.e(52017),i.e(43602),i.e(80774),i.e(31234),i.e(30449),i.e(68827),i.e(610),i.e(56261),i.e(26771),i.e(49180),i.e(13502),i.e(65642),i.e(74420),i.e(73131),i.e(49290),i.e(83579),i.e(83108),i.e(94777),i.e(37743),i.e(8854),i.e(22367),i.e(9061),i.e(82321),i.e(24951),i.e(13217),i.e(23460),i.e(7187),i.e(75728),i.e(10841),i.e(62125),i.e(96443),i.e(97071)]).then(i.bind(i,399255)).then((e=>e.PublicationViewVideo));case n.Script:return Promise.all([i.e(15216),i.e(46445),i.e(93703),i.e(44524),i.e(2520),i.e(53953),i.e(49481),i.e(53799),i.e(62564),i.e(46489),i.e(25480),i.e(58985),i.e(29800),i.e(77476),i.e(65857),i.e(22164),i.e(23141),i.e(36010),i.e(95083),i.e(29296),i.e(73399),i.e(49742),i.e(62234),i.e(16356),i.e(77280),i.e(21251),i.e(3062),i.e(30358),i.e(87393),i.e(55057),i.e(52017),i.e(20016),i.e(43602),i.e(80774),i.e(31234),i.e(30449),i.e(81397),i.e(68827),i.e(610),i.e(56261),i.e(26771),i.e(49180),i.e(13502),i.e(65642),i.e(74420),i.e(81354),i.e(73131),i.e(49290),i.e(83579),i.e(83108),i.e(94777),i.e(37743),i.e(8854),i.e(46500),i.e(48120),i.e(82321),i.e(24951),i.e(13217),i.e(5476),i.e(23460),i.e(7187),i.e(14742),i.e(75728),i.e(10841),i.e(62125),i.e(96443),i.e(14675)]).then(i.bind(i,730034)).then((e=>e.PublicationViewScript));case n.Idea:
return Promise.all([i.e(878),i.e(46445),i.e(93703),i.e(44524),i.e(2520),i.e(53953),i.e(49481),i.e(53799),i.e(62564),i.e(46489),i.e(58985),i.e(29800),i.e(77476),i.e(65857),i.e(22164),i.e(23141),i.e(95083),i.e(29296),i.e(73399),i.e(49742),i.e(62234),i.e(16356),i.e(77280),i.e(21251),i.e(3062),i.e(30358),i.e(87393),i.e(55057),i.e(52017),i.e(20016),i.e(43602),i.e(80774),i.e(31234),i.e(30449),i.e(81397),i.e(68827),i.e(610),i.e(56261),i.e(26771),i.e(49180),i.e(13502),i.e(65642),i.e(74420),i.e(73131),i.e(49290),i.e(83579),i.e(83108),i.e(94777),i.e(37743),i.e(8854),i.e(46500),i.e(82321),i.e(24951),i.e(13217),i.e(23460),i.e(7187),i.e(75728),i.e(10841),i.e(62125),i.e(96443),i.e(84822)]).then(i.bind(i,564166)).then((e=>e.PublicationViewIdea))}}let d=!1;async function u(){return d=!0,Promise.all([i.e(45792),i.e(58214)]).then(i.bind(i,661254))}async function c(){if(!d)return;(await u()).closeCurrentPublicationViewPopup()}async function h(e){u(),(0,o.importPopupRender)(),l(e)}async function p(e){(await u()).openPublicationViewPopup(e)}},254526:(e,t,i)=>{"use strict";i.d(t,{SYMBOL_TYPE_BLACK_LIST:()=>n});const n=new Set(["spread","economic"])},438874:(e,t,i)=>{"use strict";function n(){return window.SCREENER_HOST||"https://scanner.tradingview.com"}function r(e,t){const i=n();return t?`${i}/${t}/`:1===e.length?`${i}/${e[0]}/`:`${i}/global/`}function o(e,t,i,r){const o=n(),s={symbol:e,fields:t};i&&(s.no_404="true"),r&&(s.price_conversion="disabled");const a=new URL(`${o}/symbol`);return Object.keys(s).forEach((e=>{a.searchParams.append(e,s[e])})),a.toString()}i.d(t,{getBackendUrl:()=>r,getSymbolDataUrl:()=>o})},783359:(e,t,i)=>{"use strict";var n,r,o;i.d(t,{CONTAINS_IO_SCRIPT_TAG:()=>s,PublicationMethod:()=>r,ScriptAccessType:()=>n,ScriptType:()=>o}),function(e){e[e.Public=1]="Public",e[e.Protected=2]="Protected",e[e.InviteOnly=3]="InviteOnly"}(n||(n={})),function(e){e[e.New=0]="New",e[e.Edit=1]="Edit",e[e.Update=2]="Update"}(r||(r={})),function(e){e[e.Indicator=1]="Indicator",e[e.Strategy=2]="Strategy",e[e.Library=3]="Library"}(o||(o={}));const s="containsioscript"},699411:(e,t,i)=>{"use strict";i.d(t,{toastManager:()=>o,toastUserInteractionStatus:()=>s});var n=i(775726),r=i(584112);const o=(0,n.createToastManager)(),s=(0,r.createNotificationsUserInteractionStatus)()},975420:(e,t,i)=>{"use strict";i.d(t,{trackTiming:()=>u});var n=i(251954),r=i(261030),o=i(588948),s=i(638456),a=i(691805);let l=!1;function d(){if(l)return;(0,o.updateInitData)();const e=(0,o.getInitData)();if(!e.gaId)return void(window.gtag=()=>{});l=!0,(0,a.appendScript)(`https://www.googletagmanager.com/gtag/js?id=${(0,o.getInitData)().gaId}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const t={anonymize_ip:!0};window.TVD&&(t.app_name="TVD",t.app_version=(0,s.desktopAppVersion)()),e.gaVars&&window.gtag("set",e.gaVars),window.gtag("consent","default",{analytics_storage:(0,r.getCookieSetting)(r.CookieSettings.Analytics)?"granted":"denied"}),window.gtag("config",e.gaId,t),
n.subscribe(r.cookieSettingsChangeEvent,((e,t)=>{e===r.CookieSettings.Analytics&&window.gtag("consent","update",{analytics_storage:t?"granted":"denied"})}),null)}function u(e,t,i,n){d(),window.gtag("event","timing_complete",{name:t,value:i,event_category:e,event_label:n})}},963239:(e,t,i)=>{"use strict";i.r(t),i.d(t,{copyToClipboard:()=>r,writeImpl:()=>o,writePromiseUsingApi:()=>a});var n=i(793993);function r(e){return o(e,null)}function o(e,t){const i=e.files&&e.files.length>0;if(!i&&t&&t.eventPhase>0)return s(t,e),Promise.resolve();if(!i){let t=!1;const i=i=>{i.stopImmediatePropagation(),s(i,e),t=!0};try{document.addEventListener("copy",i,!0),document.execCommand("copy")}finally{document.removeEventListener("copy",i,!0)}if(t)return Promise.resolve()}return async function(e){const t=(0,n.getClipboard)();if(!t||!t.write||!window.ClipboardItem)throw new DOMException("ClipboardApi is not supported","NotSupportedError");const i={};for(const t of e.files||[])i[t.type]=t;e.text&&(i["text/plain"]=e.text);e.html&&(i["text/html"]=e.html);return t.write([new window.ClipboardItem(i)])}(e)}function s(e,t){e.preventDefault();const i=e.clipboardData;t.text&&i.setData("text/plain",t.text),t.html&&i.setData("text/html",t.html)}async function a(e,t){const i=(0,n.getClipboard)();if("text/plain"===t&&!i.write){const t=await e;return i.writeText(await t.text())}if(!i||!i.write||!window.ClipboardItem)throw new DOMException("ClipboardApi is not supported","NotSupportedError");let r=null;try{r=new window.ClipboardItem({[t]:e})}catch(i){r=new window.ClipboardItem({[t]:await e})}if(r)return i.write([r]);throw new Error("ClipboardApi is not supported")}},414879:(e,t,i)=>{"use strict";var n,r;i.r(t),i.d(t,{Months:()=>r,WeekDays:()=>n}),function(e){e[e.SUNDAY=1]="SUNDAY",e[e.MONDAY=2]="MONDAY",e[e.TUESDAY=3]="TUESDAY",e[e.WEDNESDAY=4]="WEDNESDAY",e[e.THURSDAY=5]="THURSDAY",e[e.FRIDAY=6]="FRIDAY",e[e.SATURDAY=7]="SATURDAY"}(n||(n={})),function(e){e[e.JANUARY=0]="JANUARY",e[e.FEBRUARY=1]="FEBRUARY",e[e.MARCH=2]="MARCH",e[e.APRIL=3]="APRIL",e[e.MAY=4]="MAY",e[e.JUNE=5]="JUNE",e[e.JULY=6]="JULY",e[e.AUGUST=7]="AUGUST",e[e.SEPTEMBER=8]="SEPTEMBER",e[e.OCTOBER=9]="OCTOBER",e[e.NOVEMBER=10]="NOVEMBER",e[e.DECEMBER=11]="DECEMBER"}(r||(r={}))},793993:(e,t,i)=>{"use strict";function n(){var e;return null!==(e=navigator.androidClipboard)&&void 0!==e?e:navigator.clipboard}i.d(t,{getClipboard:()=>n})},440498:(e,t,i)=>{"use strict";i.d(t,{DELETED_SYMBOLS_LIST_ID:()=>n,isDeletedSymbolsList:()=>r});i(49437),i(738600);const n="deleted_symbols_list_id",r=e=>e===n},294740:(e,t,i)=>{e.exports=[{value:"",name:"All Exchanges",desc:i.i18next(null,void 0,i(349225)),flag:"",country:"",group:"AllExchanges",providerId:""},{value:"BISWAP",name:"Biswap v2 (BNB chain)",desc:i.i18next(null,void 0,i(799753)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"biswap"},{value:"BITAZZA",name:"Bitazza",desc:i.i18next(null,void 0,i(279367)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitazza"},{value:"BITHUMB",name:"Bithumb",
desc:i.i18next(null,void 0,i(141432)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bithumb"},{value:"BITKUB",name:"BITKUB",desc:i.i18next(null,void 0,i(687428)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitkub"},{value:"BITRUE",name:"Bitrue",desc:i.i18next(null,void 0,i(209041)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitrue"},{value:"BITMART",name:"Bitmart",desc:i.i18next(null,void 0,i(634114)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitmart"},{value:"COINMETRICS",name:"Coin Metrics",desc:i.i18next(null,void 0,i(705304)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"coinmetrics"},{value:"MEXC",name:"MEXC Global",desc:i.i18next(null,void 0,i(573928)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"mexc"},{value:"GATEIO",name:"Gate.io",desc:i.i18next(null,void 0,i(528604)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"gateio"},{value:"HTX",name:"HTX",desc:i.i18next(null,void 0,i(299799)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"htx"},{value:"796",name:"796",desc:i.i18next(null,void 0,i(364972)),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"DERIBIT",name:"Deribit",desc:i.i18next(null,void 0,i(385909)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"deribit"},{value:"DEFILLAMA",name:"Defi Llama",desc:i.i18next(null,void 0,i(490394)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"defillama"},{value:"GLASSNODE",name:"Glassnode",desc:i.i18next(null,void 0,i(589943)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"glassnode"},{value:"OKX",name:"OKX",desc:i.i18next(null,void 0,i(784466)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"okx"},{value:"ORCA",name:"Orca (Solana)",desc:i.i18next(null,void 0,i(281595)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"orca"},{value:"OSMOSIS",name:"Osmosis",desc:i.i18next(null,void 0,i(572407)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"osmosis"},{value:"PANGOLIN",name:"Pangolin v2 (Avalanche)",desc:i.i18next(null,void 0,i(954418)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"pangolin"},{value:"PANCAKESWAP",name:"PancakeSwap v2 (BNB chain)",desc:i.i18next(null,void 0,i(134248)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"pancakeswap"},{value:"PANCAKESWAP3BSC",name:"PancakeSwap v3 (BNB chain)",desc:i.i18next(null,void 0,i(100454)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"pancakeswap3"},{value:"PANCAKESWAP3ETH",name:"PancakeSwap v3 (Ethereum)",desc:i.i18next(null,void 0,i(411586)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"pancakeswap3"},{value:"CURVE",name:"Curve (Ethereum)",desc:i.i18next(null,void 0,i(121562)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"curve"},{value:"PIONEX",name:"Pionex",desc:i.i18next(null,void 0,i(85261)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"pionex"},{value:"PYTH",name:"Pyth",
desc:i.i18next(null,void 0,i(340806)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"pyth"},{value:"RAYDIUM",name:"Raydium (Solana)",desc:i.i18next(null,void 0,i(729766)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"raydium"},{value:"SPOOKYSWAP",name:"SpookySwap v2 (Fantom)",desc:i.i18next(null,void 0,i(64568)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"spookyswap"},{value:"WHITEBIT",name:"WhiteBIT",desc:i.i18next(null,void 0,i(63136)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"whitebit"},{value:"WOONETWORK",name:"WOO",desc:i.i18next(null,void 0,i(135476)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"woonetwork"},{value:"DYDX",name:"dYdX",desc:i.i18next(null,void 0,i(279744)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"dydx"},{value:"VOLMEX",name:"Volmex",desc:i.i18next(null,void 0,i(36018)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"volmex"},{value:"ZOOMEX",name:"Zoomex",desc:i.i18next(null,void 0,i(827860)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"zoomex"},{value:"ADX",name:"ADX",desc:i.i18next(null,void 0,i(216372)),flag:"ae",group:"Middle East / Africa",country:"ae",providerId:"",searchTerms:[i.i18next(null,void 0,i(879479)),i.i18next(null,void 0,i(770695))]},{value:"DFM",name:"DFM",desc:i.i18next(null,void 0,i(168496)),flag:"ae",group:"Middle East / Africa",country:"ae",providerId:"",searchTerms:[i.i18next(null,void 0,i(879479)),i.i18next(null,void 0,i(770695))]},{value:"NASDAQDUBAI",name:"NASDAQ",desc:i.i18next(null,void 0,i(670103)),flag:"ae",group:"Middle East / Africa",country:"ae",priorityInGroup:1,providerId:"",searchTerms:[i.i18next(null,void 0,i(879479)),i.i18next(null,void 0,i(770695))]},{value:"LSE",name:"LSE",desc:i.i18next(null,void 0,i(506690)),flag:"uk",group:"Europe",country:"uk",providerId:"",searchTerms:[i.i18next(null,void 0,i(564554)),i.i18next(null,void 0,i(460411))]},{value:"LME",name:"LME",desc:i.i18next(null,void 0,i(391262)),flag:"uk",group:"Europe",country:"uk",providerId:"",searchTerms:[i.i18next(null,void 0,i(564554)),i.i18next(null,void 0,i(460411))]},{value:"LSIN",name:"LSIN",desc:i.i18next(null,void 0,i(203392)),flag:"uk",group:"Europe",country:"uk",providerId:"",searchTerms:[i.i18next(null,void 0,i(564554)),i.i18next(null,void 0,i(460411))]},{value:"TURQUOISE",name:"Turquoise",desc:i.i18next(null,void 0,i(922542)),flag:"uk",group:"Europe",country:"uk",providerId:"",searchTerms:[i.i18next(null,void 0,i(564554)),i.i18next(null,void 0,i(460411))]},{value:"FTSE",name:"FTSE",desc:i.i18next(null,void 0,i(56079)),flag:"uk",group:"Europe",country:"uk",providerId:"",searchTerms:[i.i18next(null,void 0,i(564554)),i.i18next(null,void 0,i(460411))]},{value:"EUREX",name:"EUREX",desc:i.i18next(null,void 0,i(28727)),flag:"europe",group:"Europe",country:"eu",providerId:""},{value:"MGEX",name:"MGEX",desc:i.i18next(null,void 0,i(27946)),flag:"usa",hideInSymbolSearch:!0,group:"North America",country:"us",providerId:"",
searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"NASDAQ",name:"NASDAQ",desc:i.i18next(null,void 0,i(217103)),flag:"usa",group:"North America",country:"us",priorityInGroup:1,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"NYSE",name:"NYSE",desc:i.i18next(null,void 0,i(715727)),flag:"usa",group:"North America",country:"us",priorityInGroup:2,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"AMEX",name:"Arca",desc:i.i18next(null,void 0,i(800828)),flag:"usa",group:"North America",country:"us",priorityInGroup:3,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"OTC",name:"OTC",desc:i.i18next(null,void 0,i(846485)),flag:"usa",group:"North America",country:"us",priorityInGroup:4,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"DJ",name:"DJ",desc:i.i18next(null,void 0,i(473367)),flag:"usa",group:"North America",country:"us",priorityInGroup:5,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"SP",name:"SP",desc:i.i18next(null,void 0,i(320939)),flag:"usa",group:"North America",country:"us",priorityInGroup:6,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"CBOE",name:"CBOE",desc:i.i18next(null,void 0,i(395213)),flag:"usa",group:"North America",country:"us",priorityInGroup:7,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"FINRABTDS",name:"FINRA BTDS",desc:i.i18next(null,void 0,i(137716)),flag:"usa",group:"North America",country:"us",providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"FINRAATDS",name:"FINRA ATDS",desc:i.i18next(null,void 0,i(922843)),flag:"usa",group:"North America",country:"us",providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"CBOEEU",name:"CBOE EU",desc:i.i18next(null,void 0,i(680842)),flag:"europe",group:"Europe",country:"eu",providerId:""},{value:"CBOT",name:"CBOT",desc:i.i18next(null,void 0,i(797720)),flag:"usa",group:"North America",country:"us",priorityInGroup:8,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"CME",name:"CME GLOBEX",desc:i.i18next(null,void 0,i(78085)),flag:"usa",group:"North America",country:"us",priorityInGroup:9,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"COMEX",name:"COMEX",desc:i.i18next(null,void 0,i(107840)),flag:"usa",group:"North America",country:"us",priorityInGroup:10,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"NYMEX",name:"NYMEX",desc:i.i18next(null,void 0,i(346926)),flag:"usa",group:"North America",country:"us",priorityInGroup:11,providerId:"",
searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"ICEUS",name:"ICEUS",desc:i.i18next(null,void 0,i(766301)),flag:"usa",group:"North America",country:"us",priorityInGroup:12,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"FAIRX",name:"FairX",desc:i.i18next(null,void 0,i(389609)),flag:"usa",group:"North America",country:"us",priorityInGroup:13,providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"CSE",name:"CSE",desc:i.i18next(null,void 0,i(19521)),flag:"canada",group:"North America",country:"ca",priorityInGroup:13,providerId:"",searchTerms:[i.i18next(null,void 0,i(588590))]},{value:"NEO",name:"NEO",desc:i.i18next(null,void 0,i(692726)),flag:"canada",group:"North America",country:"ca",priorityInGroup:14,providerId:"",searchTerms:[i.i18next(null,void 0,i(588590))]},{value:"TSX",name:"TSX",desc:i.i18next(null,void 0,i(713373)),flag:"canada",group:"North America",country:"ca",priorityInGroup:15,providerId:"",searchTerms:[i.i18next(null,void 0,i(588590))]},{value:"TSXV",name:"TSXV",desc:i.i18next(null,void 0,i(151990)),flag:"canada",group:"North America",country:"ca",priorityInGroup:16,providerId:"",searchTerms:[i.i18next(null,void 0,i(588590))]},{value:"ALOR",name:"ALOR",desc:i.i18next(null,void 0,i(987872)),flag:"russia",group:"Europe",country:"ru",providerId:"",searchTerms:[i.i18next(null,void 0,i(115446))]},{value:"MYX",name:"MYX",desc:i.i18next(null,void 0,i(522503)),flag:"malaysia",group:"Asia / Pacific",country:"my",providerId:"",searchTerms:[i.i18next(null,void 0,i(910613))]},{value:"FTSEMYX",name:"FTSE",desc:i.i18next(null,void 0,i(729317)),flag:"malaysia",group:"Asia / Pacific",country:"my",providerId:"",searchTerms:[i.i18next(null,void 0,i(910613))]},{value:"HOSE",name:"HOSE",desc:i.i18next(null,void 0,i(587176)),flag:"vietnam",group:"Asia / Pacific",country:"vn",providerId:"",searchTerms:[i.i18next(null,void 0,i(403944))]},{value:"HNX",name:"HNX",desc:i.i18next(null,void 0,i(247683)),flag:"vietnam",group:"Asia / Pacific",country:"vn",providerId:"",searchTerms:[i.i18next(null,void 0,i(403944))]},{value:"UPCOM",name:"HNX UPCoM",desc:i.i18next(null,void 0,i(468677)),flag:"vietnam",group:"Asia / Pacific",country:"vn",providerId:"",searchTerms:[i.i18next(null,void 0,i(403944))]},{value:"CSELK",name:"CSE",desc:i.i18next(null,void 0,i(817932)),flag:"sri_lanka",group:"Asia / Pacific",country:"lk",providerId:"",searchTerms:[i.i18next(null,void 0,i(308201))]},{value:"BITSTAMP",name:"Bitstamp",desc:i.i18next(null,void 0,i(926085)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitstamp"},{value:"ACTIVTRADES",name:"ActivTrades",desc:i.i18next(null,void 0,i(136792)),flag:"forex",group:"Forex",country:"",providerId:"activtrades"},{value:"AFTERPRIME",name:"Afterprime",desc:i.i18next(null,void 0,i(218282)),flag:"forex",group:"Forex",country:"",providerId:"afterprime"},{value:"BLACKBULL",name:"BlackBull Markets",desc:i.i18next(null,void 0,i(890862)),flag:"forex",
group:"Forex",country:"",providerId:"blackbullmarkets"},{value:"FPMARKETS",name:"FP Markets",desc:i.i18next(null,void 0,i(328729)),flag:"forex",group:"Forex",country:"",providerId:"fpmarkets"},{value:"FUSIONMARKETS",name:"Fusion Markets",desc:i.i18next(null,void 0,i(795486)),flag:"forex",group:"Forex",country:"",providerId:"fusionmarkets"},{value:"IG",name:"IG",desc:i.i18next(null,void 0,i(364294)),flag:"forex",group:"Forex",country:"",providerId:"ig"},{value:"THINKMARKETS",name:"ThinkMarkets",desc:i.i18next(null,void 0,i(992944)),flag:"forex",group:"Forex",country:"",providerId:"thinkmarkets"},{value:"TRADENATION",name:"Trade Nation",desc:i.i18next(null,void 0,i(424782)),flag:"forex",group:"Forex",country:"",providerId:"tradenation"},{value:"VANTAGE",name:"Vantage",desc:i.i18next(null,void 0,i(430760)),flag:"forex",group:"Forex",country:"",providerId:"vantagefx"},{value:"VELOCITY",name:"Velocity Trade",desc:i.i18next(null,void 0,i(370458)),flag:"forex",group:"Forex",country:"",providerId:"velocitytrade"},{value:"FX",name:"FXCM",desc:i.i18next(null,void 0,i(72752)),flag:"forex",group:"Forex",country:"",providerId:"fxcm"},{value:"FXOPEN",name:"FXOpen",desc:i.i18next(null,void 0,i(453285)),flag:"forex",group:"Forex",country:"",providerId:"fxopen"},{value:"EIGHTCAP",name:"Eightcap",desc:i.i18next(null,void 0,i(817793)),flag:"forex",group:"Forex",country:"",providerId:"eightcap"},{value:"BTCE",name:"BTC-e",desc:i.i18next(null,void 0,i(900801)),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"HONEYSWAP",name:"Honeyswap v2 (Gnosis)",desc:i.i18next(null,void 0,i(445782)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"honeyswap"},{value:"BSE",name:"BSE",desc:i.i18next(null,void 0,i(679286)),flag:"india",group:"Asia / Pacific",country:"in",providerId:"",searchTerms:[i.i18next(null,void 0,i(719912))]},{value:"MSEI",name:"MSE",desc:i.i18next(null,void 0,i(196615)),flag:"india",group:"Asia / Pacific",country:"in",providerId:"",searchTerms:[i.i18next(null,void 0,i(719912))]},{value:"NYMEX_MINI",name:"NYMEX",desc:i.i18next(null,void 0,i(346926)),flag:"usa",group:"North America",hideInSymbolSearch:!0,country:"us",providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"COMEX_MINI",name:"COMEX",desc:i.i18next(null,void 0,i(107840)),flag:"usa",group:"North America",hideInSymbolSearch:!0,country:"us",providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"ICEEURFIN",name:"ICEEUR",desc:i.i18next(null,void 0,i(283020)),flag:"europe",group:"Europe",country:"eu",providerId:""},{value:"ICEEURCOMM",name:"ICEEUR",desc:i.i18next(null,void 0,i(273008)),flag:"europe",group:"Europe",country:"eu",providerId:""},{value:"NSE",name:"NSE",desc:i.i18next(null,void 0,i(849391)),flag:"india",group:"Asia / Pacific",country:"in",providerId:"",searchTerms:[i.i18next(null,void 0,i(719912))]},{value:"MCX",name:"MCX",desc:i.i18next(null,void 0,i(738203)),flag:"india",group:"Asia / Pacific",country:"in",
providerId:"",searchTerms:[i.i18next(null,void 0,i(719912))]},{value:"NCDEX",name:"NCDEX",desc:i.i18next(null,void 0,i(32132)),flag:"india",group:"Asia / Pacific",country:"in",providerId:"",searchTerms:[i.i18next(null,void 0,i(719912))]},{value:"KCBT",name:"KCBT",desc:i.i18next(null,void 0,i(528616)),flag:"usa",hideInSymbolSearch:!0,group:"North America",country:"us",providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"OKCOIN",name:"OKCoin",desc:i.i18next(null,void 0,i(265242)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"okcoin"},{value:"CBOT_MINI",name:"CBOT",desc:i.i18next(null,void 0,i(797720)),flag:"usa",group:"North America",hideInSymbolSearch:!0,country:"us",providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"KRAKEN",name:"Kraken",desc:i.i18next(null,void 0,i(959795)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"kraken"},{value:"KUCOIN",name:"KuCoin",desc:i.i18next(null,void 0,i(348700)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"kucoin"},{value:"LUNARCRUSH",name:"LunarCrush",desc:i.i18next(null,void 0,i(476316)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"lunarcrush"},{value:"XEXCHANGE",name:"xExchange",desc:i.i18next(null,void 0,i(149853)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"xexchange"},{value:"CME_MINI",name:"CME",desc:i.i18next(null,void 0,i(78085)),flag:"usa",group:"North America",hideInSymbolSearch:!0,country:"us",providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"DJ",name:"DJ",desc:i.i18next(null,void 0,i(53182)),flag:"usa",hideInSymbolSearch:!0,group:"North America",country:"us",providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"SP",name:"SP",desc:i.i18next(null,void 0,i(359390)),flag:"usa",hideInSymbolSearch:!0,group:"North America",country:"us",providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"BTCCHINA",name:"BTC China",desc:i.i18next(null,void 0,i(812763)),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"THRUSTER3",name:"Thruster v3 (Blast)",desc:i.i18next(null,void 0,i(689626)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"thruster"},{value:"TIMEX",name:"TimeX",desc:i.i18next(null,void 0,i(4782)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"timex"},{value:"ANX",name:"ANX",desc:i.i18next(null,void 0,i(158363)),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"MEXBT",name:"meXBT",desc:i.i18next(null,void 0,i(145894)),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"GEMINI",name:"Gemini",desc:i.i18next(null,void 0,i(880309)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"gemini"},{value:"BITVC",name:"BitVC",desc:i.i18next(null,void 0,i(784960)),flag:"bitcoin",group:"Cryptocurrency",
hideInSymbolSearch:!0,country:"",providerId:""},{value:"BITYES",name:"BitYes",desc:i.i18next(null,void 0,i(61174)),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:""},{value:"BITFLYER",name:"bitFlyer",desc:i.i18next(null,void 0,i(719564)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitflyer"},{value:"BYBIT",name:"Bybit",desc:i.i18next(null,void 0,i(562521)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bybit"},{value:"BITMEX",name:"BitMEX",desc:i.i18next(null,void 0,i(433593)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitmex"},{value:"CAPITALCOM",name:"Capital.com",desc:i.i18next(null,void 0,i(43469)),flag:"forex",group:"Forex",country:"",providerId:"capitalcom"},{value:"CFI",name:"CFI",desc:i.i18next(null,void 0,i(270727)),flag:"forex",group:"Forex",country:"",providerId:"cfifinancial"},{value:"COINEX",name:"CoinEx",desc:i.i18next(null,void 0,i(346959)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"coinex"},{value:"INTOTHEBLOCK",name:"IntoTheBlock",desc:i.i18next(null,void 0,i(642457)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"intotheblock"},{value:"EASYMARKETS",name:"easyMarkets",desc:i.i18next(null,void 0,i(239891)),flag:"forex",group:"Forex",country:"",providerId:"easymarkets"},{value:"FOREXCOM",name:"FOREX.com",desc:i.i18next(null,void 0,i(273774)),flag:"forex",group:"Forex",country:"",providerId:"gain"},{value:"FX_IDC",name:"ICE",desc:i.i18next(null,void 0,i(712566)),flag:"forex",group:"Forex",country:"",providerId:"ice"},{value:"IBKR",name:"Interactive Brokers",desc:i.i18next(null,void 0,i(341971)),flag:"forex",group:"Forex",country:"",providerId:"ibkr"},{value:"IBROKER",name:"iBroker",desc:i.i18next(null,void 0,i(520915)),flag:"forex",group:"Forex",country:"",providerId:"ibroker"},{value:"ICMARKETS",name:"IC Markets",desc:i.i18next(null,void 0,i(6506)),flag:"forex",group:"Forex",country:"",providerId:"icmarkets"},{value:"BITFINEX",name:"Bitfinex",desc:i.i18next(null,void 0,i(732549)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitfinex"},{value:"MTGOX",name:"Mt.Gox",desc:i.i18next(null,void 0,i(305241)),flag:"bitcoin",group:"Cryptocurrency",hideInSymbolSearch:!0,country:"",providerId:"mtgox"},{value:"PHEMEX",name:"Phemex",desc:i.i18next(null,void 0,i(3906)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"phemex"},{value:"POLONIEX",name:"Poloniex",desc:i.i18next(null,void 0,i(418819)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"poloniex"},{value:"PULSEX",name:"Pulsex (Pulsechain)",desc:i.i18next(null,void 0,i(31780)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"pulsex"},{value:"QUICKSWAP",name:"QuickSwap v2 (Polygon)",desc:i.i18next(null,void 0,i(222051)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"quickswap"},{value:"QUICKSWAP3POLYGONZKEVM",name:"QuickSwap v3 (Polygon zkEVM)",desc:i.i18next(null,void 0,i(329095)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"quickswap3"},{value:"QUICKSWAP3POLYGON",
name:"QuickSwap v3 (Polygon)",desc:i.i18next(null,void 0,i(565062)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"quickswap3"},{value:"SUSHISWAP",name:"SushiSwap v2 (Ethereum)",desc:i.i18next(null,void 0,i(487896)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"sushiswap"},{value:"SUSHISWAPPOLYGON",name:"SushiSwap v2 (Polygon)",desc:i.i18next(null,void 0,i(496143)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"sushiswap"},{value:"TOKENIZE",name:"Tokenize",desc:i.i18next(null,void 0,i(783427)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"tokenize"},{value:"TRADERJOE",name:"Trader Joe v2 (Avalanche)",desc:i.i18next(null,void 0,i(811847)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"traderjoe"},{value:"UNISWAP",name:"Uniswap v2 (Ethereum)",desc:i.i18next(null,void 0,i(846768)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"uniswap"},{value:"UNISWAP3ETH",name:"Uniswap v3 (Ethereum)",desc:i.i18next(null,void 0,i(976337)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"uniswap3"},{value:"UNISWAP3POLYGON",name:"Uniswap v3 (Polygon)",desc:i.i18next(null,void 0,i(725829)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"uniswap3"},{value:"UNISWAP3ARBITRUM",name:"Uniswap v3 (Arbitrum)",desc:i.i18next(null,void 0,i(439063)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"uniswap3"},{value:"UNISWAP3OPTIMISM",name:"Uniswap v3 (Optimism)",desc:i.i18next(null,void 0,i(234811)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"uniswap3"},{value:"UNISWAP3BSC",name:"Uniswap v3 (BNB chain)",desc:i.i18next(null,void 0,i(743891)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"uniswap3"},{value:"UNISWAP3BASE",name:"Uniswap v3 (Base)",desc:i.i18next(null,void 0,i(590022)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"uniswap3"},{value:"UNISWAP3AVALANCHE",name:"Uniswap v3 (Avalanche)",desc:i.i18next(null,void 0,i(936011)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"uniswap3"},{value:"UPBIT",name:"UpBit",desc:i.i18next(null,void 0,i(977837)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"upbit"},{value:"BINGX",name:"BingX",desc:i.i18next(null,void 0,i(190615)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bingx"},{value:"BTSE",name:"BTSE",desc:i.i18next(null,void 0,i(598713)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"btse"},{value:"BITTREX",name:"Bittrex",desc:i.i18next(null,void 0,i(874414)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bittrex"},{value:"BINANCE",name:"Binance",desc:i.i18next(null,void 0,i(943962)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"binance"},{value:"BITGET",name:"Bitget",desc:i.i18next(null,void 0,i(290121)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bitget"},{value:"BINANCEUS",name:"Binance US",desc:i.i18next(null,void 0,i(665633)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"binance"},{value:"DELTA",name:"Delta",
desc:i.i18next(null,void 0,i(571073)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"delta"},{value:"BLOFIN",name:"Blofin",desc:i.i18next(null,void 0,i(324519)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"blofin"},{value:"BNC",name:"Brave New Coin",desc:i.i18next(null,void 0,i(334878)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"bnc"},{value:"KATANA",name:"Katana (Ronin)",desc:i.i18next(null,void 0,i(635120)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"katana"},{value:"CAMELOT",name:"Camelot v2 (Arbitrum)",desc:i.i18next(null,void 0,i(458981)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"camelot2"},{value:"CAMELOT3ARBITRUM",name:"Camelot v3 (Arbitrum)",desc:i.i18next(null,void 0,i(788251)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"camelot3"},{value:"CRYPTOCOM",name:"crypto.com",desc:i.i18next(null,void 0,i(424922)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"cryptocom"},{value:"VELODROME",name:"Velodrome (Optimism)",desc:i.i18next(null,void 0,i(151597)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"velodrome"},{value:"VVSFINANCE",name:"VVS Finance (Cronos)",desc:i.i18next(null,void 0,i(384055)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"vvsfinance"},{value:"MMFINANCE",name:"MM Finance (Cronos)",desc:i.i18next(null,void 0,i(192290)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"mmfinance"},{value:"BASESWAP",name:"BaseSwap (Base)",desc:i.i18next(null,void 0,i(758571)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"baseswap"},{value:"BCBA",name:"BYMA",desc:i.i18next(null,void 0,i(873679)),flag:"argentina",group:"Mexico and South America",country:"ar",providerId:"",searchTerms:[i.i18next(null,void 0,i(106226))]},{value:"MATBAROFEX",name:"ROFEX",desc:i.i18next(null,void 0,i(287198)),flag:"argentina",group:"Mexico and South America",country:"ar",providerId:"",searchTerms:[i.i18next(null,void 0,i(106226))]},{value:"BMFBOVESPA",name:"B3",desc:i.i18next(null,void 0,i(297117)),flag:"brasil",group:"Mexico and South America",country:"br",providerId:"",searchTerms:[i.i18next(null,void 0,i(497100))]},{value:"BMV",name:"BMV",desc:i.i18next(null,void 0,i(167429)),flag:"mexico",group:"Mexico and South America",country:"mx",providerId:"",searchTerms:[i.i18next(null,void 0,i(774951))]},{value:"BIVA",name:"BIVA",desc:i.i18next(null,void 0,i(545849)),flag:"mexico",group:"Mexico and South America",country:"mx",providerId:"",searchTerms:[i.i18next(null,void 0,i(774951))]},{value:"BVL",name:"BVL",desc:i.i18next(null,void 0,i(557266)),flag:"peru",group:"Mexico and South America",country:"pe",providerId:"",searchTerms:[i.i18next(null,void 0,i(184677))]},{value:"BCS",name:"SSE",desc:i.i18next(null,void 0,i(837838)),flag:"chile",group:"Mexico and South America",country:"cl",providerId:"",searchTerms:[i.i18next(null,void 0,i(887583))]},{value:"BVC",name:"BVC",desc:i.i18next(null,void 0,i(472364)),flag:"colombia",group:"Mexico and South America",country:"co",
providerId:"",searchTerms:[i.i18next(null,void 0,i(882104))]},{value:"BVCV",name:"BVC",desc:i.i18next(null,void 0,i(368544)),flag:"venezuela",group:"Mexico and South America",country:"ve",providerId:"",searchTerms:[i.i18next(null,void 0,i(250614))]},{value:"NAG",name:"NSE",desc:i.i18next(null,void 0,i(835936)),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:"",searchTerms:[i.i18next(null,void 0,i(200186))]},{value:"TSE",name:"TSE",desc:i.i18next(null,void 0,i(626004)),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:"",searchTerms:[i.i18next(null,void 0,i(200186))]},{value:"TFEX",name:"TFEX",desc:i.i18next(null,void 0,i(477940)),flag:"thailand",group:"Asia / Pacific",country:"th",providerId:"",searchTerms:[i.i18next(null,void 0,i(215786))]},{value:"TFX",name:"TFX",desc:i.i18next(null,void 0,i(774401)),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:"",searchTerms:[i.i18next(null,void 0,i(200186))]},{value:"TOCOM",name:"TOCOM",desc:i.i18next(null,void 0,i(686908)),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:"",searchTerms:[i.i18next(null,void 0,i(200186))]},{value:"OSE",name:"OSE",desc:i.i18next(null,void 0,i(565991)),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:"",searchTerms:[i.i18next(null,void 0,i(200186))]},{value:"SGX",name:"SGX",desc:i.i18next(null,void 0,i(726842)),flag:"singapore",group:"Asia / Pacific",country:"sg",providerId:"",searchTerms:[i.i18next(null,void 0,i(977377))]},{value:"ICESG",name:"ICE Futures Singapore",desc:i.i18next(null,void 0,i(123453)),flag:"singapore",group:"Asia / Pacific",country:"sg",providerId:"",searchTerms:[i.i18next(null,void 0,i(977377))]},{value:"FTSEST",name:"FTSE ST",desc:i.i18next(null,void 0,i(556743)),flag:"singapore",group:"Asia / Pacific",country:"sg",providerId:"",searchTerms:[i.i18next(null,void 0,i(977377))]},{value:"SAPSE",name:"SSE",desc:i.i18next(null,void 0,i(588484)),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:"",searchTerms:[i.i18next(null,void 0,i(200186))]},{value:"FSE",name:"FSE",desc:i.i18next(null,void 0,i(424900)),flag:"japan",group:"Asia / Pacific",country:"jp",providerId:"",searchTerms:[i.i18next(null,void 0,i(200186))]},{value:"TPEX",name:"TPEx",desc:i.i18next(null,void 0,i(271124)),flag:"taiwan",group:"Asia / Pacific",country:"tw",providerId:"",searchTerms:[i.i18next(null,void 0,i(59215))]},{value:"TAIFEX",name:"TAIFEX",desc:i.i18next(null,void 0,i(343324)),flag:"taiwan",group:"Asia / Pacific",country:"tw",providerId:"",searchTerms:[i.i18next(null,void 0,i(59215))]},{value:"TWSE",name:"TWSE",desc:i.i18next(null,void 0,i(546623)),flag:"taiwan",group:"Asia / Pacific",country:"tw",providerId:"",searchTerms:[i.i18next(null,void 0,i(59215))]},{value:"SET",name:"SET",desc:i.i18next(null,void 0,i(4085)),flag:"thailand",group:"Asia / Pacific",country:"th",providerId:"",searchTerms:[i.i18next(null,void 0,i(215786))]},{value:"KRX",name:"KRX",desc:i.i18next(null,void 0,i(233866)),flag:"south_korea",group:"Asia / Pacific",country:"kr",providerId:"",
searchTerms:[i.i18next(null,void 0,i(617661))]},{value:"BAHRAIN",name:"BHB",desc:i.i18next(null,void 0,i(198411)),flag:"bahrain",group:"Middle East / Africa",country:"bh",providerId:"",searchTerms:[i.i18next(null,void 0,i(290594))]},{value:"KSE",name:"KSE",desc:i.i18next(null,void 0,i(869885)),flag:"kuwait",group:"Middle East / Africa",country:"kw",providerId:"",searchTerms:[i.i18next(null,void 0,i(76614))]},{value:"CSECY",name:"CSE",desc:i.i18next(null,void 0,i(90904)),flag:"cyprus",group:"Europe",country:"cy",providerId:"",searchTerms:[i.i18next(null,void 0,i(935415))]},{value:"BVMT",name:"BVMT",desc:i.i18next(null,void 0,i(707302)),flag:"tunisia",group:"Middle East / Africa",country:"tn",providerId:"",searchTerms:[i.i18next(null,void 0,i(420349))]},{value:"ATHEX",name:"ATHEX",desc:i.i18next(null,void 0,i(672725)),flag:"greece",group:"Europe",country:"gr",providerId:""},{value:"BELEX",name:"BELEX",desc:i.i18next(null,void 0,i(43917)),flag:"serbia",group:"Europe",country:"rs",providerId:"",searchTerms:[i.i18next(null,void 0,i(428819))]},{value:"EGX",name:"EGX",desc:i.i18next(null,void 0,i(673924)),flag:"egypt",group:"Middle East / Africa",country:"eg",providerId:"",searchTerms:[i.i18next(null,void 0,i(324432))]},{value:"TADAWUL",name:"Tadawul",desc:i.i18next(null,void 0,i(294693)),flag:"saudi_arabia",group:"Middle East / Africa",country:"sa",providerId:"",searchTerms:[i.i18next(null,void 0,i(605991))]},{value:"CSEMA",name:"CSE",desc:i.i18next(null,void 0,i(825559)),flag:"morocco",group:"Middle East / Africa",country:"ma",providerId:"",searchTerms:[i.i18next(null,void 0,i(224794))]},{value:"IDX",name:"IDX",desc:i.i18next(null,void 0,i(108698)),flag:"indonesia",group:"Asia / Pacific",country:"id",providerId:"",searchTerms:[i.i18next(null,void 0,i(532355))]},{value:"HSI",name:"HSI",desc:i.i18next(null,void 0,i(711161)),flag:"hong_kong",group:"Asia / Pacific",country:"hk",providerId:"",searchTerms:[i.i18next(null,void 0,i(248861))]},{value:"QSE",name:"QSE",desc:i.i18next(null,void 0,i(265698)),flag:"qatar",group:"Middle East / Africa",country:"qa",providerId:"",searchTerms:[i.i18next(null,void 0,i(328756))]},{value:"OANDA",name:"OANDA",desc:i.i18next(null,void 0,i(373389)),flag:"forex",group:"Forex",country:"",providerId:"oanda"},{value:"SAXO",name:"Saxo",desc:i.i18next(null,void 0,i(597961)),flag:"forex",group:"Forex",country:"",providerId:"saxobank"},{value:"PEPPERSTONE",name:"Pepperstone",desc:i.i18next(null,void 0,i(82455)),flag:"forex",group:"Forex",country:"",providerId:"pepperstone"},{value:"PHILLIPNOVA",name:"Phillip Nova",desc:i.i18next(null,void 0,i(714387)),flag:"forex",group:"Forex",country:"",providerId:"phillipnova"},{value:"SKILLING",name:"SKILLING",desc:i.i18next(null,void 0,i(519061)),flag:"forex",group:"Forex",country:"",providerId:"skilling"},{value:"SPREADEX",name:"Spreadex",desc:i.i18next(null,void 0,i(732187)),flag:"forex",group:"Forex",country:"",providerId:"spreadex"},{value:"GBEBROKERS",name:"GBE brokers",desc:i.i18next(null,void 0,i(891454)),flag:"forex",group:"Forex",country:"",
providerId:"gbebrokers"},{value:"EURONEXT",name:"Euronext",desc:i.i18next(null,void 0,i(771342)),flag:"europe",group:"Europe",country:"eu",providerId:""},{value:"EURONEXTAMS",name:"EURONEXTAMS",desc:i.i18next(null,void 0,i(350877)),flag:"netherlands",group:"Europe",country:"nl",providerId:"",searchTerms:[i.i18next(null,void 0,i(376970))]},{value:"EURONEXTBRU",name:"EURONEXTBRU",desc:i.i18next(null,void 0,i(982141)),flag:"belgium",group:"Europe",country:"be",providerId:"",searchTerms:[i.i18next(null,void 0,i(795521))]},{value:"EURONEXTLIS",name:"EURONEXTLIS",desc:i.i18next(null,void 0,i(138631)),flag:"portugal",group:"Europe",country:"pt",providerId:"",searchTerms:[i.i18next(null,void 0,i(958902))]},{value:"EURONEXTPAR",name:"EURONEXTPAR",desc:i.i18next(null,void 0,i(596269)),flag:"france",group:"Europe",country:"fr",providerId:"",searchTerms:[i.i18next(null,void 0,i(891160))]},{value:"OSL",name:"EURONEXTOSE",desc:i.i18next(null,void 0,i(742391)),flag:"norway",group:"Europe",country:"no",providerId:"",searchTerms:[i.i18next(null,void 0,i(723309))]},{value:"EUROTLX",name:"EUROTLX",desc:i.i18next(null,void 0,i(522546)),flag:"italy",group:"Europe",country:"it",providerId:"",searchTerms:[i.i18next(null,void 0,i(35146))]},{value:"OMX",name:"OMX",desc:i.i18next(null,void 0,i(785340)),flag:"europe",group:"Europe",country:"eu",providerId:""},{value:"FWB",name:"FWB",desc:i.i18next(null,void 0,i(649952)),flag:"germany",group:"Europe",country:"de",providerId:"",searchTerms:[i.i18next(null,void 0,i(403447))]},{value:"FRA",name:"FRA",desc:i.i18next(null,void 0,i(99036)),flag:"germany",hideInSymbolSearch:!0,group:"Europe",country:"de",providerId:"",searchTerms:[i.i18next(null,void 0,i(403447))]},{value:"SWB",name:"SWB",desc:i.i18next(null,void 0,i(698575)),flag:"germany",group:"Europe",country:"de",providerId:"",searchTerms:[i.i18next(null,void 0,i(403447))]},{value:"XETR",name:"XETR",desc:i.i18next(null,void 0,i(120304)),flag:"germany",group:"Europe",country:"de",providerId:"",searchTerms:[i.i18next(null,void 0,i(403447))]},{value:"BME",name:"BME",desc:i.i18next(null,void 0,i(66074)),flag:"spain",group:"Europe",country:"es",providerId:"",searchTerms:[i.i18next(null,void 0,i(174897))]},{value:"BSSE",name:"BSSE",desc:i.i18next(null,void 0,i(312536)),flag:"slovakia",group:"Europe",country:"sk",providerId:"",searchTerms:[i.i18next(null,void 0,i(742494))]},{value:"BVB",name:"BVB",desc:i.i18next(null,void 0,i(339762)),flag:"romania",group:"Europe",country:"ro",providerId:"",searchTerms:[i.i18next(null,void 0,i(700102))]},{value:"BET",name:"BET",desc:i.i18next(null,void 0,i(192321)),flag:"hungary",group:"Europe",country:"hu",providerId:"",searchTerms:[i.i18next(null,void 0,i(893317))]},{value:"GPW",name:"GPW",desc:i.i18next(null,void 0,i(494151)),flag:"poland",group:"Europe",country:"pl",providerId:"",searchTerms:[i.i18next(null,void 0,i(15112))]},{value:"NEWCONNECT",name:"GPW â€” NewConnect",desc:i.i18next(null,void 0,i(339484)),flag:"poland",group:"Europe",country:"pl",providerId:"",searchTerms:[i.i18next(null,void 0,i(15112))]},{
value:"LUXSE",name:"LUXSE",desc:i.i18next(null,void 0,i(981337)),flag:"luxembourg",group:"Europe",country:"lu",providerId:"",searchTerms:[i.i18next(null,void 0,i(681038))]},{value:"MIL",name:"MIL",desc:i.i18next(null,void 0,i(707917)),flag:"italy",group:"Europe",country:"it",providerId:"",searchTerms:[i.i18next(null,void 0,i(35146))]},{value:"NGM",name:"NGM",desc:i.i18next(null,void 0,i(242150)),flag:"sweden",group:"Europe",country:"se",providerId:"",searchTerms:[i.i18next(null,void 0,i(73412))]},{value:"BER",name:"BER",desc:i.i18next(null,void 0,i(404185)),flag:"germany",group:"Europe",country:"de",providerId:"",searchTerms:[i.i18next(null,void 0,i(403447))]},{value:"DUS",name:"DUS",desc:i.i18next(null,void 0,i(605654)),flag:"germany",group:"Europe",country:"de",providerId:"",searchTerms:[i.i18next(null,void 0,i(403447))]},{value:"HAM",name:"HAM",desc:i.i18next(null,void 0,i(10867)),flag:"germany",group:"Europe",country:"de",providerId:"",searchTerms:[i.i18next(null,void 0,i(403447))]},{value:"HAN",name:"HAN",desc:i.i18next(null,void 0,i(788921)),flag:"germany",group:"Europe",country:"de",providerId:"",searchTerms:[i.i18next(null,void 0,i(403447))]},{value:"MUN",name:"MUN",desc:i.i18next(null,void 0,i(491213)),flag:"germany",group:"Europe",country:"de",providerId:"",searchTerms:[i.i18next(null,void 0,i(403447))]},{value:"TRADEGATE",name:"TRADEGATE",desc:i.i18next(null,void 0,i(367542)),flag:"germany",group:"Europe",country:"de",providerId:"",searchTerms:[i.i18next(null,void 0,i(403447))]},{value:"GETTEX",name:"GETTEX",desc:i.i18next(null,void 0,i(410624)),flag:"germany",group:"Europe",country:"de",providerId:"finanzen",searchTerms:[i.i18next(null,void 0,i(403447))]},{value:"MILSEDEX",name:"MILSEDEX",desc:i.i18next(null,void 0,i(533977)),flag:"italy",group:"Europe",hideInSymbolSearch:!0,country:"it",providerId:"",searchTerms:[i.i18next(null,void 0,i(35146))]},{value:"IST",name:"IST",desc:i.i18next(null,void 0,i(835045)),flag:"turkey",hideInSymbolSearch:!0,group:"Europe",country:"tr",providerId:"",searchTerms:[i.i18next(null,void 0,i(929826))]},{value:"BIST",name:"BIST",desc:i.i18next(null,void 0,i(399366)),flag:"turkey",group:"Europe",country:"tr",providerId:"",searchTerms:[i.i18next(null,void 0,i(929826))]},{value:"TASE",name:"TASE",desc:i.i18next(null,void 0,i(292877)),flag:"israel",group:"Middle East / Africa",country:"il",providerId:"",searchTerms:[i.i18next(null,void 0,i(368291))]},{value:"SIX",name:"SIX",desc:i.i18next(null,void 0,i(706275)),flag:"switzerland",group:"Europe",country:"ch",providerId:"",searchTerms:[i.i18next(null,void 0,i(508058))]},{value:"BX",name:"BX",desc:i.i18next(null,void 0,i(643856)),flag:"switzerland",group:"Europe",country:"ch",providerId:"",searchTerms:[i.i18next(null,void 0,i(508058))]},{value:"PSECZ",name:"PSE",desc:i.i18next(null,void 0,i(267449)),flag:"czech",group:"Europe",country:"cz",providerId:"",searchTerms:[i.i18next(null,void 0,i(728962))]},{value:"ASX",name:"ASX",desc:i.i18next(null,void 0,i(560392)),flag:"australia",group:"Asia / Pacific",country:"au",providerId:"",
searchTerms:[i.i18next(null,void 0,i(722157))]},{value:"CHIXAU",name:"Cboe Australia",desc:i.i18next(null,void 0,i(896235)),flag:"australia",group:"Asia / Pacific",country:"au",providerId:"",searchTerms:[i.i18next(null,void 0,i(722157))]},{value:"VIE",name:"WB",desc:i.i18next(null,void 0,i(644040)),flag:"austria",group:"Europe",country:"at",providerId:"",searchTerms:[i.i18next(null,void 0,i(696600))]},{value:"DSEBD",name:"DSE",desc:i.i18next(null,void 0,i(402001)),flag:"bangladesh",group:"Asia / Pacific",country:"bd",providerId:"",searchTerms:[i.i18next(null,void 0,i(225040))]},{value:"NZX",name:"NZX",desc:i.i18next(null,void 0,i(157054)),flag:"new_zealand",group:"Asia / Pacific",country:"nz",providerId:"",searchTerms:[i.i18next(null,void 0,i(866103))]},{value:"SSE",name:"SSE",desc:i.i18next(null,void 0,i(66599)),flag:"china",group:"Asia / Pacific",country:"cn",providerId:"",searchTerms:[i.i18next(null,void 0,i(133470))]},{value:"SHFE",name:"SHFE",desc:i.i18next(null,void 0,i(562969)),flag:"china",group:"Asia / Pacific",country:"cn",providerId:"",searchTerms:[i.i18next(null,void 0,i(133470))]},{value:"SZSE",name:"SZSE",desc:i.i18next(null,void 0,i(50361)),flag:"china",group:"Asia / Pacific",country:"cn",providerId:"",searchTerms:[i.i18next(null,void 0,i(133470))]},{value:"ZCE",name:"ZCE",desc:i.i18next(null,void 0,i(36074)),flag:"china",group:"Asia / Pacific",country:"cn",providerId:"",searchTerms:[i.i18next(null,void 0,i(133470))]},{value:"HKEX",name:"HKEX",desc:i.i18next(null,void 0,i(111355)),flag:"hong_kong",group:"Asia / Pacific",country:"hk",providerId:"",searchTerms:[i.i18next(null,void 0,i(248861))]},{value:"PSE",name:"PSE",desc:i.i18next(null,void 0,i(842444)),flag:"philippines",group:"Asia / Pacific",country:"ph",providerId:"",searchTerms:[i.i18next(null,void 0,i(728919))]},{value:"PSX",name:"PSX",desc:i.i18next(null,void 0,i(225977)),flag:"pakistan",group:"Asia / Pacific",country:"pk",providerId:"",searchTerms:[i.i18next(null,void 0,i(917892))]},{value:"NSENG",name:"NSE",desc:i.i18next(null,void 0,i(929818)),flag:"nigeria",group:"Middle East / Africa",country:"ng",providerId:"",searchTerms:[i.i18next(null,void 0,i(591520))]},{value:"NSEKE",name:"NSE",desc:i.i18next(null,void 0,i(925499)),flag:"kenya",group:"Middle East / Africa",country:"ke",providerId:"",searchTerms:[i.i18next(null,void 0,i(981233))]},{value:"JSE",name:"JSE",desc:i.i18next(null,void 0,i(547946)),flag:"south_africa",group:"Middle East / Africa",country:"za",providerId:"",searchTerms:[i.i18next(null,void 0,i(663647))]},{value:"JFX",name:"JFX",desc:i.i18next(null,void 0,i(621448)),flag:"forex",group:"Forex",country:"",providerId:"jfx"},{value:"COINBASE",name:"Coinbase",desc:i.i18next(null,void 0,i(171533)),flag:"bitcoin",group:"Cryptocurrency",country:"",providerId:"coinbase"},{value:"CITYINDEX",name:"City Index",desc:i.i18next(null,void 0,i(900322)),flag:"forex",group:"Forex",country:"",providerId:"cityindex"},{value:"USI",name:"USI",desc:i.i18next(null,void 0,i(913682)),flag:"usa",hideInSymbolSearch:!0,group:"North America",country:"us",
providerId:"",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"OMXHEX",name:"HEX",desc:i.i18next(null,void 0,i(239593)),flag:"finland",group:"Europe",country:"fi",providerId:"",searchTerms:[i.i18next(null,void 0,i(223442))]},{value:"OMXICE",name:"ICEX",desc:i.i18next(null,void 0,i(45362)),flag:"iceland",group:"Europe",country:"is",providerId:"",searchTerms:[i.i18next(null,void 0,i(217499))]},{value:"OMXCOP",name:"CSE",desc:i.i18next(null,void 0,i(262384)),flag:"denmark",group:"Europe",country:"dk",providerId:"",searchTerms:[i.i18next(null,void 0,i(877527))]},{value:"OMXSTO",name:"STO",desc:i.i18next(null,void 0,i(161712)),flag:"sweden",group:"Europe",country:"se",providerId:"",searchTerms:[i.i18next(null,void 0,i(73412))]},{value:"OMXVSE",name:"VSE",desc:i.i18next(null,void 0,i(585254)),flag:"lithuania",group:"Europe",country:"lt",providerId:"",searchTerms:[i.i18next(null,void 0,i(868380))]},{value:"OMXTSE",name:"TALSE",desc:i.i18next(null,void 0,i(227465)),flag:"estonia",group:"Europe",country:"ee",providerId:"",searchTerms:[i.i18next(null,void 0,i(714153))]},{value:"OMXRSE",name:"OMXR",desc:i.i18next(null,void 0,i(280534)),flag:"latvia",group:"Europe",country:"lv",providerId:"",searchTerms:[i.i18next(null,void 0,i(262063))]},{value:"OMXNORDIC",name:"OMXNORDIC",desc:i.i18next(null,void 0,i(736331)),flag:"europe",hideInSymbolSearch:!0,group:"Europe",country:"eu",providerId:""},{value:"OMXBALTIC",name:"OMXBALTIC",desc:i.i18next(null,void 0,i(284173)),flag:"europe",hideInSymbolSearch:!0,group:"Europe",country:"eu",providerId:""},{value:"FRED",name:"FRED",desc:i.i18next(null,void 0,i(533754)),flag:"usa",group:"Economy",country:"",providerId:"fred2",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"ISM",name:"ISM",desc:i.i18next(null,void 0,i(716678)),flag:"usa",group:"Economy",country:"",providerId:"quandl_ism",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"FRBNY",name:"FRBNY",desc:i.i18next(null,void 0,i(636850)),flag:"usa",group:"Economy",country:"",providerId:"quandl_frbny",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"FRBP",name:"FRBP",desc:i.i18next(null,void 0,i(936560)),flag:"usa",group:"Economy",country:"",providerId:"quandl_frbp",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"ECONOMICS",name:"Trading Economics",desc:i.i18next(null,void 0,i(863968)),flag:"usa",group:"Economy",country:"",providerId:"economics",searchTerms:[i.i18next(null,void 0,i(232240)),i.i18next(null,void 0,i(836986))]},{value:"WHSELFINVEST",name:"WH SelfInvest",desc:i.i18next(null,void 0,i(24172)),flag:"forex",group:"Forex",country:"",providerId:"whselfinvest"}]},342707:(e,t,i)=>{"use strict";i.d(t,{formatStudyError:()=>o,triesTranslateError:()=>r});var n=i(444372);function r(e){return s.get(e)||e}function o(e){return e.format({boldHighlightStart:"<b>",boldHighlightEnd:"</b>"})}
const s=new Map([["You cannot see this pivot timeframe on this resolution",n.t(null,void 0,i(525059))],["The data vendor doesn't provide volume data for this symbol.",n.t(null,void 0,i(81657))],['Histogram is too large, please increase "Row Size" input.',n.t(null,void 0,i(872819))],["Histogram is too large, please reduce 'Row Size' input.",n.t(null,void 0,i(566751))],['Histogram is too large, please increase "Ticks Per Row" input.',n.t(null,void 0,i(594966))],["This script is invite-only. To request access, please contact its author.",n.t(null,void 0,i(276989))],["Volume Profile indicator available only on our upgraded plans.",n.t(null,void 0,i(139903))],["VOLUME_BIST_MIXED",n.t(null,void 0,i(469156))],["Runtime error",n.t(null,void 0,i(660630))],["Access error",n.t(null,void 0,i(377401))],["User-defined error",n.t(null,void 0,i(708580))],["Compilation error",n.t(null,void 0,i(212086))]])},876610:(e,t,i)=>{"use strict";function n(e){return e.includes(":")?e.split(":"):["",e]}i.d(t,{splitSymbolName:()=>n})},732047:(e,t,i)=>{"use strict";var n;i.d(t,{ACTION_ID:()=>n}),function(e){e.UnknownAction="UnknownAction",e.ChartChangeTimeZone="Chart.ChangeTimeZone",e.ChartLineToolPitchforkChangeTypeToInside="Chart.LineTool.Pitchfork.ChangeTypeToInside",e.ChartLineToolPitchforkChangeTypeToModifiedSchiff="Chart.LineTool.Pitchfork.ChangeTypeToModifiedSchiff",e.ChartLineToolPitchforkChangeTypeToOriginal="Chart.LineTool.Pitchfork.ChangeTypeToOriginal",e.ChartLineToolPitchforkChangeTypeToSchiff="Chart.LineTool.Pitchfork.ChangeTypeToSchiff",e.Loading="Loading"}(n||(n={}))},691371:(e,t,i)=>{"use strict";i.d(t,{Action:()=>a,Loader:()=>d,Separator:()=>l});var n=i(650151),r=i(942634),o=i(470316),s=i(79342);class a{constructor(e){this.type="action",this._destroyed=!1,this._loadOptionsPromise=null,this._customAction=null;const{actionId:t,options:i,optionsLoader:o,customActionOptions:l,customActionOptionsLoader:d,id:u=s.guid()}=e;(0,n.assert)(void 0!==t,"actionId must be defined"),this.id=u,this._onUpdate=new r.Delegate,this._options={actionId:t,...i},this.update(i),this._loadOptionsGetter=null!=o?o:null,this._loadOptionsGetter&&(this._options.loading=!0),l&&(this._customAction=new a({actionId:t,options:l,optionsLoader:d,id:u}))}custom(){return this._customAction}execute(){this._options.checkable&&this.update({checked:!this._options.checked}),this._options.onExecute&&this._options.onExecute(this)}getLabel(){return this._options.label||""}getSubItems(){return this._options.subItems||[]}isDisabled(){return!0===this._options.disabled}isActive(){return!0===this._options.active}isCheckable(){return!0===this._options.checkable}isChecked(){return!0===this._options.checked}isLoading(){return!0===this._options.loading}loadOptions(){return this._loadOptionsPromise?this._loadOptionsPromise:this._loadOptionsGetter?(this._loadOptionsPromise=this._loadOptionsGetter().then((e=>this.update({...e,loading:!1}))),this._loadOptionsPromise):null}getSize(){var e;return null!==(e=this._options.size)&&void 0!==e?e:"normal"}getPayload(){return this._options.payload}
update(e){this._destroyed||(this._unbindShortcut(),e.hotkeyHash&&(this._options.shortcutHint=(0,o.humanReadableHash)(e.hotkeyHash)),this._options=Object.assign(this._options,e),this._bindShortcut(),this._onUpdate.fire(this))}onUpdate(){return this._onUpdate}getState(){return this.loadOptions(),{actionId:this._options.actionId,label:this.getLabel(),styledLabel:this._options.styledLabel,disabled:this.isDisabled(),active:this.isActive(),subItems:this.getSubItems(),checkable:this.isCheckable(),checked:this.isChecked(),loading:this.isLoading(),size:this.getSize(),doNotCloseOnClick:this._options.doNotCloseOnClick||!1,shortcutHint:this._options.shortcutHint,hint:this._options.hint,icon:this._options.icon,iconId:this._options.iconId,iconChecked:this._options.iconChecked,toolbox:this._options.toolbox,showToolboxOnHover:this._options.showToolboxOnHover||!1,statName:this._options.statName,name:this._options.name,invisibleHotkey:this._options.invisibleHotkey,noInteractive:this._options.noInteractive,jsxLabel:"jsxLabel"in this._options?this._options.jsxLabel:void 0,isRepeatAccepted:this._options.isRepeatAccepted}}destroy(){var e,t,i;this._destroyed=!0,this._onUpdate.destroy(),this._unbindShortcut(),null===(t=(e=this._options).onDestroy)||void 0===t||t.call(e),null===(i=this._customAction)||void 0===i||i.destroy()}options(){return this._options}_bindShortcut(){if(!this._options.hotkeyGroup||!this._options.hotkeyHash)return;const e="string"==typeof this._options.label?this._options.label:this._options.name;this._hotkeyAction=this._options.hotkeyGroup.add({hotkey:this._options.hotkeyHash,isRepeatAccepted:this._options.isRepeatAccepted,desc:e,handler:()=>this.execute(),isDisabled:()=>this.isDisabled()})}_unbindShortcut(){this._hotkeyAction&&(this._hotkeyAction.destroy(),delete this._hotkeyAction)}}class l{constructor(e){this.type="separator",this.id=s.guid(),this._hint=e}getHint(){return this._hint}}class d extends a{constructor(e){super({actionId:e,options:{}})}isLoading(){return!0}getSize(){return"big"}}},621452:(e,t,i)=>{"use strict";i.d(t,{ContextMenuManager:()=>n});var n,r=i(828473),o=i(691371),s=i(224743);!function(e){let t=null,n=null;const a=[],l={createAction:e=>new o.Action({actionId:"Chart.CustomActionId",options:e}),createAsyncAction:e=>new o.Action({actionId:"Chart.CustomActionId",options:{},optionsLoader:e}),createSeparator:()=>new o.Separator};async function d(e,o={},s={menuName:""},d){null!==t&&(e=await t(e,l,s));let c=null;const h=()=>{const e=(0,r.indexOf)(a,(e=>e.renderer===c));-1!==e&&a.splice(e,1),void 0!==d&&d()};let p=!1;if(null!==n&&(c=await n(e,s,h)),c)p=!0,u();else{const t=await Promise.all([i.e(19966),i.e(53953),i.e(46489),i.e(75826),i.e(29800),i.e(23141),i.e(7001),i.e(71329),i.e(44066),i.e(32736),i.e(1198),i.e(82321),i.e(73788),i.e(91584)]).then(i.bind(i,977957));c=new t.ContextMenuRenderer(e,o,h,u)}return a.push({renderer:c,isExternal:p}),c}function u(){(0,s.globalCloseMenu)(),a.forEach((e=>{e.isExternal&&e.renderer.isShown()&&e.renderer.hide()}))}e.createMenu=d,e.showMenu=function(e,t,i={},n,r){
return d(e,i,n,r).then((e=>e.show(t)))},e.setCustomRendererFactory=function(e){n=e},e.setCustomItemsProcessor=function(e){t=e},e.hideAll=u,e.getShown=function(){for(let e=0;e<a.length;e++)if(a[e].renderer.isShown())return a[e].renderer;return null}}(n||(n={}))},219849:(e,t,i)=>{"use strict";i.d(t,{InvalidationLevel:()=>n,InvalidationMask:()=>a,defaultInvalidationLevel:()=>s});var n,r=i(650151),o=i(259336);!function(e){e[e.None=0]="None",e[e.Cursor=1]="Cursor",e[e.Light=2]="Light",e[e.Full=3]="Full"}(n||(n={}));const s=n.None;class a{constructor(e=s){this._panesOrderChanged=!1,this._keepVisibleTimeRangeOnResize=!1,this._timeAxisInvalidationLevel=s,this._invalidatedPanes=new Map,this._additionalActions=[],this._timeScaleInvalidations=[],this._invalidationLevel=e}invalidateAll(e){this._invalidationLevel!==e&&(this._invalidationLevel=Math.max(this._invalidationLevel,e),this._invalidatedPanes.forEach((e=>{e.invalidateAll(this._invalidationLevel)})))}invalidateAllPane(e,t){this._invalidatedPanes.has(e)||this._invalidatedPanes.set(e,new o.PaneInvalidationMask(this._invalidationLevel)),(0,r.ensureDefined)(this._invalidatedPanes.get(e)).invalidateAll(t)}invalidatePriceScale(e,t,i,n){this._invalidatedPanes.has(e)||this._invalidatedPanes.set(e,new o.PaneInvalidationMask(this._invalidationLevel)),(0,r.ensureDefined)(this._invalidatedPanes.get(e)).invalidatePriceScale(t,i,n)}invalidateTimeScale(e){this._timeAxisInvalidationLevel=Math.max(this._timeAxisInvalidationLevel,e)}invalidatePanesOrder(){this._panesOrderChanged=!0}lockVisibleTimeRangeOnResize(){this._keepVisibleTimeRangeOnResize=!0}fullInvalidation(){return this._invalidationLevel}maxPaneInvalidation(){const e=[];return this._invalidatedPanes.forEach((t=>{e.push(t.fullInvalidation())})),Math.max(...e,this._invalidationLevel)}invalidateForPane(e){return this._invalidatedPanes.get(e)||new o.PaneInvalidationMask(this._invalidationLevel)}invalidateForTimeScale(){return Math.max(this._timeAxisInvalidationLevel,this._invalidationLevel)}validationActions(){return this._additionalActions}addValidationAction(e){this._additionalActions.push(e)}merge(e){this._invalidationLevel=Math.max(this._invalidationLevel,e._invalidationLevel),this._panesOrderChanged=this._panesOrderChanged||e._panesOrderChanged,this._keepVisibleTimeRangeOnResize=this._keepVisibleTimeRangeOnResize||e._keepVisibleTimeRangeOnResize,this._invalidatedPanes.forEach((e=>{e.invalidateAll(this._invalidationLevel)})),e._invalidatedPanes.forEach(((e,t)=>{this._invalidatedPanes.has(t)||this._invalidatedPanes.set(t,new o.PaneInvalidationMask(this._invalidationLevel)),(0,r.ensureDefined)(this._invalidatedPanes.get(t)).merge(e)})),this._timeAxisInvalidationLevel=Math.max(this._timeAxisInvalidationLevel,e._timeAxisInvalidationLevel);for(let t=0;t<e._additionalActions.length;t++)this._additionalActions.push(e._additionalActions[t]);for(const t of e._timeScaleInvalidations)this._applyTimeScaleInvalidation(t)}panesOrderInvalidated(){return this._panesOrderChanged}isVisibleTimeRangeLockedOnResize(){
return this._keepVisibleTimeRangeOnResize}setTimeScaleAnimation(e,t){this._removeTimeScaleAnimation(),this._timeScaleInvalidations.push({type:0,value:e,rightOffsetPx:t})}stopTimeScaleAnimation(){this._removeTimeScaleAnimation(),this._timeScaleInvalidations.push({type:1})}timeScaleInvalidations(){return this._timeScaleInvalidations}static cursor(){return new a(n.Cursor)}static light(){return new a(n.Light)}static full(){return new a(n.Full)}static panesOrder(){const e=a.full();return e.invalidatePanesOrder(),e}static invalidateLegendWidgetLayout(e){var t;const i=new a;return i._invalidatedPanes.set(e,new o.PaneInvalidationMask),null===(t=i._invalidatedPanes.get(e))||void 0===t||t.invalidateLegendWidgetLayout(),i}static validateAction(e){const t=new a;return t._additionalActions.push(e),t}_applyTimeScaleInvalidation(e){switch(e.type){case 0:this.setTimeScaleAnimation(e.value,e.rightOffsetPx);break;case 1:this._removeTimeScaleAnimation()}}_removeTimeScaleAnimation(){var e,t;const i=this._timeScaleInvalidations.findIndex((e=>0===e.type));if(-1!==i){const[n]=this._timeScaleInvalidations.splice(i,1);null===(t=(e=n.value).onFinish)||void 0===t||t.call(e,!1)}}}},845520:(e,t,i)=>{"use strict";function n(e){var t,i,n,r,o,s,a,l;const d=null===(i=null===(t=window.widgetbar)||void 0===t?void 0:t.tradingPanelAccessor)||void 0===i?void 0:i.tradingPanel,u=!(null===(r=null===(n=window.widgetbar)||void 0===n?void 0:n.layout)||void 0===r?void 0:r.canOpen());(null==d?void 0:d.isOpened)&&u&&d.close();const c=null===(o=window.widgetbar)||void 0===o?void 0:o.setPage("pine_logs");null===(l=null===(a=null===(s=window.widgetbar)||void 0===s?void 0:s.layout)||void 0===a?void 0:a.widgetBar)||void 0===l||l.saveToTVSettings();const h=null==c?void 0:c.widget("pine_logs"),p=null==h?void 0:h.widgetObject;e?null==p||p.onSelectStudyFromChart(e):null==p||p.onOpenFromEditor()}i.d(t,{openPineLogsInRightPanel:()=>n})},956250:(e,t,i)=>{"use strict";i.d(t,{isUserStudyWithLogs:()=>o});var n=i(971417),r=i(757402);new Set([r.StudyStatusType.Error,r.StudyStatusType.Completed]);function o(e){if(null==e?void 0:e.metaInfo){const t=null==e?void 0:e.metaInfo(),i=t.graphics.logs,r=(0,n.extractPineId)(t.id),o=t.pine;return Boolean(o&&r&&(0,n.isCustomPineId)(r)&&i)}return!1}},411559:(e,t,i)=>{"use strict";i.d(t,{hourMinuteFormat:()=>s,hourMinuteNonZeroSecondFormat:()=>r,hourMinuteSecondFormat:()=>n,hourMinuteSecondMillisecFormat:()=>o,twelveHourMinuteFormat:()=>d,twelveHourMinuteNonZeroSecondFormat:()=>l,twelveHourMinuteSecondFormat:()=>a});const n="%h:%m:%s",r="%h:%m:%s+",o="%h:%m:%s.%ss+",s="%h:%m",a="%h:%m:%s %ampm",l="%h:%m:%s+ %ampm",d="%h:%m %ampm"},300484:(e,t,i)=>{"use strict";i.d(t,{TimeFormatter:()=>s,hourMinuteFormat:()=>o.hourMinuteFormat,hourMinuteNonZeroSecondFormat:()=>o.hourMinuteNonZeroSecondFormat,hourMinuteSecondFormat:()=>o.hourMinuteSecondFormat,hourMinuteSecondMillisecFormat:()=>o.hourMinuteSecondMillisecFormat,twelveHourMinuteFormat:()=>o.twelveHourMinuteFormat,twelveHourMinuteNonZeroSecondFormat:()=>o.twelveHourMinuteNonZeroSecondFormat,
twelveHourMinuteSecondFormat:()=>o.twelveHourMinuteSecondFormat});var n=i(339709),r=i(574313),o=i(411559);class s{constructor(e){this._isTwelveHoursFormat=!1,this._valuesAndDelimeters=[];const t=e||o.hourMinuteSecondFormat,i=new RegExp("%h|%m|%s\\+|%ss\\+|%ss|%ampm|%s","g");let n=i.exec(t),r=0;for(;null!==n;){const e=n[0];"%ampm"===e&&(this._isTwelveHoursFormat=!0);const o=t.substring(r,n.index);""!==o&&this._valuesAndDelimeters.push(o),this._valuesAndDelimeters.push(e),r=n.index+e.length,n=i.exec(t)}}format(e){return n.customFormatters.timeFormatter?n.customFormatters.timeFormatter.format(e):this._formatTime(e,!1)}formatLocal(e){return n.customFormatters.timeFormatter?n.customFormatters.timeFormatter.formatLocal?n.customFormatters.timeFormatter.formatLocal(e):n.customFormatters.timeFormatter.format(e):this._formatTime(e,!0)}_formatTime(e,t){let i=t?e.getHours():e.getUTCHours();const n=t?e.getMinutes():e.getUTCMinutes(),o=t?e.getSeconds():e.getUTCSeconds(),s=t?e.getMilliseconds():e.getUTCMilliseconds();let a="";this._isTwelveHoursFormat&&(a=i>=12?"PM":"AM",i%=12,i=i||12);let l="",d=!1;for(let e=this._valuesAndDelimeters.length-1;e>=0;e--){const t=this._valuesAndDelimeters[e];let u;switch(t){case"%h":u=(0,r.numberToStringWithLeadingZero)(i,2);break;case"%m":u=(0,r.numberToStringWithLeadingZero)(n,2);break;case"%s+":0!==o?u=(0,r.numberToStringWithLeadingZero)(o,2):(u="",d=!0);break;case"%s":u=(0,r.numberToStringWithLeadingZero)(o,2);break;case"%ss":u=(0,r.numberToStringWithLeadingZero)(s,3);break;case"%ss+":0!==s?u=(0,r.numberToStringWithLeadingZero)(s,3):(u="",d=!0);break;case"%ampm":u=a;break;default:if(d){d=!1;continue}u=t}l=u+l}return l}}},985429:(e,t,i)=>{"use strict";i.d(t,{intervalsVisibilitiesDefaults:()=>n});const n={ticks:!0,seconds:!0,secondsFrom:1,secondsTo:59,minutes:!0,minutesFrom:1,minutesTo:59,hours:!0,hoursFrom:1,hoursTo:24,days:!0,daysFrom:1,daysTo:366,weeks:!0,weeksFrom:1,weeksTo:52,months:!0,monthsFrom:1,monthsTo:12,ranges:!0}},124066:(e,t,i)=>{"use strict";var n;i.d(t,{SymbolErrorPermissionDeniedReason:()=>n,invalidSymbol:()=>o,permissionDenied:()=>r}),function(e){e.Symbol="symbol",e.GroupPermission="group"}(n||(n={}));const r="permission denied",o="invalid symbol"},817464:(e,t,i)=>{"use strict";i.d(t,{LineDataSource:()=>X});var n=i(86441),r=i(650151),o=i(251954),s=i(338619),a=i(764829),l=i(269665),d=i(870045),u=i(942634),c=i(387964),h=i(124829),p=i(447935),m=i(771702),v=i(39510),g=i(354957),f=i(100716),y=i(375397),x=i(219849),_=i(395394),I=i(412788),T=i(985429),w=i(975179),b=i(157504),S=i(378975),P=i(658843),E=i(419283),C=i(903424),A=i(389276),L=i(169532),D=i(487945),M=i(896123),N=i(295829),B=i(735815),V=i(129824),k=i(23666),R=i(889301),O=i(211183);const F=(0,s.getLogger)("Chart.LineDataSource"),z=a.enabled("datasource_copypaste");class H{constructor(){this._states=[]}start(e){this._states.push(e)}finish(e){const t=(0,r.ensureDefined)(this._states.pop());return n=t,(i=e).length!==n.length?{indexesChanged:!0,pricesChanged:!0}:i.reduce(((e,t,i)=>{const r=n[i]
;return e.indexesChanged=e.indexesChanged||t.index!==r.index,e.pricesChanged=e.pricesChanged||t.price!==r.price,e}),{indexesChanged:!1,pricesChanged:!1});var i,n}isEmpty(){return 0===this._states.length}}let U=0;class X extends C.DataSource{constructor(e,t,i,n){if(super(n),this.version=1,this.toolname="",this.customization={forcePriceAxisLabel:!1,disableErasing:!1,disableSave:!1,showInObjectsTree:!0},this._currentPointsetAndSymbolId=null,this._pointChanged=new u.Delegate,this._pointAdded=new u.Delegate,this._priceAxisViews=[],this._timeAxisViews=[],this._timePoint=[],this._points=[],this._lastPoint=null,this._paneViews=new Map,this._normalizedPointsChanged=new u.Delegate,this._fixedPointsChanged=new u.Delegate,this._changeStatesStack=new H,this._startMovingPoint=null,this._currentMovingPoint=null,this._isActualSymbol=!1,this._isActualInterval=!1,this._isActualCurrency=!1,this._isActualUnit=!1,this._sharingMode=new y.WatchedValue(0),this._onTemplateApplying=new u.Delegate,this._onTemplateApplied=new u.Delegate,this._syncStateExclusions=[],this._definitionsViewModel=null,this._syncLineStyleMuted=!1,this._onIsActualIntervalChange=new u.Delegate,this._onPointsetUpdatedDelegate=new u.Delegate,this._linkKey=new y.WatchedValue(null),this._serverUpdateTime=null,this._boundCalcIsActualSymbol=this.calcIsActualSymbol.bind(this),this._alignerCache=null,this._alertUndoMode=!1,this._onAlertStatusChanged=()=>{this.updateAllViewsAndRedraw((0,L.sourceChangeEvent)(this.id()))},this._model=e,this._properties=t,this._localAndServerAlertsMismatch=!1,this._properties.hasChild("interval")||this._properties.addChild("interval",new P.Property(e.mainSeries().interval())),this.calcIsActualSymbol(),this._properties.childs().intervalsVisibilities.listeners().subscribe(this,this.calcIsActualSymbol),this._properties.subscribe(this,(()=>this.propertiesChanged())),this._createPointsProperties(),this.pointsCount()>0)for(let e=0;e<this.pointsCount();e++)this._priceAxisViews.push(this.createPriceAxisView(e)),this._timeAxisViews.push(new B.LineDataSourceTimeAxisView(this,e));this._properties.childs().visible.subscribe(this,(e=>{const t=!1===(0,E.hideAllDrawings)().value();e.value()?e.value()&&t&&o.emit("drawing_event",this._id,"show"):(this._model.selection().isSelected(this)&&this._model.selectionMacro((e=>{e.removeSourceFromSelection(this)})),t&&o.emit("drawing_event",this._id,"hide")),this._onSourceHiddenMayChange()})),(0,E.hideAllDrawings)().subscribe(this,this._onSourceHiddenMayChange),this._sessionConnected=this._model.chartApi().isConnected().spawn(),this._sessionConnected.subscribe((e=>{e||(this._currentPointsetAndSymbolId=null)})),this._alertStatus.subscribe(this._onAlertStatusChanged),this._definitionsViewModel=null}destroy(){this._paneViews.forEach(((e,t)=>this._destroyPanePaneViews(t))),this.stop(),null!==this._definitionsViewModel&&(this._definitionsViewModel.destroy(),this._definitionsViewModel=null),null!==this._ownerSource&&(this._ownerSource.currencyChanged().unsubscribeAll(this),this._ownerSource.unitChanged().unsubscribeAll(this),(0,
D.isSymbolSource)(this._ownerSource)&&(this._ownerSource.symbolResolved().subscribe(this,this._boundCalcIsActualSymbol),this._ownerSource.isActingAsSymbolSource().unsubscribe(this._boundCalcIsActualSymbol))),this.ownerSourceChanged().unsubscribeAll(this),(0,E.hideAllDrawings)().unsubscribeAll(this),this.deleteAlert(),this._sessionConnected.destroy(),this._alertStatus.unsubscribe(this._onAlertStatusChanged),super.destroy()}priceScale(){return this._ownerSource?this._ownerSource.priceScale():null}createPriceAxisView(e){return new V.LineToolPriceAxisView(this,{pointIndex:e})}model(){return this._model}symbol(){return this._properties.childs().symbol.value()}linkKey(){return this._linkKey}serverUpdateTime(){return this._serverUpdateTime}setServerUpdateTime(e){this._serverUpdateTime=e}boundToSymbol(){return!0}isAvailableInFloatingWidget(){return!0}points(){const e=[];for(let t=0;t<this._points.length;t++){const i=this._points[t];e.push({index:i.index,price:i.price,time:i.time})}return this._lastPoint&&e.push(this._correctLastPoint(this._lastPoint)),!this.isFixed()&&this._currentMovingPoint&&this._startMovingPoint&&this._correctPoints(e),e}timeAxisPoints(){return this.points()}priceAxisPoints(){return this.points()}fixedPoint(){var e;let t;const i=this.priceScale();if(this._positionPercents&&null!==i&&!i.isEmpty()){const e=this._positionPercents,r=this._model.timeScale().width()*e.x,o=i.height()*e.y;t=new n.Point(r,o)}else void 0!==this._fixedPoint&&(t=null===(e=this._fixedPoint)||void 0===e?void 0:e.clone());if(this._currentMovingPoint&&this._startMovingPoint&&void 0!==t){const e=this._correctFixedPoint(t);e.didCorrect&&(t=e.point)}return t}positionPercents(){return this._positionPercents}normalizedPoints(){return this._timePoint}normalizedPointsForCreating(){return this.normalizedPoints()}normalizedPointsChanged(){return this._normalizedPointsChanged}fixedPointChanged(){return this._fixedPointsChanged}geometry(){const e=(0,r.ensureNotNull)(this.priceScale());return this.points().map((t=>{const i=(0,r.ensureNotNull)(this.pointToScreenPoint(t)),o=i.x/this._model.timeScale().width(),s=i.y/e.height();return new n.Point(o,s)}))}widthsProperty(){var e;return null!==(e=this._properties.childs().linesWidths)&&void 0!==e?e:null}lineColorsProperty(){var e;return null!==(e=this._properties.childs().linesColors)&&void 0!==e?e:null}backgroundColorsProperty(){var e;return null!==(e=this._properties.childs().backgroundsColors)&&void 0!==e?e:null}textColorsProperty(){var e;return null!==(e=this._properties.childs().textsColors)&&void 0!==e?e:null}pointsProperty(){return this._pointsProperty}hasEditableCoordinates(){return!0}startMoving(e,t,i,n){this.isFixed()&&this.restoreFixedPoint(),this._startMovingPoint=e}move(e,t,i,n){if(i&&(i.shiftOnly()||i.modShift()))if(this.isFixed()){const t=this._alignScreenPointHorizontallyOrVertically((0,r.ensureDefined)(e.screen));this._currentMovingPoint={screen:t}}else{const t=this._alignPointHorizontallyOrVertically((0,r.ensureDefined)(e.logical)),i=(0,r.ensureNotNull)(this.pointToScreenPoint(t))
;this._currentMovingPoint={logical:t,screen:i}}else this._currentMovingPoint=e;this.updateAllViews((0,L.sourceChangeEvent)(this.id()))}endMoving(e,t,i){let n=!1,s=!1;if(this._currentMovingPoint&&this._startMovingPoint){if(this.isFixed()){const e=this._correctFixedPoint((0,r.ensureDefined)(this._fixedPoint));e.didCorrect&&(this._fixedPoint=e.point,this._fixedPointsChanged.fire())}else{const e=(0,r.ensureDefined)(this._currentMovingPoint.logical),t=(0,r.ensureDefined)(this._startMovingPoint.logical);n=e.index!==t.index,s=e.price!==t.price;if(this._correctPoints(this._points,i)){o.emit("drawing_event",this._id,"move"),o.emit("drawing_event",this._id,"points_changed");for(let e=0;e<this._points.length;e++)this._pointChanged.fire(e)}}this._startMovingPoint=null,this._currentMovingPoint=null}const a={indexesChanged:n,pricesChanged:s};return this.isFixed()?(this.calcPositionPercents(),this.updateAllViews((0,L.sourceChangeEvent)(this.id())),a):(this.updateAllViews((0,L.sourceChangeEvent)(this.id())),n&&!e?(this._properties.childs().interval.setValue(this._model.mainSeries().interval()),this._normalizePoints(),this.createServerPoints()):(this._copyPricesWithoutNormalization(),this._normalizedPointsChanged.fire()),t||!s&&!n||this.synchronizeAlert(!this._alertUndoMode),a)}startMovingPoint(){return this._startMovingPoint?{...this._startMovingPoint}:null}currentMovingPoint(){return this._currentMovingPoint?{...this._currentMovingPoint}:null}startChanging(e,t){void 0!==e&&void 0!==t&&(e<this._priceAxisViews.length&&this._priceAxisViews[e].setActive(!0),e<this._timeAxisViews.length&&this._timeAxisViews[e].setActive(!0)),this._changeStatesStack.start(this.points())}endChanging(e,t,i){const n=this._changeStatesStack.finish(this.points());n.indexesChanged&&this._changeStatesStack.isEmpty()?(this._properties.childs().interval.setValue(this._model.mainSeries().interval()),this._normalizePoints(),t||this.createServerPoints()):(this._copyPricesWithoutNormalization(),this._normalizedPointsChanged.fire()),o.emit("drawing_event",this._id,"points_changed");for(let e=0;e<this._priceAxisViews.length;e++)this._priceAxisViews[e].setActive(!1);for(let e=0;e<this._timeAxisViews.length;e++)this._timeAxisViews[e].setActive(!1);return i||this.synchronizeAlert(!e),n}setPoint(e,t,i,n){if(this._snapTo45DegreesApplicable(i)){const i=0===e?1:e-1;this.snapPoint45Degree(t,this.points()[i])}this._setPoint(e,t)}getPoint(e){return this.points()[e]||null}alignCrossHairToAnchor(e){return!0}alignCrossHairToMovePoint(){return!1}setLastPoint(e,t){return this._lastPoint=this._preparePoint(e,t),this.updateAllViews((0,L.sourceChangeEvent)(this.id())),this._lastPoint}lastPoint(){return this._lastPoint}getChangePointForSync(e){return this.getPoint(e)}setPoints(e){this._points=e}isForcedDrawPriceAxisLabel(){return this.customization.forcePriceAxisLabel}clearData(){this._points=[]}denormalizeTimePoints(){let e=[];for(let t=0;t<this._timePoint.length;t++){const i=this._model.timeScale().denormalizeTimePoint(this._timePoint[t]);if(void 0===i){e=[];break}e.push({index:i,
price:this._timePoint[t].price})}e.length>0&&(this._points=e)}restorePoints(e,t,i){const n=this._timePoint.length>0&&!(0,h.deepEquals)(this._timePoint,e)[0];this._timePoint=(0,c.deepCopy)(e),this._points=t,i||this.denormalizeTimePoints(),n&&this._normalizedPointsChanged.fire()}restorePositionPercents(e){this._positionPercents=e}calcIsActualSymbol(){const e=this.ownerSource();if(null===e)this._isActualSymbol=!1;else{const t=(0,r.ensureNotNull)(e.symbolSource()),i=t.symbolInfo();if(i){this._migrateSymbolProperty(i);const e=this._properties.childs().symbol,n=e.value();if(this._isActualSymbol=t.symbolSameAsCurrent(n),this._isActualSymbol){const r=(0,w.extractLineToolSymbolFromSymbolInfo)(i,t.symbol());(0,b.areEqualSymbols)(n,r)||(F.logWarn('Possible drawing "migrating" detected from "'+n+'" to "'+r+'"'),F.logWarn("Series symbolInfo: "+JSON.stringify(t.symbolInfo())),F.logWarn(`${(new Error).stack}`)),e.setValue(r)}}}this.calcIsActualInterval(),this.calcIsActualCurrency(),this.calcIsActualUnit(),this._onSourceHiddenMayChange()}calcIsActualCurrency(){const e=this.ownerSource();if(null===e)return void(this._isActualCurrency=!1);let t=this._properties.childs().currencyId.value();if(null!==t){const i=e.symbolSource();"pct"===t&&(this._properties.childs().currencyId.setValue(null),t=null),this._isActualCurrency=t===(0,w.symbolCurrency)(i.symbolInfo(),void 0,!0)}else{const t=(0,r.ensureNotNull)(e.symbolSource());this._isActualCurrency=null!==t.symbolInfo()&&!t.isConvertedToOtherCurrency()}this._onSourceHiddenMayChange()}calcIsActualUnit(){const e=this.ownerSource();if(null===e)return void(this._isActualUnit=!1);const t=this._properties.childs().unitId.value();if(null!==t)this._isActualUnit=t===(0,r.ensureNotNull)(e.symbolSource()).unit();else{const t=(0,r.ensureNotNull)(e.symbolSource());this._isActualUnit=null!==t.symbolInfo()&&!t.isConvertedToOtherUnit()}this._onSourceHiddenMayChange()}calcIsActualInterval(){const e=this._isActualInterval,t=this._properties,i=this._model.mainSeries();this._isActualInterval=(0,I.isActualInterval)(S.Interval.parse(i.interval()),t.childs().intervalsVisibilities),!this._isActualInterval&&this._model.selection().isSelected(this)&&this._model.selectionMacro((e=>e.removeSourceFromSelection(this))),this._isActualInterval!==e&&this._onIsActualIntervalChange.fire(),this._onSourceHiddenMayChange()}paneViews(e){if(this.isSourceHidden())return null;const t=this._getPaneViews(this.isMultiPaneAvailable()?e:void 0);if(null===t)return null;if(1===t.length)return[t[0]];const i=[];for(let e=t.length-1;e>=0;--e)i.push(t[e]);return i}priceAxisViews(e,t){if(t!==this.priceScale()||this.isSourceHidden())return null;if(this._model.lineBeingEdited()===this){const e=this._model.linePointBeingEdited();if(null!==e&&e<this._priceAxisViews.length){const t=this._priceAxisViews.slice(),i=t[e];return t.splice(e,1),t.push(i),t}return this._priceAxisViews}return this._priceAxisViews}timeAxisViews(){if(this.isSourceHidden())return null;if(this._model.lineBeingEdited()===this){const e=this._model.linePointBeingEdited()
;if(null!==e&&e<this._timeAxisViews.length){const t=this._timeAxisViews.slice(),i=t[e];return t.splice(e,1),t.push(i),t}return this._timeAxisViews}return this._timeAxisViews}isSavedInChart(){return!this.customization.disableSave}isSavedInStudyTemplates(){return!1}setSavingInChartEnabled(e){this.customization.disableSave=!e}shouldBeRemovedOnDeselect(){return!1}getOrderTemplate(){return null}getSourceIcon(){return{type:"loadSvg",svgId:"linetool."+this.toolname}}alertId(){return this._alertId}async waitSettingAlertId(){this._pendingAlertIdPromise&&(this._alertId=await this._pendingAlertIdPromise)}async setAlert(e,t={}){if(!this.canHasAlert())throw new Error("Line data source can not has alert");if(this._pendingAlertIdPromise)return void F.logWarn("Setting alert of line data source will be ignored because alert is already being set");if((0,h.isPromise)(e)){this._pendingAlertIdPromise=e;try{await this.waitSettingAlertId()}finally{delete this._pendingAlertIdPromise}}else this._alertId=e;const i=(0,r.ensureDefined)(this._alertId);this._hasAlert.setValue(!0),this._alertStatus.setValue(1),this._removeAlertSubscriptions(),await this._syncAlertWithAlertFacade(t);const n=this.linkKey().value();null===n||t.sync||(0,E.changeLineStyle)({linkKey:n,model:this._model,state:{},alertId:i})}async restoreAlert(e,t){if(!this.canHasAlert())throw new Error("Line data source can not has alert");this._alertId=e,this._hasAlert.setValue(!0);try{const e=await this.getAlert();if(!e)return;this._addAlertSubscriptions(e,t)}catch(e){this._removeAlertSubscriptions()}}editAlert(e){this.hasAlert().value()&&(0,p.getChartAlertsFacade)().then((t=>{t.openEditDialog((0,r.ensureDefined)(this._alertId),{dataSourceHub:this._model,actionSource:e,onAborted:e=>{e===f.AlertEditorAbortReason.AlertIsInvalid&&this.removeAlert()}})}))}async getAlert(){try{const e=await this._getChartAlert();if(!e)throw F.logError("Failed to get alert, alert will not be saved with drawing in chart"),new Error("got_no_alert");return e}catch(e){if("not_exists"===e)throw new Error(e);return F.logError(`Getting alert failed: ${e instanceof Error?e.message:e}`),null}}getAlertSync(){var e;if(!this._alertId)return null;const t=(0,p.getChartAlertsFacadeIfCreatedBefore)();return null===t?null:null!==(e=t.getAlertSync(this._alertId))&&void 0!==e?e:null}async synchronizeAlert(e=!1){if(this.hasAlert().value()||this._pendingAlertIdPromise)return new Promise(((t,i)=>{setTimeout((async()=>{if(!this._isDestroyed)try{await this.waitSettingAlertId(),0===this._alertStatus.value()&&await this._syncAlertWithAlertFacade(),this.hasAlert().value()&&this._synchronizeAlert(e),t()}catch(e){i(e)}}),0)}))}syncAlert(e){this.hasAlert().value()||this.setAlert(e,{sync:!0})}stateForAlert(){if(!this.canHasAlert())return null;const e={...this.state(),id:this.idForAlert(),uniqueId:this.idForAlert(),title:this.translatedType(),interval:this._model.mainSeries().interval()},t=this._getAlertPlots();return t&&t.length>0&&(e.plots=t),e}getAlertIsActive(){if(!this._alertId)return!1;const e=this.getAlertSync()
;return Boolean(e&&e.active().value())}detachAlert(){this._removeAlertSubscriptions(),this._hasAlert.setValue(!1),this._alertId=void 0,this._alertStatus.setValue(0)}removeAlert(){this._alertId=void 0,this._hasAlert.setValue(!1),this._alertStatus.setValue(0),this._removeAlertSubscriptions()}deleteAlert(){if(!this.hasAlert().value()||void 0===this._alertId)return;const e=(0,p.getChartAlertsFacadeIfCreatedBefore)();e&&e.deleteAlert(this._alertId),this.removeAlert()}areLocalAndServerAlertsMismatch(){return this._localAndServerAlertsMismatch}showInObjectTree(){return this.customization.showInObjectsTree}setShowInObjectsTreeEnabled(e){this.customization.showInObjectsTree=e}start(){this.createServerPoints()}processHibernate(){this.canBeHibernated()?this.isStarted()&&this.stop():this.isStarted()||this.start()}canBeHibernated(){return this.isSourceHidden()}onData(e){"pointset_error"!==e.method?e.params.customId===this._currentPointsetIdWithPrefix()&&this._onPointsetUpdated(e.params.plots):F.logError(`Error getting pointset: ${e.params[0]} ${e.params[1]}`)}isBeingEdited(){return this===this._model.lineBeingEdited()}isActualSymbol(){return this._isActualSymbol}isActualCurrency(){return this._isActualCurrency}isActualInterval(){return this._isActualInterval}isActualUnit(){return this._isActualUnit}onIsActualIntervalChange(){return this._onIsActualIntervalChange}setOwnerSource(e){null!==this._ownerSource&&(this._ownerSource.currencyChanged().unsubscribeAll(this),this._ownerSource.unitChanged().unsubscribeAll(this)),null!==this._ownerSource&&(0,D.isSymbolSource)(this._ownerSource)&&(this._ownerSource.symbolResolved().unsubscribe(this,this._boundCalcIsActualSymbol),this._ownerSource.isActingAsSymbolSource().unsubscribe(this._boundCalcIsActualSymbol)),super.setOwnerSource(e),e&&(this.setPriceScale(e.priceScale()),e.currencyChanged().subscribe(this,this.calcIsActualCurrency),e.unitChanged().subscribe(this,this.calcIsActualUnit),this.calcIsActualSymbol(),this._migrateZOrder(),this._updateAlertCreationAvailable()),(0,D.isSymbolSource)(e)&&(e.symbolResolved().subscribe(this,this._boundCalcIsActualSymbol),e.isActingAsSymbolSource().subscribe(this._boundCalcIsActualSymbol))}dataAndViewsReady(){return this._paneViews.size>0}pointAdded(){return this._pointAdded}pointChanged(){return this._pointChanged}pointsetUpdated(){return this._onPointsetUpdatedDelegate}pointToScreenPoint(e){var t;const i=this._model.timeScale(),r=this.priceScale(),o=null===(t=this.ownerSource())||void 0===t?void 0:t.firstValue();if(!r||r.isEmpty()||i.isEmpty()||null==o)return null;const s=i.indexToCoordinate(e.index),a=r.priceToCoordinate(e.price,o);return new n.Point(s,a)}screenPointToPoint(e){var t;const i=this.priceScale(),n=null===(t=this.ownerSource())||void 0===t?void 0:t.firstValue();if(null==n||!isFinite(n)||null===i)return null;const r=this._model.timeScale().coordinateToIndex(e.x);return{price:i.coordinateToPrice(e.y,n),index:r}}calcMiddlePoint(e,t){return new n.Point((e.x+t.x)/2,(e.y+t.y)/2)}addPoint(e,t,i){const n=this._preparePoint(e,t)
;return this._addPointIntenal(n,t,i)}addFixedPoint(e){return this._fixedPoint=e,this.calcPositionPercents(),!0}calcPositionPercents(){const e=this.priceScale();if(!e||e.isEmpty()||void 0===this._fixedPoint)return;const t=this._fixedPoint.x/this._model.timeScale().width(),i=this._fixedPoint.y/e.height();return this._positionPercents={x:t,y:i},this._positionPercents}restoreFixedPoint(){this._fixedPoint=this.fixedPoint()}propertiesChanged(e){this.calcIsActualInterval(),this.updateAllViewsAndRedraw((0,L.sourceChangeEvent)(this.id())),e||this._syncLineStyleIfNeeded(),void 0===this._pendingPropertyChangedEvent&&(this._pendingPropertyChangedEvent=setTimeout((()=>{this._pendingPropertyChangedEvent=void 0,o.emit("drawing_event",this._id,"properties_changed")}),0))}state(e){var t;const i={type:this.toolname,id:this.id(),state:this.properties().state(this._propertiesStateExclusions()),points:(0,c.deepCopy)(this._timePoint),zorder:this.zorder(),ownerSource:null===(t=this.ownerSource())||void 0===t?void 0:t.id()};return this.linkKey().value()&&(i.linkKey=this.linkKey().value()),0!==this._sharingMode.value()&&(i.sharingMode=this._sharingMode.value()),delete i.state.points,e&&(i.indexes=this._points),this.isFixed()&&(i.positionPercents=this._positionPercents||this.calcPositionPercents()),"version"in this&&1!==this.version&&(i.version=this.version),this._saveAlertIdInState()&&this.hasAlert().value()&&void 0!==this._alertId&&(i.alertId=this._alertId),i}updateAllViews(e){this._isActualSymbol&&this._isActualCurrency&&this._isActualUnit&&this._isActualInterval&&this._properties.childs().visible.value()&&(this._updateAllPaneViews(e),this._priceAxisViews.forEach((t=>t.update(e))),this._timeAxisViews.forEach((t=>t.update(e))))}updateAllViewsAndRedraw(e){this.updateAllViews(e),this._model.updateSource(this)}tags(){return[this.toolname]}properties(){return this._properties}restoreExternalPoints(e,t){if(this._timePoint=(0,c.deepCopy)(e.points),t.indexesChanged){if(this.properties().childs().interval.setValue(e.interval),!this.isActualSymbol())return this._clearServerPoints(),void this._normalizedPointsChanged.fire();this.createServerPoints()}else{const t=Math.min(this._points.length,e.points.length);for(let i=0;i<t;i++)this._points[i].price=e.points[i].price}this._normalizedPointsChanged.fire()}restoreExternalState(e){this.properties().mergeAndFire(e)}applyTemplate(e){this._onTemplateApplying.fire(e),this._applyTemplateImpl(e),this.calcIsActualSymbol(),this.updateAllViews((0,L.sourceChangeEvent)(this.id())),this.model().lightUpdate(),this._onTemplateApplied.fire()}template(){return this.properties().preferences()}isFixed(){return!1}isLocked(){const e=this.properties().child("frozen");return void 0!==e&&e.value()}isSourceHidden(){return!this._properties.childs().visible.value()||(0,E.hideAllDrawings)().value()&&this.canBeHidden()||!this._isActualInterval||!this._isActualSymbol||!this._isActualCurrency||!this._isActualUnit}isSynchronizable(){return this.priceScale()===this._model.mainSeries().priceScale()}copiable(){return z}cloneable(){
return null!==this._ownerSource&&null!==this._ownerSource.firstValue()}movable(){return!0}async getPropertyDefinitionsViewModel(){if(null===this._definitionsViewModel){const e=await this._getPropertyDefinitionsViewModelClass();return null===e||this._isDestroyed?null:(this._definitionsViewModel=new e(this._model.undoModel(),this),this._definitionsViewModel)}return this._definitionsViewModel}title(){return this.translatedType()}translatedType(){var e;return null!==(e=R.lineToolsLocalizedNames[this.toolname])&&void 0!==e?e:"Line Tool"}name(){return"Line Tool"}createServerPoints(){if(!this._isActualSymbol)return;if(!this._model.chartApi().isConnected().value())return;if(this._clearServerPoints(),this._model.timeScale().isEmpty())return;if(0===this._timePoint.length&&this._points.length>0&&this._normalizePoints(),!this._readyToCreatePointset())return;const e=this._pointsForPointset();if(0===e.length)return;++U,this._currentPointsetAndSymbolId={pointsetId:U,symbolId:(0,r.ensureNotNull)(this._model.mainSeries().seriesSource().symbolInstanceId())};const t=(0,_.getServerInterval)(this.properties().childs().interval.value());this._model.chartApi().createPointset(this._currentPointsetIdWithPrefix(),"turnaround",this._currentPointsetAndSymbolId.symbolId,t,e,this.onData.bind(this))}finish(){}realign(){var e;this.calcIsActualSymbol(),this.isFixed()||this.isSourceHidden()||this._model.lineBeingCreated()===this||this._model.lineBeingEdited()===this||(null===(e=this._currentPointsetAndSymbolId)||void 0===e?void 0:e.symbolId)===this._model.mainSeries().seriesSource().symbolInstanceId()||this._clearServerPoints(),null===this._model.mainSeries().symbolInfo()&&(this._alignerCache=null),this.updateAllViews((0,L.sourceChangeEvent)(this.id()))}stop(){this._clearServerPoints()}restart(){this.isFixed()||(this._currentPointsetAndSymbolId=null,this.createServerPoints())}isStarted(){return null!==this._currentPointsetAndSymbolId}convertYCoordinateToPriceForMoving(e,t){var i;const n=(0,r.ensureNotNull)(this.priceScale());if(n.isEmpty())return null;const o=this.ownerSource(),s=(0,r.ensure)(null===(i=o||t)||void 0===i?void 0:i.firstValue());return n.coordinateToPrice(e,s)}syncMultichartState(e){const t={points:this._timePoint,interval:this._model.mainSeries().interval()},i=this.linkKey().value();if(null!==i&&this.isSynchronizable()){const n={model:this._model,linkKey:i,symbol:this._model.mainSeries().symbol(),finalState:t,changes:e};(0,E.finishChangingLineTool)(n)}}enableCurrentIntervalVisibility(){let e=this.properties().childs().intervalsVisibilities.state();void 0!==e&&(e=(0,I.mergeIntervalVisibilitiesDefaults)(e),(0,I.makeIntervalsVisibilitiesVisibleAtInterval)(e,this._model.mainSeries().intervalObj()),this.properties().childs().intervalsVisibilities.mergeAndFire(e))}clonePositionOffset(){return this.isFixed()?{barOffset:0,xCoordOffset:20,yCoordOffset:20}:{barOffset:0,xCoordOffset:0,yCoordOffset:-40}}sharingMode(){return this._sharingMode}share(e){this.isSynchronizable()&&this._sharingMode.setValue(e)}syncLineStyleState(){
const e=this.properties().state(this._syncStateExclusions);return delete e.interval,e.intervalsVisibilities=(0,I.mergeIntervalVisibilitiesDefaults)(e.intervalsVisibilities),e}moveLineTool(e){e.forEach(((e,t)=>this._setPoint(t,e))),this._normalizePoints()}snapTo45DegreesAvailable(){return!1}alignTo45DegreesPoints(){if(this.snapTo45DegreesAvailable()){const[e,t]=this.points();if(e&&t)return[{...e,pointIndex:0},{...t,pointIndex:1}]}return null}snapPoint45Degree(e,t,i){const n=this._model.timeScale(),o=n.indexToCoordinate(t.index),s=n.indexToCoordinate(e.index)-o,a=(0,r.ensureNotNull)(this.priceScale()),l=t.price,d=e.price,u=(0,r.ensureNotNull)((0,r.ensureNotNull)(this.ownerSource()).firstValue()),c=a.priceToCoordinate(l,u),h=a.priceToCoordinate(d,u)-c,p=Math.round(Math.atan2(s,h)/Math.PI*4);if(2===Math.abs(p))i||(e.price=l);else if(0===Math.abs(p)||4===Math.abs(p))i||(e.index=t.index);else{const t=Math.sqrt(s*s+h*h),i=s<0?-1:1,r=h<0?-1:1;let l=Math.max(Math.abs(h),Math.abs(s));l/=l*Math.sqrt(2)/t;const d=Math.round(n.coordinateToIndex(o+l*i)),p=Math.abs(n.indexToCoordinate(d)-o),m=a.coordinateToPrice(c+p*r,u);e.index=d,e.price=m}}_setPoint(e,t){this._points[e]&&(this._points[e].index===t.index?this._points[e].price=t.price:this._points[e]=t,this._pointChanged.fire(e))}_correctLastPoint(e){return(0,h.clone)(e)}_pointsForPointset(){return this._timePoint.map((e=>[e.time_t,e.offset]))}_snapTo45DegreesApplicable(e){return this.snapTo45DegreesAvailable()&&((null==e?void 0:e.shift())||(0,E.alignTo45Degrees)().value())}_normalizePoint(e){return{...this._model.timeScale().normalizeBarIndex(e.index),price:e.price}}_normalizePoints(){this._timePoint=[];for(let e=0;e<this._points.length;e++)if(void 0!==this._points[e].index){const t=this._normalizePoint(this._points[e]);if(!t.time_t){this._timePoint=[];break}this._timePoint.push(t)}this._normalizedPointsChanged.fire()}_getStartBarAligner(){const e=this._model.mainSeries().interval();if(null===this._alignerCache||this._alignerCache.resolution!==this._model.mainSeries().interval()){const t=this._model.mainSeries().symbolInfo();if(!t)return null;this._alignerCache={resolution:e,aligner:(0,l.createTimeToBarTimeAligner)(e,t)}}return this._alignerCache.aligner}_utcTimeInCurrentResolution(e){if(void 0!==e.time){const t=this._model.timezoneExceptExchange().value();if(null!==t){const i=(0,d.cal_to_utc)((0,d.get_timezone)(t),new Date(1e3*e.time)),n=this._getStartBarAligner();return n?n(i)/1e3:null}}return null}_setPaneViews(e,t,i){if(this._isDestroyed)for(const t of e)t.destroy&&t.destroy();else this._paneViews.set(t,e),void 0!==t&&i&&t.onDestroyed().subscribe(this,(()=>this._destroyPanePaneViews(t))),this._model.lightUpdate()}_getPaneViews(e){return this._paneViews.get(e)||null}_updateAllPaneViews(e){this._paneViews.forEach((t=>{for(const i of t)i.update(e)}))}_alignPointHorizontallyOrVertically(e){const t=(0,r.ensureNotNull)(this.pointToScreenPoint(e)),i=(0,r.ensureDefined)((0,r.ensureNotNull)(this._startMovingPoint).logical),n=(0,r.ensureDefined)((0,
r.ensureNotNull)(this._startMovingPoint).screen),o=Math.abs(n.x-t.x),s=Math.abs(n.y-t.y);if(o<10&&s<10)return e;return{index:o<s?i.index:e.index,price:o<s?e.price:i.price}}_alignScreenPointHorizontallyOrVertically(e){const t=(0,r.ensureDefined)((0,r.ensureNotNull)(this._startMovingPoint).screen),i=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return i<10&&o<10?e:i<o?new n.Point(t.x,e.y):new n.Point(e.x,t.y)}_correctPoints(e,t){var i,n,o,s;const a=(0,r.ensure)(null===(i=this._currentMovingPoint)||void 0===i?void 0:i.screen),l=(0,r.ensure)(null===(n=this._startMovingPoint)||void 0===n?void 0:n.screen),d=a.subtract(l);if(d.length()<1&&!t)return!1;const u=Math.round((0,r.ensure)(null===(o=this._currentMovingPoint)||void 0===o?void 0:o.logical).index-(0,r.ensure)(null===(s=this._startMovingPoint)||void 0===s?void 0:s.logical).index);for(const t of e){const e=(0,r.ensureNotNull)(this.pointToScreenPoint(t)).add(d);t.index=t.index+u,t.price=(0,r.ensureNotNull)(this.screenPointToPoint(e)).price}return!0}_correctFixedPoint(e){if(void 0===this._fixedPoint)return{didCorrect:!1,point:e};const t=(0,r.ensureDefined)((0,r.ensureNotNull)(this._currentMovingPoint).screen),i=(0,r.ensureDefined)((0,r.ensureNotNull)(this._startMovingPoint).screen),n=t.subtract(i);return n.length()>=1?{didCorrect:!0,point:e.add(n)}:{didCorrect:!1,point:e}}_currentPointsetIdWithPrefix(){return"pointset_"+(0,r.ensureNotNull)(this._currentPointsetAndSymbolId).pointsetId}_clearServerPoints(){null!==this._currentPointsetAndSymbolId&&this._model.chartApi().isConnected().value()&&this._model.chartApi().removePointset(this._currentPointsetIdWithPrefix()),this._currentPointsetAndSymbolId=null}_createPointProperty(e){const t=this._pointsProperty.childs().points;t.addProperty(""+e,{});const i=t[e];i.addChild("price",new N.LineDataSourcePointPriceProperty(this,e)),i.addChild("bar",new M.LineDataSourcePointIndexProperty(this,e))}_createPointsProperties(){this._pointsProperty=new P.Property,this._pointsProperty.addChild("points",new P.Property);for(let e=0;e<this.pointsCount();e++)this._createPointProperty(e)}_alignPointToRangeOfActualData(e){const t=(0,r.ensureNotNull)(this._model.mainSeries().bars().firstIndex()),i=(0,r.ensureNotNull)(this._model.mainSeries().bars().lastIndex());let n=Math.max(e.index,t);return n=Math.min(n,i),{...e,index:n}}_migrateSymbolProperty(e){const t=this._properties.childs();if(t.symbolStateVersion.value()<2){const i=(0,r.ensureNotNull)(this.ownerSource()),n=(0,r.ensureNotNull)(i.symbolSource()),o=this._model.mainSeries();if(n===o)return void t.symbolStateVersion.setValueSilently(2);if(null===o.symbolInfo())return;if(null===n.symbolInfo())return;o.symbolSameAsCurrent(t.symbol.value())&&t.symbol.setValueSilently((0,w.extractLineToolSymbolFromSymbolInfo)(e,n.symbol())),t.symbolStateVersion.setValueSilently(2)}}_migrateZOrder(){const e=this._properties.childs();e.zOrderVersion.value()<2&&(this.ownerSource()===this.model().mainSeries()&&this.setZorder(this.zorder()-this.model().mainSeries().obsoleteZOrder()),e.zOrderVersion.setValueSilently(2))}
_preparePoint(e,t){const i=e;return this._snapTo45DegreesApplicable(t)&&this.points().length>=2&&this.snapPoint45Degree(i,this.points()[this.points().length-2]),i}_addPointIntenal(e,t,i){this._points.push(e);const n=this._points.length===this.pointsCount();return n?(this._lastPoint=null,i||(this._normalizePoints(),this.createServerPoints())):this._lastPoint=e,this._pointAdded.fire(this._points.length-1),n}_onSourceHiddenMayChange(){this.isSourceHidden()&&this._model.selectionMacro((e=>{e.removeSourceFromSelection(this)})),this._model.invalidate(x.InvalidationMask.validateAction((()=>{this!==this._model.lineBeingCreated()&&(this._isDestroyed||this.processHibernate())})))}_saveAlertIdInState(){return!0}_onPointsetUpdated(e){if(0!==e.length){for(let t=0;t<e.length;t++){const i=e[t],n=this._timePoint[i.index],r={index:i.value[0],time:i.value[1],price:n.price};this._points.length<=i.index?(this._points.push(r),this._pointAdded.fire(this._points.length-1)):(this._points[i.index]=r,this._pointChanged.fire(i.index))}{const e=this;e.recalculateStateByData&&e.recalculateStateByData()}this._onPointsetUpdatedDelegate.fire(),this.updateAllViewsAndRedraw((0,L.sourceChangeEvent)(this.id()))}}_onMainSeriesSymbolResolved(){const e=this.ownerSource();null===e||this._model.mainSeries()===e.symbolSource()||this.isSourceHidden()||this.createServerPoints()}_readyToCreatePointset(){return this._timePoint.length>0}_propertiesStateExclusions(){return[]}_syncLineStyleIfNeeded(){const e=this.linkKey().value();!this._syncLineStyleMuted&&e&&(0,E.changeLineStyle)({linkKey:e,state:this.syncLineStyleState(),model:this._model})}_muteSyncLineStyle(){this._syncLineStyleMuted=!0}_unmuteSyncLineStyleWithoutApplyingChanges(){this.propertiesChanged(),this._syncLineStyleMuted=!1}_applyTemplateImpl(e){e.intervalsVisibilities=(0,I.mergeIntervalVisibilitiesDefaults)(e.intervalsVisibilities);const t=this.properties();t.applyTemplate(e,(0,O.factoryDefaults)(this.toolname.toLowerCase())),t.saveDefaults(),this.propertiesChanged()}_getPropertyDefinitionsViewModelClass(){return Promise.resolve(null)}_getAlertPlots(){return[]}_getUndoHistory(){return this._model.undoModel().undoHistory()}_synchronizeAlert(e){const t=this._getUndoHistory();if(!this._undoCheckpointAlert&&!this._alertUndoMode){const e=t.undoStack().pop();this._undoCheckpointAlert=t.createUndoCheckpoint(),e&&t.undoStack().push(e)}const i=e=>{const t=e.description()!==e.defaultDescription(),i=e.description()!==e.defaultDescription(!0),n=this._model.mainSeries().stateForAlert();e.startEditing(),e.isOHLC()&&n.actualSymbol===e.actualSymbol()&&e.setSeriesState(n),e.setMainSeriesState(n),e.setSymbol(n.symbolString);const o=(0,r.ensureNotNull)(this.stateForAlert());e.setResolution(o.interval),e.setLineState(o),t||i||e.resetToDefaultDescription(),e.finishEditing(),this._localAndServerAlertsMismatch=!0},n=()=>{this._alertUndoMode=!0,t.undoToCheckpoint((0,r.ensureDefined)(this._undoCheckpointAlert)),setTimeout((()=>{this._alertUndoMode=!1,this._localAndServerAlertsMismatch=!1}),0)},o=e=>{
"not_exists"!==e&&(F.logError("Getting alert failed: "+e),n())},s=async e=>{(await(0,p.getChartAlertsFacade)()).restartAlert(e,{success:()=>this._localAndServerAlertsMismatch=!1,error:o,complete:()=>delete this._undoCheckpointAlert,actionSource:"drawing_sync"})};(0,m.canPlaceAlertOnResolution)(this.stateForAlert().interval)?this.getAlert().then((t=>{t?(i(t),e&&s(t)):F.logError("Failed to get alert, drawing and alert are not synchronized")})).catch(o):this._alertUndoMode||((0,v.showGoProAlertsOnSecondsDialog)(),n(),delete this._undoCheckpointAlert)}_linePointsToAlertPlot(e,t,i,n){if(2!==e.length)return F.logError("[Drawing Alert] Wrong points"),null;const o=this._model.timeScale();return!o||o.isEmpty()?null:{type:"LinePlot",title:t||this.translatedType(),timestamp:(0,r.ensureNotNull)(o.indexToTimePoint(0)),offset1:e[0].index,offset2:e[1].index,price1:e[0].price,price2:e[1].price,extendBackward:i||!1,extendForward:n||!1}}_getAlertCreationAvailable(){return g.alertsAvailable&&super._getAlertCreationAvailable()&&!this._areAlertsOnLineToolProhibited()&&!this._hasAlert.value()}static _configureProperties(e){if(this._addCollectedProperties(e),e.hasChild("symbolStateVersion")||e.addChild("symbolStateVersion",new P.Property(1)),e.hasChild("zOrderVersion")||e.addChild("zOrderVersion",new P.Property(1)),e.hasChild("visible")||e.addChild("visible",new P.Property(!0)),e.hasChild("frozen")||e.addChild("frozen",new P.Property(!1)),e.hasChild("symbol")||e.addChild("symbol",new P.Property("")),e.hasChild("currencyId")||e.addChild("currencyId",new P.Property(null)),e.hasChild("unitId")||e.addChild("unitId",new P.Property(null)),e.addExcludedKey("symbolStateVersion",1),e.addExcludedKey("zOrderVersion",1),e.addExcludedKey("visible",1),e.addExcludedKey("frozen",1),e.addExcludedKey("symbol",1),e.addExcludedKey("currencyId",1),e.addExcludedKey("unitId",1),e.hasChild("intervalsVisibilities")){const t=(0,h.merge)((0,h.clone)(T.intervalsVisibilitiesDefaults),e.childs().intervalsVisibilities.state());e.removeProperty("intervalsVisibilities"),e.addChild("intervalsVisibilities",new A.IntervalsVisibilitiesProperty(t))}else e.addChild("intervalsVisibilities",new A.IntervalsVisibilitiesProperty(T.intervalsVisibilitiesDefaults));e.hasChild("title")||e.addChild("title",new P.Property("")),e.addExcludedKey("symbolInfo",1),e.addExcludedKey("points",1),e.addExcludedKey("interval",1),e.addExcludedKey("title",1),e.hasChild("singleChartOnly")&&e.removeProperty("singleChartOnly"),e.hasChild("font")&&e.removeProperty("font")}static _addCollectedProperties(e){e.hasChild("linewidth")&&e.addChild("linesWidths",new k.LineToolWidthsProperty([(0,r.ensureDefined)(e.child("linewidth"))])),e.hasChild("linecolor")&&e.addChild("linesColors",new k.LineToolColorsProperty([(0,r.ensureDefined)(e.child("linecolor"))])),e.hasChild("backgroundColor")&&e.addChild("backgroundsColors",new k.LineToolColorsProperty([(0,r.ensureDefined)(e.child("backgroundColor"))])),e.hasChild("textColor")&&e.addChild("textsColors",new k.LineToolColorsProperty([(0,
r.ensureDefined)(e.child("textColor"))])),e.hasChild("linestyle")&&e.addChild("linesStyles",new k.LineToolCollectedProperty([(0,r.ensureDefined)(e.child("linestyle"))])),e.addExcludedKey("linesWidths",3),e.addExcludedKey("linesColors",3),e.addExcludedKey("backgroundsColors",3),e.addExcludedKey("textsColors",3),e.addExcludedKey("linesStyles",3)}_areAlertsOnLineToolProhibited(){return null!==this._ownerSource&&!this._ownerSource.canHasAlertOnLineTools()}_removeAlertSubscriptions(){var e;null===(e=this._unsubscribeAlertCallbacks)||void 0===e||e.call(this),this._unsubscribeAlertCallbacks=void 0}_addAlertSubscriptions(e,t={}){if(void 0!==this._unsubscribeAlertCallbacks)return;const i=this.properties().child("extendLeft"),n=this.properties().child("extendRight"),r=e.destroyed().spawn(),o=e.selected().spawn(),s=e.hovered().spawn(),a=e.active().spawn();a.subscribe((e=>this._alertStatus.setValue(e?2:3)),{callWithLast:!0}),r.subscribe(this.removeAlert.bind(this)),o.subscribe((e=>{this._model.selectionMacro((t=>{e?t.addSourceToSelection(this):t.removeSourceFromSelection(this)}))}),{callWithLast:t.syncFocusFromAlert}),s.subscribe((e=>{const t=this._model.hoveredSource();e&&t!==this?this._model.setHoveredSource(this,null):e||t!==this||this._model.setHoveredSource(null,null)})),void 0!==i&&i.subscribe(this,(()=>this.synchronizeAlert(!1))),void 0!==n&&n.subscribe(this,(()=>this.synchronizeAlert(!1))),this._unsubscribeAlertCallbacks=()=>{r.destroy(),s.destroy(),o.destroy(),a.destroy(),void 0!==i&&i.unsubscribeAll(this),void 0!==n&&n.unsubscribeAll(this)}}_destroyPanePaneViews(e){const t=this._paneViews.get(e);if(void 0!==t)for(const e of t)e.destroy&&e.destroy();void 0!==e&&e.onDestroyed().unsubscribeAll(this),this._paneViews.delete(e)}_copyPricesWithoutNormalization(){const e=Math.min(this._points.length,this._timePoint.length);for(let t=0;t<e;t++)this._timePoint[t].price=this._points[t].price}async _getChartAlert(){const e=await(0,p.getChartAlertsFacade)();return new Promise(((t,i)=>{e.getAlert((0,r.ensureDefined)(this._alertId),{success:t,error:i})}))}async _syncAlertWithAlertFacade(e={}){try{const t=await this.getAlert();if(!t)return;if(this._addAlertSubscriptions(t,e),e.syncAlertFocus){const e=this._model.selection().isSelected(this);t.setSelected(e)}}catch(e){if(e instanceof Error&&"not_exists"===e.message&&this.hasAlert().value()){this._alertStatus.setValue(0);return void(await(0,p.getChartAlertsFacade)()).removeAlertFromAllChartsSilently(this.id(),(0,r.ensureDefined)(this._alertId))}F.logError("Failed to set alert, alert will not be saved with drawing in chart")}}}},954877:(e,t,i)=>{"use strict";t.LineToolFibRetracement=i(739988).LineToolFibRetracement,t.LineToolFibChannel=i(267961).LineToolFibChannel,t.LineToolFibSpeedResistanceArcs=i(597531).LineToolFibSpeedResistanceArcs,t.LineToolProjection=i(669824).LineToolProjection,t.LineToolTrendBasedFibExtension=i(733176).LineToolTrendBasedFibExtension,t.LineToolElliott=i(487416).LineToolElliott,t.LineToolFibCircles=i(992344).LineToolFibCircles,
t.LineToolVertLine=i(243009).LineToolVertLine,t.LineToolCrossLine=i(490210).LineToolCrossLine,t.LineToolBarsPattern=i(316589).LineToolBarsPattern,t.LineToolTrendBasedFibTime=i(337861).LineToolTrendBasedFibTime,t.LineToolFibTimeZone=i(924163).LineToolFibTimeZone,t.LineToolCircleLines=void 0,t.LineToolDateRange=i(936638).LineToolDateRange,t.LineToolPriceRange=i(115489).LineToolPriceRange,t.LineToolDateAndPriceRange=i(261609).LineToolDateAndPriceRange,t.LineToolParallelChannel=i(97917).LineToolParallelChannel,t.LineToolTrendAngle=i(221542).LineToolTrendAngle,t.LineToolTrendLine=i(815259).LineToolTrendLine,t.LineToolInfoLine=i(24203).LineToolInfoLine,t.LineToolArrowMark=i(866172).LineToolArrowMark,t.LineToolImage=i(495049).LineToolImage,t.LineToolPitchfan=i(474539).LineToolPitchfan,t.LineToolGannSquare=i(942718).LineToolGannSquare,t.LineToolFibSpeedResistanceFan=i(23565).LineToolFibSpeedResistanceFan,t.LineToolGannComplex=i(342584).LineToolGannComplex,t.LineToolGannFixed=i(188014).LineToolGannFixed,t.LineToolGannFan=i(762778).LineToolGannFan,t.LineToolFibWedge=i(670632).LineToolFibWedge,t.LineToolPitchfork=i(99269).LineToolPitchfork,t.LineToolDisjointAngle=i(612574).LineToolDisjointChannel,t.LineToolFlatBottom=i(399643).LineToolFlatBottom,t.LineToolIcon=i(814452).LineToolIcon,t.LineToolEmoji=i(471133).LineToolEmoji,t.LineToolSticker=i(831745).LineToolSticker,t.LineToolRotatedRectangle=i(723187).LineToolRotatedRectangle,t.LineToolFibSpiral=void 0,t.LineToolHeadAndShoulders=i(633480).LineToolHeadAndShoulders,t.LineToolTriangle=i(466376).LineToolTriangle,t.LineToolTrianglePattern=i(763337).LineToolTrianglePattern,t.LineTool5PointsPattern=i(462723).LineTool5PointsPattern,t.LineToolThreeDrivers=i(196019).LineToolThreeDrivers,t.LineToolABCD=i(558540).LineToolABCD,t.LineToolPolyline=i(948029).LineToolPolyline,t.LineToolPath=i(966293).LineToolPath,t.LineToolPrediction=i(688684).LineToolPrediction,t.LineToolPriceLabel=i(275428).LineToolPriceLabel,t.LineToolPriceNote=void 0,t.LineToolNote=void 0,t.LineToolNoteAbsolute=void 0,t.LineToolArrowMarker=i(32623).LineToolArrowMarker,t.LineToolSignpost=i(546647).LineToolSignpost,t.LineToolBrush=i(455034).LineToolBrush,t.LineToolArc=i(237026).LineToolArc,t.LineToolCallout=i(441788).LineToolCallout,t.LineToolBalloon=i(418998).LineToolBalloon,t.LineToolComment=i(242430).LineToolComment,t.LineToolText=i(63171).LineToolText,t.LineToolHorzLine=i(64120).LineToolHorzLine,t.LineToolHorzRay=i(590487).LineToolHorzRay,t.LineToolRectangle=i(260720).LineToolRectangle,t.LineToolCircle=i(198075).LineToolCircle,t.LineToolEllipse=i(196103).LineToolEllipse,t.LineToolTimeCycles=i(42978).LineToolTimeCycles,t.LineToolSineLine=i(519659).LineToolSineLine,t.LineToolGhostFeed=i(734493).LineToolGhostFeed,t.LineToolBezierQuadro=i(846911).LineToolBezierQuadro,t.LineToolBezierCubic=i(800757).LineToolBezierCubic,t.LineToolArrow=i(681090).LineToolArrow,t.LineToolRay=i(337731).LineToolRay,t.LineToolExtended=i(481673).LineToolExtended,t.LineToolSchiffPitchfork=i(885247).LineToolSchiffPitchfork,
t.LineToolSchiffPitchfork2=i(250330).LineToolSchiffPitchfork2,t.LineToolInsidePitchfork=i(397125).LineToolInsidePitchfork,t.LineToolTextAbsolute=i(63171).LineToolTextAbsolute,t.LineToolArrowMarkLeft=i(866172).LineToolArrowMarkLeft,t.LineToolArrowMarkRight=i(866172).LineToolArrowMarkRight,t.LineToolArrowMarkUp=i(866172).LineToolArrowMarkUp,t.LineToolArrowMarkDown=i(866172).LineToolArrowMarkDown,t.LineToolFlagMark=i(191073).LineToolFlagMark,t.LineToolCypherPattern=i(231001).LineToolCypherPattern,t.LineToolElliottImpulse=i(487416).LineToolElliottImpulse,t.LineToolElliottTriangle=i(487416).LineToolElliottTriangle,t.LineToolElliottTripleCombo=i(487416).LineToolElliottTripleCombo,t.LineToolElliottCorrection=i(487416).LineToolElliottCorrection,t.LineToolElliottDoubleCombo=i(487416).LineToolElliottDoubleCombo,t.LineToolRiskRewardLong=i(676415).LineToolRiskRewardLong,t.LineToolRiskRewardShort=i(676415).LineToolRiskRewardShort,t.LineToolPosition=i(284682).LineToolPosition,t.LineToolOrder=i(999872).LineToolOrder,t.LineToolHighlighter=i(12166).LineToolHighlighter,t.LineToolTweet=i(949665).LineToolTweet,t.LineToolIdea=i(645468).LineToolIdea},609466:(e,t,i)=>{"use strict";i.d(t,{StudyLineDataSource:()=>x});var n=i(55243),r=i(817464),o=i(868594),s=i(637761),a=i(656723),l=i(218049),d=i(560047),u=i(281233),c=i(984217),h=i(971899),p=i(169532),m=i(757402),v=i(901110);class g extends v.StatusProviderBase{constructor(e){super(),this._source=e}errorStatus(){const e=this._source.status();return e.type===m.StudyStatusType.Error?{error:this.sourceStatusText(),solutionId:(0,m.studyStatusSolutionId)(e),title:(0,m.studyStatusTitle)(e),studyFeature:(0,m.studyStatusFeature)(e)}:null}getSplitTitle(){return this._source.titleInParts()}text(){return this._source.translatedType()}sourceStatusText(){return(0,m.convertStudyStatusToString)(this._source.status(),!0)}}var f=i(219849),y=i(629714);class x extends r.LineDataSource{constructor(e,t,n,r,o,s){super(e,r,o,s),this._indexes=null,this._inputs=null,this._definitionsViewModel=null,this._pointsetPoints=null,this._loadedPlots=null,this._loadedGraphics=null,this._beingCreatedPaneView=null,this._anchorsPaneView=null,this._isLegendDisplayed=!1,Promise.all([Promise.all([i.e(23054),i.e(22164),i.e(87393),i.e(52017),i.e(77916),i.e(90108),i.e(94424),i.e(92384),i.e(51583)]).then(i.bind(i,716005)),Promise.all([i.e(23054),i.e(22164),i.e(87393),i.e(52017),i.e(77916),i.e(90108),i.e(94424),i.e(92384),i.e(51583)]).then(i.bind(i,667359))]).then((t=>{const{LineToolBeingCreatedPaneView:i}=t[0],{StudyLineDataSourceAnchorsPaneView:n}=t[1];this._beingCreatedPaneView=new i(this,e),this._anchorsPaneView=new n(this,this.model()),this._model.lightUpdate()})),this._metaInfo=t,this._dataSource=new d.ExtendedStudyDataSource(e.chartApi(),e.mainSeries(),n,t),this._dataSource.dataCleared().subscribe(this,this._onDataCleared),this._dataSource.dataUpdated().subscribe(this,this._onDataUpdated),this._dataSource.studyStatusChanged().subscribe(this,this._onStudyStatusChanged),this._statusProvider=new g(this),
this._statusView=new y.LineToolStudyStatusView(this),this._showStudyArgumentsProperty=e.properties().childs().paneProperties.childs().legendProperties.childs().showStudyArguments}isDisplayedInLegend(){return this._isLegendDisplayed}titleInParts(){const e=[];if(this._showStudyArgumentsProperty.value()&&this._inputs)for(const t of this._metaInfo.inputs){if(!0===t.isHidden||"bool"===t.type)continue;const i=this._inputs[t.id];e.push(i.toString())}return[this.name(),e]}destroy(){this._dataSource.dataUpdated().unsubscribeAll(this),this._dataSource.dataCleared().unsubscribeAll(this),this._dataSource.studyStatusChanged().unsubscribeAll(this),this._dataSource.destroy(),null!==this._definitionsViewModel&&(this._definitionsViewModel.destroy(),this._definitionsViewModel=null),this._unsubscribeApplyInputsOnSeriesCompleted(),this._isDestroyed=!0,super.destroy()}stop(){super.stop(),this._isDestroyed||(this._dataSource.stop(),this.clearData())}start(){super.start(),this._isDestroyed||null===this._inputs||this._dataSource.start()}metaInfo(){return this._metaInfo}graphicsInfo(){return this._metaInfo.graphics}series(){return this._model.mainSeries()}translatedType(){return this._metaInfo.description}name(){return this._metaInfo.description}studyId(){return this._metaInfo.id}setPoint(e,t,i){super.setPoint(e,this._preparePoint(t,i))}move(e){}clearData(){this._clearAllDataExceptPointsetPoints(),this._pointsetPoints=null,this.updateAllViews((0,p.sourceChangeEvent)({sourceId:this.id(),clearData:!0})),super.clearData()}data(){return this.plots()}plots(){return this._loadedPlots||this._dataSource.plots()}graphics(){return this._loadedGraphics||this._dataSource.graphics()}valueAt(e,t){var i,n;return null!==(n=null===(i=this.ownerSource())||void 0===i?void 0:i.symbolSource().valueAt(e,t))&&void 0!==n?n:null}firstValue(){return this._model.mainSeries().firstValue()}state(e){const t={...super.state(e),metaInfo:this.metaInfo().state()};return e&&(t.data=this.plots().state(),t.nonseriesindexes=this._indexes,t.graphics=(0,a.saveStudyGraphics)(this.graphics(),null)),t}restoreData(e){var t;void 0!==e.data&&(this._loadedPlots=new n.PlotList((0,c.studyPlotFunctionMap)(this._metaInfo),c.studyEmptyPlotValuePredicate),this._loadedPlots.restoreState(e.data)),this._indexes=null!==(t=e.nonseriesindexes)&&void 0!==t?t:this._indexes,this._loadedGraphics=e.graphics?(0,a.loadStudyGraphics)(e.graphics):this._loadedGraphics}getPropertyDefinitionsViewModel(){return null===this._definitionsViewModel?this._getPropertyDefinitionsViewModelClass().then((e=>null===e||this._isDestroyed?null:(null===this._definitionsViewModel&&(this._definitionsViewModel=new e(this._model.undoModel(),this)),this._definitionsViewModel))):Promise.resolve(this._definitionsViewModel)}paneViews(e){let t=[];if(this.isSourceHidden())return t;if(this._isReady()&&this._changeStatesStack.isEmpty()){const i=super.paneViews(e);null!==i&&(t=t.concat(i))}else null!==this._beingCreatedPaneView&&t.push(this._beingCreatedPaneView);return null!==this._anchorsPaneView&&t.push(this._anchorsPaneView),t}
propertiesChanged(e){super.propertiesChanged(e),this._onStudyInputsMayChange()}dataAndViewsReady(){return super.dataAndViewsReady()&&this._isReady()}endChanging(e,t){const i=super.endChanging(e,t);return i.indexesChanged?this.clearData():this._updateAnchorsPrice(!0),i}moveData(e){this._dataSource.moveData(e)}restorePoints(e,t,i){super.restorePoints(e,t,i),this._updateAnchorsPrice(!0)}statusProvider(e){return this._statusProvider}statusView(){return this._statusView}legendView(){return null}dataProblemModel(){return null}dataUpdatedModeModel(){return null}marketStatusModel(){return null}onStatusChanged(){return this._dataSource.studyStatusChanged()}status(){return this._dataSource.studyStatus()}recalcStudyIfNeeded(){}static createPropertiesFromStudyMetaInfoAndState(e,t,i,n){const r=(0,h.prepareStudyPropertiesForLoadChart)(e,t,i,n);return this._configureProperties(r),r}_onStudyStatusChanged(e,t){let i;switch(t.type){case u.StudyStatusType.Error:i=!0;break;case u.StudyStatusType.Completed:i=!1;break;default:return}if(i===this._isLegendDisplayed)return;this._isLegendDisplayed=i;const n=this._model.paneForSource(this);if(n){const e=this._model.panes().indexOf(n),t=f.InvalidationMask.invalidateLegendWidgetLayout(e);this.model().invalidate(t)}}_studyId(){return this._dataSource.studyId()}_isReady(){return!0}_updateAllPaneViews(e){var t,i;super._updateAllPaneViews(e),null===(t=this._beingCreatedPaneView)||void 0===t||t.update(),null===(i=this._anchorsPaneView)||void 0===i||i.update(e)}_getPointTime(e,t){const i=e.index,n=this._model.timeScale().indexToTimePoint(i);return null!==n?n:t||void 0===e.time?null:this._utcTimeInCurrentResolution(e)}_updateAnchorsPrice(e){}_onPointsetUpdated(e){super._onPointsetUpdated(e),this._pointsetPoints=this._points.map((e=>({price:e.price,index:e.index,time:e.time}))),this._onStudyInputsMayChange()}_onDataCleared(){this.updateAllViews((0,p.sourceChangeEvent)({sourceId:this.id(),clearData:!0})),this._model.updateSource(this)}_onDataUpdated(e,t,i){var n;this._updateAnchorsPrice(),this.updateAllViews((0,p.sourceChangeEvent)({sourceId:this.id(),firstUpdatedTimePointIndex:null===(n=e[0])||void 0===n?void 0:n.index})),this._model.updateSource(this)}_onStudyInputsMayChange(){let e=null;if(null!==this._pointsetPoints&&this._pointsetPoints.length===this.pointsCount()&&(e=this._studyInputs(this._pointsetPoints),null===e&&(this._clearAllDataExceptPointsetPoints(),this.updateAllViews((0,p.sourceChangeEvent)(this.id())))),null!==e){const t=this.metaInfo().inputs.map((e=>e.id)),i=Object.keys(e);for(const n of i)t.includes(n)||delete e[n]}this._areInputsEqual(this._inputs,e)||this._applyStudyInputs(e)}_preparePoint(e,t){return super._preparePoint(this._alignPointToRangeOfActualData(e),t)}_getPropertyDefinitionsViewModelClass(){return Promise.resolve(null)}_subscribeApplyInputsOnSeriesCompleted(){this._unsubscribeApplyInputsOnSeriesCompleted(),this._model.mainSeries().dataEvents().completed().subscribe(this,(()=>this._onStudyInputsMayChange()),!0)}_unsubscribeApplyInputsOnSeriesCompleted(){
this._model.mainSeries().dataEvents().completed().unsubscribeAll(this)}_onInputsChanged(){this.hasAlert().value()&&(this._localAndServerAlertsMismatch=!0)}_clearAllDataExceptPointsetPoints(){this._inputs=null,this._dataSource.clearData(),this._loadedPlots=null,this._indexes=null,this._loadedGraphics=null}static _createPropertiesFromStudyIdAndState(e,t){const i=s.StudyMetaInfo.getStudyPropertyRootNameById(e),n=new o.DefaultProperty({defaultName:i,state:t});return this._configureProperties(n),n}static _configureProperties(e){super._configureProperties(e),e.removeExcludedKey("intervalsVisibilities",1)}_areInputsEqual(e,t){return null===t?null===e:null!==e&&(0,l.areStudyInputsEqual)(this._metaInfo.inputs,e,t)}_applyStudyInputs(e){const t=this._inputs;this._inputs=e,null!==e&&(this._unsubscribeApplyInputsOnSeriesCompleted(),this._dataSource.setInputs(e),null===t&&this.isStarted()&&!this._dataSource.isStarted()&&this._dataSource.start()),this._onInputsChanged()}}},169532:(e,t,i)=>{"use strict";i.r(t),i.d(t,{globalChangeEvent:()=>s,selectionChangeEvent:()=>u,sourceChangeEvent:()=>r,viewportChangeEvent:()=>l});var n=i(827147);function r(e){return(0,n.default)(e)?{type:"data-source-change",sourceId:e}:{type:"data-source-change",...e}}const o={type:"global-change"};function s(){return o}const a={type:"viewport-change"};function l(e){return e?{type:"viewport-change",pane:e}:a}const d={type:"selection-change"};function u(){return d}},979351:(e,t,i)=>{"use strict";i.d(t,{unpackNonSeriesData:()=>a});var n=i(130551),r=i(650151);function o(e){if(!(0,n.isObject)(e))throw new Error("Graphics commands should be wrapped in an object");if((0,n.hasProperty)(e,"create"),(0,n.hasProperty)(e,"erase")){const t=e.erase;(0,r.assert)(Array.isArray(t),"Collection of erase commands should be array");for(const e of t){if(!(0,n.isObject)(e)||!(0,n.hasProperty)(e,"action"))throw new Error("Command should be an object with 'action' property");(0,r.assert)("all"===e.action||"one"===e.action,"Erase command action should be 'all' or 'one'")}}return e}async function s(e){{const[{inflateZlib:t,inflateRaw:n},{unpackImpl:r}]=await Promise.all(["function"==typeof DecompressionStream?i.e(95465).then(i.bind(i,23536)):Promise.all([i.e(84069),i.e(82170)]).then(i.bind(i,458140)),i.e(95465).then(i.bind(i,532152))]);return r(t,n,e)}}async function a(e){if(""===e)return null;const t=JSON.parse(e);if(!(0,n.isObject)(t)||"function"==typeof t)throw new Error("Non-object content in the non-series envelope");if((0,n.hasProperty)(t,"indexes_replace"))return{indexes_replace:!0};const i={indexes_replace:!1};if((0,n.hasProperty)(t,"offsets")&&(i.offsets=t.offsets),(0,n.hasProperty)(t,"isUpdate")){if("boolean"!=typeof t.isUpdate)throw new Error('Invalid type of "isUpdate" field');i.isUpdate=t.isUpdate}return(0,n.hasProperty)(t,"data")&&(i.data=t.data),(0,n.hasProperty)(t,"graphicsCmds")&&(i.graphicsCmds=o(t.graphicsCmds)),(0,n.hasProperty)(t,"dataCompressed")&&(i.data=await s(t.dataCompressed)),(0,
n.hasProperty)(t,"graphicsCmdsCompressed")&&(i.graphicsCmds=o(await s(t.graphicsCmdsCompressed))),i}},347808:(e,t,i)=>{"use strict";i.d(t,{PriceAxisView:()=>o});var n=i(968720),r=i(432059);class o{constructor(e){this._commonRendererData={coordinate:0,textColor:"#FFF",background:"#000",additionalPaddingBottom:0,additionalPaddingTop:0},this._axisRendererData={text:"",visible:!1,separatorVisible:!0,borderVisible:!1,ignoreAdditionalPaddingInner:!1},this._paneRendererData={text:"",visible:!1,separatorVisible:!1,borderVisible:!1,ignoreAdditionalPaddingInner:!0},this._invalidated=!0,this._active=!1,this._axisRenderer=new(e||n.PriceAxisViewRenderer)(this._axisRendererData,this._commonRendererData),this._paneRenderer=new(e||n.PriceAxisViewRenderer)(this._paneRendererData,this._commonRendererData)}setActive(e){this._active=e}text(){return this._updateRendererDataIfNeeded(),this._axisRendererData.text}secondLineText(){return this._updateRendererDataIfNeeded(),this._axisRendererData.secondLine}thirdLineText(){return this._updateRendererDataIfNeeded(),this._axisRendererData.thirdLine}background(){return this._updateRendererDataIfNeeded(),this._commonRendererData.background}color(){return this._updateRendererDataIfNeeded(),this.generateTextColor(this.background())}generateTextColor(e){return(0,r.colorFromBackground)(e)}coordinate(){return this._updateRendererDataIfNeeded(),this._commonRendererData.coordinate}floatCoordinate(){var e;return this._updateRendererDataIfNeeded(),null!==(e=this._commonRendererData.floatCoordinate)&&void 0!==e?e:this._commonRendererData.coordinate}update(e){this._invalidated=!0}topBottomTotalHeight(e){this._updateRendererDataIfNeeded();const{top:t,bottom:i,total:n}=this._axisRenderer.topBottomTotalHeight(e),{top:r,bottom:o,total:s}=this._paneRenderer.topBottomTotalHeight(e);return{top:Math.max(t,r),bottom:Math.max(i,o),total:Math.max(n,s)}}getFixedCoordinate(){return this._commonRendererData.fixedCoordinate||0}setFixedCoordinate(e){this._commonRendererData.fixedCoordinate=e}isVisible(){return this._updateRendererDataIfNeeded(),this._axisRendererData.visible||this._paneRendererData.visible}isAxisLabelVisible(){return this._updateRendererDataIfNeeded(),this._axisRendererData.visible}isPaneLabelVisible(){return this._updateRendererDataIfNeeded(),this._paneRendererData.visible}renderer(){return this._updateRendererDataIfNeeded(),this._axisRenderer}paneRenderer(){return this._updateRendererDataIfNeeded(),this._paneRenderer}setPaneRendererLabelIcon(e){this._paneRendererData.labelIcon=e}setPaneLabelVisible(e){this._paneRendererData.visible=e,this._invalidated=!0}ignoreAlignment(){return!1}_updateRendererDataIfNeeded(){this._invalidated&&(this._commonRendererData.fixedCoordinate=void 0,this._updateRendererData(this._axisRendererData,this._paneRendererData,this._commonRendererData),this._invalidated=!1)}}},320771:(e,t,i)=>{"use strict";i.d(t,{SeriesDataEvents:()=>r});var n=i(942634);class r{constructor(){this._created=new n.Delegate,this._modified=new n.Delegate,this._loading=new n.Delegate,
this._completed=new n.Delegate,this._error=new n.Delegate,this._symbolError=new n.Delegate,this._symbolResolved=new n.Delegate,this._seriesError=new n.Delegate,this._symbolNotPermitted=new n.Delegate,this._symbolInvalid=new n.Delegate,this._symbolGroupNotPermitted=new n.Delegate,this._chartTypeNotPermitted=new n.Delegate,this._intradaySpreadNotPermitted=new n.Delegate,this._intradayExchangeNotPermitted=new n.Delegate,this._customIntervalNotPermitted=new n.Delegate,this._secondsIntervalNotPermitted=new n.Delegate,this._ticksIntervalNotPermitted=new n.Delegate,this._barReceived=new n.Delegate,this._seriesTimeFrame=new n.Delegate,this._dataUpdated=new n.Delegate,this._unsupportedResolutionRequested=new n.Delegate}destroy(){this._created.destroy(),this._modified.destroy(),this._loading.destroy(),this._completed.destroy(),this._error.destroy(),this._symbolError.destroy(),this._symbolResolved.destroy(),this._seriesError.destroy(),this._symbolInvalid.destroy(),this._symbolNotPermitted.destroy(),this._symbolGroupNotPermitted.destroy(),this._chartTypeNotPermitted.destroy(),this._intradaySpreadNotPermitted.destroy(),this._intradayExchangeNotPermitted.destroy(),this._customIntervalNotPermitted.destroy(),this._secondsIntervalNotPermitted.destroy(),this._ticksIntervalNotPermitted.destroy(),this._barReceived.destroy(),this._seriesTimeFrame.destroy(),this._dataUpdated.destroy(),this._unsupportedResolutionRequested.destroy()}created(){return this._created}modified(){return this._modified}loading(){return this._loading}completed(){return this._completed}error(){return this._error}symbolError(){return this._symbolError}symbolResolved(){return this._symbolResolved}seriesError(){return this._seriesError}symbolInvalid(){return this._symbolInvalid}symbolNotPermitted(){return this._symbolNotPermitted}symbolGroupNotPermitted(){return this._symbolGroupNotPermitted}chartTypeNotPermitted(){return this._chartTypeNotPermitted}intradaySpreadNotPermitted(){return this._intradaySpreadNotPermitted}intradayExchangeNotPermitted(){return this._intradayExchangeNotPermitted}customIntervalNotPermitted(){return this._customIntervalNotPermitted}secondsIntervalNotPermitted(){return this._secondsIntervalNotPermitted}ticksIntervalNotPermitted(){return this._ticksIntervalNotPermitted}barReceived(){return this._barReceived}seriesTimeFrame(){return this._seriesTimeFrame}dataUpdated(){return this._dataUpdated}unsupportedResolutionRequested(){return this._unsupportedResolutionRequested}fireCompleted(e){this._completed.fire(e)}fireCreated(e){this._created.fire(e)}fireModified(){this._modified.fire()}fireLoading(e){this._loading.fire(e)}fireError(){this._error.fire()}fireSymbolError(e){this._symbolError.fire(e),this.fireError()}fireSymbolResolved(e){this._symbolResolved.fire(e)}fireSeriesError(e){this._seriesError.fire(e),this.fireError()}fireSymbolInvalid(){this._symbolInvalid.fire()}fireSymbolNotPermitted(e){this._symbolNotPermitted.fire(e)}fireSymbolGroupNotPermitted(e){this._symbolGroupNotPermitted.fire(e)}fireChartTypeNotPermitted(e){
this._chartTypeNotPermitted.fire(e),this.fireError()}fireIntradaySpreadNotPermitted(){this._intradaySpreadNotPermitted.fire(),this.fireError()}fireIntradayExchangeNotPermitted(){this._intradayExchangeNotPermitted.fire(),this.fireError()}fireCustomIntervalNotPermitted(e){this._customIntervalNotPermitted.fire(e),this.fireError()}fireSecondsIntervalNotPermitted(){this._secondsIntervalNotPermitted.fire(),this.fireError()}fireTicksIntervalNotPermitted(){this._ticksIntervalNotPermitted.fire(),this.fireError()}fireBarReceived(e){this._barReceived.fire(e)}fireSeriesTimeFrame(e,t,i,n,r){this._seriesTimeFrame.fire(e,t,i,n,r)}fireDataUpdated(e,t,i,n){this._dataUpdated.fire(e,t,i,n)}fireUnsupportedResolutionRequested(){this._unsupportedResolutionRequested.fire()}}},971899:(e,t,i)=>{"use strict";i.d(t,{prepareStudyProperties:()=>T,prepareStudyPropertiesForLoadChart:()=>g});var n=i(852290),r=i(130551),o=i(338619),s=i(637761),a=i(124829),l=i(666574),d=i(211183),u=i(500323),c=i(985429),h=i(868594),p=i(389276),m=i(748947);const v=(0,o.getLogger)("Chart.Study");function g(e,t,i,r,o){return function(e,t,i,r,o,l){const u=function(e,t,i,r,o){var l;e.version&&i.version&&e.version!==i.version&&v.logWarn("Serialized metaInfo version "+e.version+" is not equal to the saved state version "+i.version);const u=t||e,c=null!==(l=(0,a.clone)(u.defaults))&&void 0!==l?l:{},h=s.StudyMetaInfo.getStudyPropertyRootName(u),p=s.StudyMetaInfo.getStudyPropertyRootName(e);let m=y();(0,n.default)(m,f(e)),(0,n.default)(m,(0,a.clone)(e.defaults)),(0,n.default)(m,c),(0,n.default)(m,(0,d.factoryDefaults)(h)),(0,n.default)(m,(0,d.factoryDefaults)(p)),(0,n.default)(m,x(u,r,h)),(0,n.default)(m,x(e,r,p)),(0,n.default)(m,i),m=r.updateStudyState(m,e,t),void 0!==o&&t&&(m=o(i,m,e,t));s.StudyMetaInfo.versionOf(u)>=1&&(0,n.default)(m,_(c,m));return m}(e,t,i,r,l);return b(t||e,o,u)}(e,t,i,r,s.StudyMetaInfo.getStudyPropertyRootName(e),o)}function f(e){const t={};if(e.plots)for(let i=0;i<e.plots.length;i++){const n=e.plots[i],r=n.id;if((0,m.isColorerPlot)(n))continue;const o={display:15,color:"#0496FF",linestyle:l.LINESTYLE_SOLID,linewidth:2,plottype:m.LineStudyPlotStyle.Line,trackPrice:!1};(0,m.isBarColorerPlot)(n)&&(o.transparency=0),o.plottype=n.type,o.title=r,t[r]=o}return{styles:t}}function y(){const e=(0,a.clone)((0,d.defaults)("study"));return e.intervalsVisibilities=(0,a.clone)(c.intervalsVisibilitiesDefaults),e}function x(e,t,i){let n=(0,a.clone)((0,d.defaults)(i,t));return"Overlay"!==e.shortId&&"Compare"!==e.shortId||(n.currencyId=null,n.unitId=null),e.isTVScript&&e.TVScriptSourceCode!==n.TVScriptSourceCode&&(n=(0,a.clone)((0,d.factoryDefaults)(i))),n}function _(e,t){var i;const n={};return u.StudyVersioning.mergeInputsObjPart(n,null!==(i=e.inputs)&&void 0!==i?i:{}),u.StudyVersioning.mergeInputsObjPart(n,t.inputs),{inputs:n}}function I(e,t,i,o){var l;if(s.StudyMetaInfo.versionOf(e)<1)throw new Error("This function cannot work with metainfo of the old format version. Required format version >= 1");const u=s.StudyMetaInfo.getStudyPropertyRootName(e),c=(0,
a.clone)(e.defaults),h=y();if((0,n.default)(h,f(e)),(0,n.default)(h,c),(0,n.default)(h,(0,d.factoryDefaults)(u)),(0,n.default)(h,x(e,o,u)),(0,n.default)(h,t),(0,n.default)(h,_(c,h)),null!==i){const t=i.model().studiesColorRotatorFactory().getColorRotator(e);null!==t&&("Overlay@tv-basicstudies"===e.id?h.lineStyle.color=t.getColor(h.lineStyle.color):(0,n.default)(h,function(e,t){for(const i of Object.keys(e.styles)){const n=e.styles[i];if((0,r.isObject)(n)&&"color"in n){const e=n.color;n.color=t.getColor(e)}}return e}(h,t)))}return o.updateStudyInputsIfNeeded(h,null!==(l=h.version)&&void 0!==l?l:e.version,e),h}function T(e,t,i,n,r){return function(e,t,i,n,r,o){const l=I(e,t,i,n);return s.StudyMetaInfo.getSourceInputIds(e).forEach(((e,t)=>{const i=l.inputs[e];t<o.length?l.inputs[e]=`${o[t].id()}$0`:(0,a.isString)(i)&&i.includes("$")&&(l.inputs[e]="close")})),b(e,r,l)}(e,t,i,n,s.StudyMetaInfo.getStudyPropertyRootName(e),r)}const w=["id","description","description_localized","shortDescription","_metainfoVersion","is_price_study","is_hidden_study","priceScale","fullId","shortId","scriptIdPart","packageId","productId","isTVScriptStub","defaults","symbolSource","historyCalculationMayChange","format","linkedToSeries","isTVLibrary","docs","exports","exportTypes","extra","usesPrivateLib","financialPeriod","groupingKey","pine","isRGB","isTVScript","TVScriptMetaInfoExprs","usePlotsZOrder","isTVScriptStrategy","TVScriptSourceCode","lookaheadFutureData","hasAlertFunction","defaultStrategyAlertMessage","tags","canBeChild","canNotBeChild","_serverMetaInfoVersion","warnings"];function b(e,t,i){var n;for(const e of w)delete i[e];const r=["visible","precision","minTick","intervalsVisibilities","inputs.first_visible_bar_time","inputs.last_visible_bar_time","inputs.subscribeRealtime"];for(let t=0;t<e.inputs.length;++t){const i=e.inputs[t];i.isHidden&&(r.push(`inputs.${t}`),r.push(`inputs.${i.id}`))}const o=new h.DefaultProperty({defaultName:t,state:i,excludedDefaultsKeys:r,excludedStateKeys:["version"]});o.removeProperty("intervalsVisibilities"),o.addChild("intervalsVisibilities",new p.IntervalsVisibilitiesProperty(i&&i.intervalsVisibilities)),"PivotPointsStandard@tv-basicstudies"!==e.id&&"PivotPointsHighLow@tv-basicstudies"!==e.id||!o.hasChild("font")||o.removeProperty("font");const a=s.StudyMetaInfo.versionOf(e);return o.hasChild("version")?null===(n=o.childs().version)||void 0===n||n.setValue(a):o.addProperty("version",a),o}},560047:(e,t,i)=>{"use strict";i.d(t,{ExtendedStudyDataSource:()=>o});var n=i(700087),r=i(757402);class o extends n.StudyDataSource{constructor(e,t,i,n){super(e,t.seriesSource(),i,n),this._series=t}_createStudyError(e){var t;return(0,r.createStudyError)(this._getStudyErrorDescription(e),null===(t=this._series.symbolInfo())||void 0===t?void 0:t.exchange)}}},759214:(e,t,i)=>{"use strict";i.d(t,{containsBackgroundTimePointIndexes:()=>s,dematerializeBackground:()=>l,isBackgroundInBarsRange:()=>d,materializeBackground:()=>a});var n=i(650151),r=i(501571),o=i(585240);const s=!0;function a(e,t){
if(e.start>=t.length||e.stop>=t.length)return null;const i=t[e.start],o=t[e.stop];return o===r.INVALID_TIME_POINT_INDEX?null:((0,n.assert)(i===r.INVALID_TIME_POINT_INDEX||i<=o,"start should not exceed stop"),{start:i===r.INVALID_TIME_POINT_INDEX?null:i,stop:o})}function l(e,t,i){return{id:t,start:(0,o.ensureTimePointIndexIndex)(i.indexOf(null!==e.start?e.start:r.INVALID_TIME_POINT_INDEX)),stop:(0,o.ensureTimePointIndexIndex)(i.indexOf(e.stop))}}function d(e,t){if(null===e.start)return t.firstBar()<=e.stop;const i=Math.min(e.start,e.stop),n=Math.max(e.start,e.stop);return t.contains(i)||t.contains(n)||i<t.firstBar()&&n>t.lastBar()}},18613:(e,t,i)=>{"use strict";i.d(t,{DwgBoxFontType:()=>o,DwgBoxStyle:()=>n,containsDwgBoxTimePointIndexes:()=>d,dematerializeDwgBox:()=>c,isDwgBoxInBarsRange:()=>h,materializeDwgBox:()=>u});var n,r,o,s=i(501571),a=i(585240),l=i(597461);!function(e){e.Solid="sol",e.Dotted="dot",e.Dashed="dsh",e.LeftArrow="al",e.RightArrow="ar",e.BothArrow="ab"}(n||(n={})),function(e){e.Top="top",e.Center="center",e.Bottom="bottom"}(r||(r={})),function(e){e.Monospace="monospace"}(o||(o={}));const d=!0;function u(e,t){var i,n;if(e.x1>=t.length||e.x2>=t.length||null===e.y1||null===e.y2)return null;let r=t[e.x1],o=t[e.x2];return r===s.INVALID_TIME_POINT_INDEX&&(r=null),o===s.INVALID_TIME_POINT_INDEX&&(o=null),{left:r,right:o,top:e.y1,bottom:e.y2,borderColorIndex:e.c,backgroundColorIndex:e.bc,extend:e.ex,borderStyle:e.st,borderWidth:e.w,text:e.t,wordWrap:e.tw,horizontalTextAlignment:e.tha,verticalTextAlignment:e.tva,fontSize:e.ts,textColorIndex:null!==(i=e.tc)&&void 0!==i?i:null,fontType:null!==(n=e.tf)&&void 0!==n?n:null,forceOverlay:e.fo}}function c(e,t,i){var n,r,o;return{id:t,x1:(0,a.ensureTimePointIndexIndex)(i.indexOf(null!==(n=e.left)&&void 0!==n?n:s.INVALID_TIME_POINT_INDEX)),x2:(0,a.ensureTimePointIndexIndex)(i.indexOf(null!==(r=e.right)&&void 0!==r?r:s.INVALID_TIME_POINT_INDEX)),y1:e.top,y2:e.bottom,c:e.borderColorIndex,bc:e.backgroundColorIndex,ex:e.extend,st:e.borderStyle,w:e.borderWidth,t:e.text,tw:e.wordWrap,tha:e.horizontalTextAlignment,tva:e.verticalTextAlignment,ts:e.fontSize,tf:null!==(o=e.fontType)&&void 0!==o?o:void 0,tc:e.textColorIndex,fo:e.forceOverlay}}function h(e,t){const i=e.extend;if(i===l.DwgExtend.Both)return null===e.left||null===e.right;if(null===e.left||null===e.right)return null!==e.right?e.right<=t.lastBar()&&i===l.DwgExtend.Right:null!==e.left&&(e.left>=t.firstBar()&&i===l.DwgExtend.Left);const n=Math.min(e.left,e.right),r=Math.max(e.left,e.right);if(t.contains(n)||t.contains(r)||n<t.firstBar()&&r>t.lastBar())return!0;const o=e.left<e.right?e.extend===l.DwgExtend.Left:e.extend===l.DwgExtend.Right,s=e.left<e.right?e.extend===l.DwgExtend.Right:e.extend===l.DwgExtend.Left;return r<t.firstBar()&&s||n>t.lastBar()&&o}},597461:(e,t,i)=>{"use strict";i.d(t,{DwgExtend:()=>n,convertPointsToScreenDimension:()=>a,doesItemAffectVisibleRange:()=>l,isExtendInSameDirection:()=>s});var n,r=i(650151);function o(e,t){return e===n.None?t:t===n.None?e:e===n.Both||t===n.Both?n.Both:e===t?t:n.Both}
function s(e,t){return e===n.Both||e===t}function a(e,t,i,s,a,l,d,u,c,h){let p,m;if(null===e&&null===i){if(a!==n.Right&&a!==n.Both)return null;a=n.Both,p=0,m=u}else null===e?(p=d.indexToCoordinate((0,r.ensureNotNull)(i)-1),a=o(a,n.Left)):p=d.indexToCoordinate(e),null===i?(m=d.indexToCoordinate((0,r.ensureNotNull)(e)-1),a=o(a,n.Right)):m=d.indexToCoordinate(i);const v=p,g=l.priceToCoordinate(t,c),f=m,y=l.priceToCoordinate(s,c);return void 0!==h?(h.x1=v,h.y1=g,h.x2=f,h.y2=y,h.extend=a,h):{x1:v,y1:g,x2:f,y2:y,extend:a}}function l(e,t,i,r,o){let s=!1;switch(i){case n.Both:s=!0;break;case n.Right:s=null===t||null===e||e<=o;break;case n.Left:s=null===t||t>=r;break;default:null!==e&&null!==t?s=(e>=r||t>=r)&&(e<=o||t<=o):null!==e&&null===t?s=e<=o:null===e&&null!==t&&(s=t>=r)}return s}!function(e){e.None="n",e.Left="l",e.Right="r",e.Both="b"}(n||(n={}))},15141:(e,t,i)=>{"use strict";i.d(t,{DwgLabelStyle:()=>o,DwgLabelTextAlign:()=>n,DwgLabelYloc:()=>r,containsDwgLabelTimePointIndexes:()=>d,dematerializeDwgLabel:()=>c,isDwgLabelInBarsRange:()=>h,materializeDwgLabel:()=>u});var n,r,o,s,a=i(501571),l=i(585240);!function(e){e.Left="left",e.Center="center",e.Right="right"}(n||(n={})),function(e){e.AboveBar="ab",e.BelowBar="bl",e.Price="pr",e.Auto="auto"}(r||(r={})),function(e){e.Xcross="xcr",e.Cross="cr",e.Triangleup="tup",e.Triangledown="tdn",e.Flag="flg",e.Circle="cir",e.Arrowup="aup",e.Arrowdown="adn",e.LabelUp="lup",e.LabelDown="ldn",e.LabelLeft="llf",e.LabelRight="lrg",e.LabelCenter="lcn",e.LabelLeftUp="luplf",e.LabelLeftDown="llwlf",e.LabelRightUp="luprg",e.LabelRightDown="llwrg",e.Square="sq",e.Diamond="dia",e.TextOutline="to",e.None="n"}(o||(o={})),function(e){e.Monospace="monospace"}(s||(s={}));const d=!0;function u(e,t){var i;if(e.x>=t.length)return null;const r=t[e.x];return r===a.INVALID_TIME_POINT_INDEX?null:{x:r,y:e.y,yloc:e.yl,text:e.t,style:e.st,size:e.sz,colorIndex:e.ci,textColorIndex:e.tci,textAlign:e.ta||n.Center,tooltip:e.tt||"",fontType:null!==(i=e.tf)&&void 0!==i?i:null,forceOverlay:e.fo}}function c(e,t,i){var n;return{id:t,x:(0,l.ensureTimePointIndexIndex)(i.indexOf(e.x)),y:e.y,yl:e.yloc,t:e.text,st:e.style,sz:e.size,ci:e.colorIndex,tci:e.textColorIndex,ta:e.textAlign,tt:e.tooltip,tf:null!==(n=e.fontType)&&void 0!==n?n:void 0,fo:e.forceOverlay}}function h(e,t){return t.contains(e.x)}},276507:(e,t,i)=>{"use strict";i.d(t,{containsDwgLineFillTimePointIndexes:()=>n,dematerializeDwgLineFill:()=>o,materializeDwgLineFill:()=>r});const n=!1;function r(e){return{id:e.id,line1:e.line1,line2:e.line2,colorIndex:e.ci}}function o(e,t){return{id:t,line1:e.line1,line2:e.line2,ci:e.colorIndex}}},164937:(e,t,i)=>{"use strict";i.d(t,{DwgLineStyle:()=>n,containsDwgLineTimePointIndexes:()=>a,dematerializeDwgLine:()=>d,isDwgLineInBarsRange:()=>u,materializeDwgLine:()=>l});var n,r=i(501571),o=i(585240),s=i(597461);!function(e){e.Solid="sol",e.Dotted="dot",e.Dashed="dsh",e.LeftArrow="al",e.RightArrow="ar",e.BothArrow="ab"}(n||(n={}));const a=!0;function l(e,t){if(e.x1>=t.length||e.x2>=t.length||null===e.y1||null===e.y2)return null
;let i=t[e.x1],n=t[e.x2];return i===r.INVALID_TIME_POINT_INDEX&&(i=null),n===r.INVALID_TIME_POINT_INDEX&&(n=null),null!==i&&null!==n||e.y1===e.y2?{id:e.id,x1:i,y1:e.y1,x2:n,y2:e.y2,style:e.st,extend:e.ex,width:e.w,colorIndex:e.ci,forceOverlay:e.fo}:null}function d(e,t,i){var n,s;const a=(0,o.ensureTimePointIndexIndex)(i.indexOf(null!==(n=e.x1)&&void 0!==n?n:r.INVALID_TIME_POINT_INDEX)),l=(0,o.ensureTimePointIndexIndex)(i.indexOf(null!==(s=e.x2)&&void 0!==s?s:r.INVALID_TIME_POINT_INDEX));return{id:t,x1:a,y1:e.y1,x2:l,y2:e.y2,st:e.style,ex:e.extend,w:e.width,ci:e.colorIndex,fo:e.forceOverlay}}function u(e,t){const i=e.extend;if(i===s.DwgExtend.Both)return!0;if(null===e.x1||null===e.x2)return null!==e.x2?e.x2<=t.lastBar()&&i===s.DwgExtend.Right:null!==e.x1&&(e.x1>=t.firstBar()&&i===s.DwgExtend.Left);const n=Math.min(e.x1,e.x2),r=Math.max(e.x1,e.x2);if(t.contains(n)||t.contains(r)||n<t.firstBar()&&r>t.lastBar())return!0;const o=e.x1<e.x2?e.extend===s.DwgExtend.Left:e.extend===s.DwgExtend.Right,a=e.x1<e.x2?e.extend===s.DwgExtend.Right:e.extend===s.DwgExtend.Left;return r<t.firstBar()&&a||n>t.lastBar()&&o}},551789:(e,t,i)=>{"use strict";i.d(t,{DwgPolylineStyle:()=>s,containsDwgPolylineTimePointIndexes:()=>o,dematerializeDwgPolyline:()=>l,isDwgPolylineInBarsRange:()=>d,materializeDwgPolyline:()=>a});var n=i(585240),r=i(501571);const o=!0;var s;function a(e,t){const i=[];for(const n of e.points){if(n.x>=t.length)continue;const e=t[n.x];e!==r.INVALID_TIME_POINT_INDEX&&i.push({x:e,y:n.y})}return 0===i.length?null:{id:e.id,points:i,width:e.w,curved:e.crv,closed:e.cls,color:e.c,fillColor:e.fc,style:e.st,forceOverlay:e.fo}}function l(e,t,i){return{id:t,points:e.points.map((e=>{var t;return{x:(0,n.ensureTimePointIndexIndex)(i.indexOf(null!==(t=e.x)&&void 0!==t?t:r.INVALID_TIME_POINT_INDEX)),y:e.y}})),w:e.width,crv:e.curved,cls:e.closed,c:e.color,fc:e.fillColor,st:e.style,fo:e.forceOverlay}}function d(e,t){if(0===e.points.length)return!1;const i=t.firstBar(),n=t.lastBar();let r=!1,o=!1;for(const s of e.points){if(t.contains(s.x))return!0;if(s.x<i?r=!0:s.x>n&&(o=!0),r&&o)return!0}return!1}!function(e){e.Solid="sol",e.Dotted="dot",e.Dashed="dsh",e.ArrowLeft="al",e.ArrowRight="ar",e.ArrowBoth="ab"}(s||(s={}))},817959:(e,t,i)=>{"use strict";var n,r;i.d(t,{DwgTableCellFontType:()=>r,containsDwgTableCellTimePointIndexes:()=>l,containsDwgTableTimePointIndexes:()=>o,dematerializeDwgTable:()=>a,dematerializeDwgTableCell:()=>u,materializeDwgTable:()=>s,materializeDwgTableCell:()=>d}),function(e){e.Top="top",e.Center="center",e.Bottom="bottom"}(n||(n={})),function(e){e.Monospace="monospace"}(r||(r={}));const o=!1;function s(e,t){return{id:e.id,position:e.pos,rows:e.rows,columns:e.cols,backgroundColorIndex:e.bgc,frameColorIndex:e.frmc,frameWidth:e.frmw,borderColorIndex:e.brdc,borderWidth:e.brdw,forceOverlay:e.fo}}function a(e,t,i){return{id:t,pos:e.position,rows:e.rows,cols:e.columns,bgc:e.backgroundColorIndex,frmc:e.frameColorIndex,frmw:e.frameWidth,brdc:e.borderColorIndex,brdw:e.borderWidth,fo:e.forceOverlay}}const l=!1;function d(e,t){
var i,n,r;return{tableId:e.tid,row:e.row,column:e.col,widthInPercentsOfPaneWidth:e.w,heightInPercentOfPaneHeight:e.h,text:e.t,textColorIndex:e.tc,horizontalTextAlignment:e.tha,verticalTextAlignment:e.tva,fontSize:e.ts,backgroundColorIndex:e.bgc,colSpan:null!==(i=e.colspan)&&void 0!==i?i:1,rowSpan:null!==(n=e.rowspan)&&void 0!==n?n:1,tooltip:e.tt,fontType:null!==(r=e.tf)&&void 0!==r?r:null}}function u(e,t,i){var n;return{id:t,tid:e.tableId,row:e.row,col:e.column,w:e.widthInPercentsOfPaneWidth,h:e.heightInPercentOfPaneHeight,t:e.text,tc:e.textColorIndex,tha:e.horizontalTextAlignment,tva:e.verticalTextAlignment,ts:e.fontSize,bgc:e.backgroundColorIndex,colspan:e.colSpan,rowspan:e.rowSpan,tt:e.tooltip,tf:null!==(n=e.fontType)&&void 0!==n?n:void 0}}},656723:(e,t,i)=>{"use strict";i.d(t,{LiveStudyGraphics:()=>s.LiveStudyGraphics,createGraphicsPaneViews:()=>p,createGraphicsPriceAxisViews:()=>v,emptyStudyGraphics:()=>o.emptyStudyGraphics,isStudyGraphicsEmpty:()=>r.isStudyGraphicsEmpty,loadStudyGraphics:()=>o.loadStudyGraphics,saveStudyGraphics:()=>o.saveStudyGraphics});var n=i(338619),r=i(355468),o=i(515821),s=i(444468),a=i(347808),l=i(432059);class d extends a.PriceAxisView{constructor(e,t){super(),this._source=e,this._data=t}_updateRendererData(e,t,i){var n,r;e.visible=!1;const o=this._source.priceScale(),s=this._source.properties().childs(),a=s.visible.value();if(!o||o.isEmpty()||!a)return;const d=null===(r=null===(n=s.graphics.childs()[this._data.lineType])||void 0===n?void 0:n.childs()[this._data.styleId])||void 0===r?void 0:r.childs();if(!(void 0!==d&&d.visible&&d.visible.value()&&d.showPrice&&d.showPrice.value()&&this._isLabelVisibleAccordinglyToProperties()))return;const u=this._source.firstValue();if(null===u)return;const c=this._data.line.level,h=(0,l.resetTransparency)(d.color.value());i.background=h,i.textColor=this.generateTextColor(h),i.coordinate=o.priceToCoordinate(c,u),e.text=o.formatPrice(c,u,{signPositive:o.isPercentage()}),e.visible=!0}_isLabelVisibleAccordinglyToProperties(){const e=this._source.model().properties().childs().scalesProperties.childs();return(e.showStudyLastValue.value()||e.showFundamentalLastValue.value())&&this._source.properties().childs().showLabelsOnPriceScale.value()}}const u=(0,n.getLogger)("Chart.StudyGraphics"),c=new Set(["dwgtablecells","tpoBlockSets","tpoLevels","tpoVolumeRows","logs","performance"]);async function h(e,t,n,r){const o=e=>({regularPaneView:new e(t,n,r)}),s=e=>({regularPaneView:new e(t,n,!1,r),forceOverlayPaneView:new e(t,n,!0,r)});switch(e){case"hlines":return o((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,600458))).LevelPaneView);case"lines":return o((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,565165))).LinePaneView);case"shapemarks":return o((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,515128))).ShapeMarkPaneView);case"textmarks":return o((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,326750))).TextMarkPaneView)
;case"trendchannels":return o((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,122466))).TrendChannelPaneView);case"dwglabels":return s((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,497861))).DwgLabelPaneView);case"dwglines":return s((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,542435))).DwgLinePaneView);case"dwgpolylines":return s((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,230123))).DwgPolylinePaneView);case"dwgboxes":return s((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,801028))).DwgBoxPaneView);case"dwgtables":return s((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,492080))).DwgTablePaneView);case"dwglinefills":return s((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,700885))).DwgLineFillPaneView);case"tpos":return{regularPaneView:new((await Promise.all([i.e(32856),i.e(34485),i.e(92013),i.e(88509),i.e(89052),i.e(10640),i.e(87465),i.e(769)]).then(i.bind(i,372061))).TpoPaneView)(t,n,r)};case"footprints":return{regularPaneView:new((await Promise.all([i.e(80977),i.e(9141)]).then(i.bind(i,5261))).VolumeFootprintPaneView)(t,n)}}switch(e){case"hhists":return o((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,266096))).HHistPaneView);case"horizlines":return o((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,72450))).HorizLinePaneView);case"vertlines":return o((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,785805))).VertLinePaneView);case"polygons":return o((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,900940))).PolygonPaneView);case"backgrounds":return o((await Promise.all([i.e(88509),i.e(77916),i.e(94424),i.e(20507)]).then(i.bind(i,342792))).BackgroundPaneView)}return null}async function p(e,t,i){const n=[],r=[],o=Object.keys(e.graphicsInfo());o.sort(((e,t)=>m(e)-m(t)));for(const s of o){const o=await h(s,e,t,i);null!==o?(n.push(o.regularPaneView),o.forceOverlayPaneView&&r.push(o.forceOverlayPaneView)):c.has(s)||u.logWarn(`${s} is not supported by this build of graphics subsystem, skipping`)}return{regularPaneViews:n,forceOverlayPaneViews:r}}function m(e){var t;return null!==(t=r.primitivesZOrders.get(e))&&void 0!==t?t:0}function v(e){const t=Object.keys(e.graphicsInfo()),i=[];for(const n of t)switch(n){case"hlines":e.graphics().hlines().forEach(((t,r)=>{t.forEach((t=>{void 0!==t.level&&i.push(new d(e,{line:{level:t.level},styleId:r,lineType:n}))}))}));break;case"horizlines":e.graphics().horizlines().forEach(((t,r)=>{t.forEach((t=>{void 0!==t.level&&i.push(new d(e,{line:{level:t.level},styleId:r,lineType:n}))}))}))}return i}},307801:(e,t,i)=>{"use strict";i.d(t,{HHistDirection:()=>s.HHistDirection,HHistLocation:()=>s.HHistLocation,HHistVolumeMode:()=>s.HHistVolumeMode,containsHHistTimePointIndexes:()=>a,dematerializeHHist:()=>d,isHHistInBarsRange:()=>u,
materializeHHist:()=>l});var n=i(650151),r=i(501571),o=i(585240),s=i(577916);const a=!0;function l(e,t){if(e.firstBarTime>=t.length||e.lastBarTime>=t.length)return null;const i=t[e.firstBarTime],o=t[e.lastBarTime];return i===r.INVALID_TIME_POINT_INDEX||o===r.INVALID_TIME_POINT_INDEX?null:((0,n.assert)(i<=o,"firstBarTime should not exceed lastBarTime"),(0,n.assert)(e.priceLow<=e.priceHigh,"priceLow should not exceed priceHigh"),{firstBarTime:i,lastBarTime:o,rate:e.rate,priceHigh:e.priceHigh,priceLow:e.priceLow})}function d(e,t,i){const n=(0,o.ensureTimePointIndexIndex)(i.indexOf(e.firstBarTime)),r=(0,o.ensureTimePointIndexIndex)(i.indexOf(e.lastBarTime));return{id:t,...e,firstBarTime:n,lastBarTime:r}}function u(e,t){const i=Math.min(e.firstBarTime,e.lastBarTime),n=Math.max(e.firstBarTime,e.lastBarTime);return t.contains(i)||t.contains(n)||i<t.firstBar()&&n>t.lastBar()}},224621:(e,t,i)=>{"use strict";i.d(t,{containsHorizLineTimePointIndexes:()=>s,dematerializeHorizLine:()=>l,isHorizLineInBarsRange:()=>d,materializeHorizLine:()=>a});var n=i(650151),r=i(501571),o=i(585240);const s=!0;function a(e,t){if(e.startIndex>=t.length||e.endIndex>=t.length)return null;const i=t[e.startIndex],o=t[e.endIndex];return i===r.INVALID_TIME_POINT_INDEX||o===r.INVALID_TIME_POINT_INDEX?null:((0,n.assert)(i<=o,"startIndex should not exceed endIndex"),{startIndex:i,endIndex:o,level:e.level,extendLeft:e.extendLeft,extendRight:e.extendRight})}function l(e,t,i){const n=(0,o.ensureTimePointIndexIndex)(i.indexOf(e.startIndex)),r=(0,o.ensureTimePointIndexIndex)(i.indexOf(e.endIndex));return{id:t,...e,startIndex:n,endIndex:r}}function d(e,t){const i=Math.min(e.startIndex,e.endIndex),n=Math.max(e.startIndex,e.endIndex);if(t.contains(i)||t.contains(n)||i<t.firstBar()&&n>t.lastBar())return!0;const r=e.startIndex<e.endIndex?e.extendLeft:e.extendRight,o=e.startIndex<e.endIndex?e.extendRight:e.extendLeft;return n<t.firstBar()&&o||i>t.lastBar()&&r}},951586:(e,t,i)=>{"use strict";var n;i.d(t,{TextPos:()=>n,containsLevelTimePointIndexes:()=>r,dematerializeLevel:()=>s,materializeLevel:()=>o}),function(e){e[e.TopLeft=0]="TopLeft",e[e.TopCenter=1]="TopCenter",e[e.TopRight=2]="TopRight",e[e.MiddleLeft=3]="MiddleLeft",e[e.MiddleCenter=4]="MiddleCenter",e[e.MiddleRight=5]="MiddleRight",e[e.BottomLeft=6]="BottomLeft",e[e.BottomCenter=7]="BottomCenter",e[e.BottomRight=8]="BottomRight"}(n||(n={}));const r=!1;function o(e){return{level:e.level,text:e.text}}function s(e,t,i){return{id:t,...e}}},649420:(e,t,i)=>{"use strict";i.d(t,{containsLineTimePointIndexes:()=>s,dematerializeLine:()=>l,isLineInBarsRange:()=>d,materializeLine:()=>a});var n=i(650151),r=i(501571),o=i(585240);const s=!0;function a(e,t){if(e.startIndex>=t.length||e.endIndex>=t.length)return null;const i=t[e.startIndex],o=t[e.endIndex];return i===r.INVALID_TIME_POINT_INDEX||o===r.INVALID_TIME_POINT_INDEX?null:((0,n.assert)(i<=o,"startIndex should not exceed endIndex"),{startIndex:i,endIndex:o,startOffset:e.startOffset,endOffset:e.endOffset,startPrice:e.startPrice,endPrice:e.endPrice})}function l(e,t,i){
const n=(0,o.ensureTimePointIndexIndex)(i.indexOf(e.startIndex)),r=(0,o.ensureTimePointIndexIndex)(i.indexOf(e.endIndex));return{id:t,...e,startIndex:n,endIndex:r}}function d(e,t){var i,n;const r=e.startIndex+(null!==(i=e.startOffset)&&void 0!==i?i:0),o=e.endIndex+(null!==(n=e.endOffset)&&void 0!==n?n:0),s=Math.min(r,o),a=Math.max(r,o);return t.contains(r)||t.contains(o)||s<t.firstBar()&&a>t.lastBar()}},444468:(e,t,i)=>{"use strict";i.d(t,{LiveStudyGraphics:()=>B});var n=i(650151),r=i(828473),o=i(942634),s=i(307801),a=i(224621),l=i(267439),d=i(239041),u=i(759214),c=i(15141),h=i(164937),p=i(551789),m=i(18613),v=i(951586),g=i(649420),f=i(521854),y=i(968632),x=i(323070),_=i(817959),I=i(276507),T=i(892686),w=i(487027),b=i(399890),S=i(73239),P=i(130551);function E(e){const t=JSON.parse(e.pp);var i;return(0,n.assert)("s"in(i=t)&&(0,P.isObject)(i.s)&&"l"in i.s&&"c"in i.s&&"e"in i&&(0,P.isObject)(i.e)&&"l"in i.e&&"c"in i.e,"unexpected log source"),{barTime:e.t,time:e.tms,level:e.ll,source:{start:{line:t.s.l,column:t.s.c},end:{line:t.e.l,column:t.e.c}},message:e.m}}function C(e){return{lines:e.l,time:e.t,invocations:e.c}}function A(e){return{total:e.total,profile:e.profile.map(C)}}var L=i(255866),D=i(408582),M=i(355468),N=i(515821);class B{constructor(e={}){this._indexes=[],this._hhistsByTimePointIndex=new Map,this._primitivesCollection=function(e){const t={};for(const i of M.primitiveNames){t[i]=new Map;const n=e[i];if(void 0!==n)for(const e in n)if(n.hasOwnProperty(e))switch(i){case"horizlines":t[i].set(e,H.horizlines());break;case"vertlines":t[i].set(e,H.vertlines());break;case"lines":t[i].set(e,H.lines());break;case"hlines":t[i].set(e,H.hlines());break;case"textmarks":t[i].set(e,H.textmarks());break;case"shapemarks":t[i].set(e,H.shapemarks());break;case"backgrounds":t[i].set(e,H.backgrounds());break;case"polygons":t[i].set(e,H.polygons());break;case"trendchannels":t[i].set(e,H.trendchannels());break;case"hhists":t[i].set(e,H.hhists());break;case"dwglabels":case"dwglines":case"dwgpolylines":case"dwgboxes":case"dwgtables":case"tpoBlockSets":case"tpoLevels":case"tpoVolumeRows":t[i].set(e,new Map);break;case"dwgtablecells":t[i].set(e,H.dwgtablecells());break;case"dwglinefills":t[i].set(e,H.dwglinefills());break;case"tpos":t[i].set(e,H.tpos());break;case"logs":t[i].set(e,H.logs());break;case"footprints":t[i].set(e,H.footprints());break;case"footprintLevels":t[i].set(e,H.footprintLevels())}}t.performance.set("performance",new V(A,false));return t}(e)}horizlines(){return this._primitivesCollection.horizlines}vertlines(){return this._primitivesCollection.vertlines}lines(){return this._primitivesCollection.lines}hlines(){return this._primitivesCollection.hlines}textmarks(){return this._primitivesCollection.textmarks}shapemarks(){return this._primitivesCollection.shapemarks}backgrounds(){return this._primitivesCollection.backgrounds}polygons(){return this._primitivesCollection.polygons}trendchannels(){return this._primitivesCollection.trendchannels}hhists(){return this._primitivesCollection.hhists}dwglabels(){
return this._primitivesCollection.dwglabels}dwglines(){return this._primitivesCollection.dwglines}dwgpolylines(){return this._primitivesCollection.dwgpolylines}dwgboxes(){return this._primitivesCollection.dwgboxes}dwgtables(){return this._primitivesCollection.dwgtables}dwgtablecells(){return this._primitivesCollection.dwgtablecells}dwglinefills(){return this._primitivesCollection.dwglinefills}tpos(){return this._primitivesCollection.tpos}tpoBlockSets(){return this._primitivesCollection.tpoBlockSets}tpoLevels(){return this._primitivesCollection.tpoLevels}tpoVolumeRows(){return this._primitivesCollection.tpoVolumeRows}logs(){return this._primitivesCollection.logs}observableLogs(){return this._primitivesCollection.logs}performance(){return this._primitivesCollection.performance}observablePerformance(){return this._primitivesCollection.performance}footprints(){return this._primitivesCollection.footprints}footprintLevels(){return this._primitivesCollection.footprintLevels}hhistsByTimePointIndex(){return this._hhistsByTimePointIndex}clear(){this._indexes=[];for(const e of M.regularPrimitiveNames)this._primitivesCollection[e].forEach((e=>e.clear()));for(const e of M.groupedPrimitiveNames)this._primitivesCollection[e].forEach((e=>{e.forEach((e=>e.clear()))}));this._hhistsByTimePointIndex=new Map}extract(){const e={indexes:this._indexes,horizlines:R(this._primitivesCollection.horizlines),vertlines:R(this._primitivesCollection.vertlines),lines:R(this._primitivesCollection.lines),hlines:R(this._primitivesCollection.hlines),textmarks:R(this._primitivesCollection.textmarks),shapemarks:R(this._primitivesCollection.shapemarks),backgrounds:R(this._primitivesCollection.backgrounds),polygons:R(this._primitivesCollection.polygons),trendchannels:R(this._primitivesCollection.trendchannels),hhists:R(this._primitivesCollection.hhists),dwglabels:O(this._primitivesCollection.dwglabels),dwglines:O(this._primitivesCollection.dwglines),dwgpolylines:O(this._primitivesCollection.dwgpolylines),dwgboxes:O(this._primitivesCollection.dwgboxes),dwgtables:O(this._primitivesCollection.dwgtables),dwgtablecells:R(this._primitivesCollection.dwgtablecells),dwglinefills:R(this._primitivesCollection.dwglinefills),tpos:R(this._primitivesCollection.tpos),tpoBlockSets:O(this._primitivesCollection.tpoBlockSets),tpoLevels:O(this._primitivesCollection.tpoLevels),tpoVolumeRows:O(this._primitivesCollection.tpoVolumeRows),logs:new Map,performance:new Map,footprints:R(this._primitivesCollection.footprints),footprintLevels:R(this._primitivesCollection.footprintLevels)};return this._hhistsByTimePointIndex=new Map,new N.StaticStudyGraphics("data",e)}replaceIndexesTo(e){this._indexes=e;const t=e=>e.replaceIndexesTo(this._indexes);for(const e of M.regularPrimitiveNames)this._primitivesCollection[e].forEach(t);for(const e of M.groupedPrimitiveNames)this._primitivesCollection[e].forEach((e=>{e.forEach(t)}));this._hhistsByTimePointIndex=(0,M.splitHHistsByTimePointIndex)(this._primitivesCollection.hhists)}processCommands(e){void 0!==e.erase&&this._processEraseCommands(e.erase),
void 0!==e.create&&this._processCreateCommands(e.create)}_processCreateCommands(e){for(const t in e){if(!e.hasOwnProperty(t))continue;const i=t;switch(i){case"horizlines":F(this._indexes,this._primitivesCollection.horizlines,e[i]);break;case"vertlines":F(this._indexes,this._primitivesCollection.vertlines,e[i]);break;case"lines":F(this._indexes,this._primitivesCollection.lines,e[i]);break;case"hlines":F(this._indexes,this._primitivesCollection.hlines,e[i]);break;case"textmarks":F(this._indexes,this._primitivesCollection.textmarks,e[i]);break;case"shapemarks":F(this._indexes,this._primitivesCollection.shapemarks,e[i]);break;case"backgrounds":F(this._indexes,this._primitivesCollection.backgrounds,e[i]);break;case"polygons":F(this._indexes,this._primitivesCollection.polygons,e[i]);break;case"trendchannels":F(this._indexes,this._primitivesCollection.trendchannels,e[i]);break;case"hhists":F(this._indexes,this._primitivesCollection.hhists,e[i]);break;case"dwglabels":z(i,this._indexes,this._primitivesCollection.dwglabels,H.dwglabels,e[i]);break;case"dwglines":z(i,this._indexes,this._primitivesCollection.dwglines,H.dwglines,e[i]);break;case"dwgpolylines":z(i,this._indexes,this._primitivesCollection.dwgpolylines,H.dwgpolylines,e[i]);break;case"dwgboxes":z(i,this._indexes,this._primitivesCollection.dwgboxes,H.dwgboxes,e[i]);break;case"dwgtables":z(i,this._indexes,this._primitivesCollection.dwgtables,H.dwgtables,e[i]);break;case"dwgtablecells":F(this._indexes,this._primitivesCollection.dwgtablecells,e[i]);break;case"dwglinefills":F(this._indexes,this._primitivesCollection.dwglinefills,e[i]);break;case"tpos":F(this._indexes,this._primitivesCollection.tpos,e[i]);break;case"tpoBlockSets":z(i,this._indexes,this._primitivesCollection.tpoBlockSets,H.tpoBlockSets,e[i]);break;case"tpoLevels":z(i,this._indexes,this._primitivesCollection.tpoLevels,H.tpoLevels,e[i]);break;case"tpoVolumeRows":z(i,this._indexes,this._primitivesCollection.tpoVolumeRows,H.tpoVolumeRows,e[i]);break;case"logs":F(this._indexes,this._primitivesCollection.logs,e[i]);break;case"performance":F(this._indexes,this._primitivesCollection.performance,e[i]);break;case"footprints":F(this._indexes,this._primitivesCollection.footprints,e[i]);break;case"footprintLevels":F(this._indexes,this._primitivesCollection.footprintLevels,e[i])}}this._hhistsByTimePointIndex=(0,M.splitHHistsByTimePointIndex)(this._primitivesCollection.hhists)}_processEraseCommands(e){for(const t of e)if("all"===t.action){for(const e of M.regularPrimitiveNames)this._primitivesCollection[e].forEach((e=>e.clearPrimitives()));for(const e of M.groupedPrimitiveNames)this._primitivesCollection[e].forEach((e=>{e.forEach((e=>e.clearPrimitives()))}))}else{const e=e=>e.deleteById(t.id);(0,M.isRegularPrimiriveName)(t.type)?this._primitivesCollection[t.type].forEach(e):this._primitivesCollection[t.type].forEach((t=>{t.forEach(e)}))}this._hhistsByTimePointIndex=(0,M.splitHHistsByTimePointIndex)(this._primitivesCollection.hhists)}}class V{constructor(e,t){this._primitivesDataById=new Map,this._primitiveById=new Map,
this._changed=new o.Delegate,this._cleared=new o.Delegate,this._materializePrimitive=e,this._isRematerializationRequiredWithNewIndexes=t}changed(){return this._changed}cleared(){return this._cleared}forEach(e,t){this._primitiveById.forEach((i=>{e.call(t,i,i,this)}))}has(e){let t=!1;return this._primitiveById.forEach((i=>{t=t||i===e})),t}get size(){return this._primitiveById.size}[Symbol.iterator](){return this._primitiveById.values()}entries(){throw new Error("Not implemented")}keys(){throw new Error("Not implemented")}union(){throw new Error("Not implemented")}intersection(){throw new Error("Not implemented")}difference(){throw new Error("Not implemented")}symmetricDifference(){throw new Error("Not implemented")}isSubsetOf(){throw new Error("Not implemented")}isSupersetOf(){throw new Error("Not implemented")}isDisjointFrom(){throw new Error("Not implemented")}values(){return this._primitiveById.values()}hasId(e){return this._primitiveById.has(e)}addData(e,t){const i=[];e.forEach((e=>{this._primitivesDataById.set(e.id,e);const n=this._tryMaterialize(t,e);null!==n&&i.push(n)})),i.length>0&&this._changed.fire({created:i,removed:[]})}deleteById(e){const t=this._primitiveById.get(e);t&&(this._primitiveById.delete(e),this._primitivesDataById.delete(e),this._changed.fire({created:[],removed:[t]}))}clear(){this.clearPrimitives()}clearPrimitives(){this._primitivesDataById.clear(),this._primitiveById.clear(),this._cleared.fire()}replaceIndexesTo(e){if(!this._isRematerializationRequiredWithNewIndexes)return;const t=Array.from(this._primitiveById.values());this._primitiveById.clear(),this._primitivesDataById.forEach(this._tryMaterialize.bind(this,e),this);const i=Array.from(this._primitiveById.values());this._changed.fire({created:i,removed:t})}extract(){const e=new Set(this._primitivesDataById.values());return this.clearPrimitives(),e}_tryMaterialize(e,t){const i=this._materializePrimitive(t,e);return null!==i&&((0,n.assert)(!this._primitiveById.has(t.id),"primitive with specified id should not exist"),this._primitiveById.set(t.id,i)),i}}function k(e){const t=new Map;for(const[o,s]of e)t.set(o,(i=s,(n=t.get(o))?(0,r.join)(n,i.extract()):i.extract()));var i,n;return t}function R(e){return k((0,r.mapEntriesGenerator)(e))}function O(e){return k((0,r.nestedMapGenerator)(e))}function F(e,t,i=[]){for(const r of i){const i=r.styleId,o=t.get(i);(0,n.assert)(void 0!==o,"Every style used by graphics primitive should be declared in study metainfo"),o.addData(r.data,e)}}function z(e,t,i,r,o=[]){for(const s of o){const o=s.styleId,a=i.get(o);(0,n.assert)(void 0!==a,"Every style used by graphics primitive should be declared in study metainfo"),s.data.forEach((i=>{var n;const o=(0,M.getPrimitiveDataKey)(i,e),s=null!==(n=a.get(o))&&void 0!==n?n:r();s.addData([i],t),a.set(o,s)}))}}const H={horizlines:()=>new V(a.materializeHorizLine,a.containsHorizLineTimePointIndexes),vertlines:()=>new V(l.materializeVertLine,l.containsVertLineTimePointIndexes),lines:()=>new V(g.materializeLine,g.containsLineTimePointIndexes),
hlines:()=>new V(v.materializeLevel,v.containsLevelTimePointIndexes),textmarks:()=>new V(y.materializeTextMark,y.containsTextMarkTimePointIndexes),shapemarks:()=>new V(f.materializeShapeMark,f.containsShapeMarkTimePointIndexes),backgrounds:()=>new V(u.materializeBackground,u.containsBackgroundTimePointIndexes),polygons:()=>new V(d.materializePolygon,d.containsPolygonTimePointIndexes),trendchannels:()=>new V(x.materializeTrendChannel,x.containsTrendChannelTimePointIndexes),hhists:()=>new V(s.materializeHHist,s.containsHHistTimePointIndexes),dwglines:()=>new V(h.materializeDwgLine,h.containsDwgLineTimePointIndexes),dwglinefills:()=>new V(I.materializeDwgLineFill,I.containsDwgLineFillTimePointIndexes),dwglabels:()=>new V(c.materializeDwgLabel,c.containsDwgLabelTimePointIndexes),dwgtablecells:()=>new V(_.materializeDwgTableCell,_.containsDwgTableCellTimePointIndexes),dwgpolylines:()=>new V(p.materializeDwgPolyline,p.containsDwgPolylineTimePointIndexes),dwgboxes:()=>new V(m.materializeDwgBox,m.containsDwgBoxTimePointIndexes),dwgtables:()=>new V(_.materializeDwgTable,_.containsDwgTableTimePointIndexes),tpos:()=>new V(T.materializeTpo,T.containsTpoTimePointIndexes),tpoBlockSets:()=>new V(w.materializeTpoBlockSet,w.containsTpoBlockSetTimePointIndexes),tpoLevels:()=>new V(b.materializeTpoLevelGroup,b.containsTpoLevelGroupTimePointIndexes),tpoVolumeRows:()=>new V(S.materializeTpoVolumeRow,S.containsTpoVolumeRowTimePointIndexes),logs:()=>new V(E,false),footprints:()=>new V(L.materializeVolumeFootprint,L.containsFootprintTimePointIndexes),footprintLevels:()=>new V(D.materializeVolumeFootprintPriceLevel,D.containsFootprintPriceLevelTimePointIndexes)}},239041:(e,t,i)=>{"use strict";i.d(t,{containsPolygonTimePointIndexes:()=>o,dematerializePolygon:()=>a,isPolygonInBarsRange:()=>l,materializePolygon:()=>s});var n=i(501571),r=i(585240);const o=!0;function s(e,t){for(const i of e.points){if(i.index>=t.length)return null;if(t[i.index]===n.INVALID_TIME_POINT_INDEX)return null}return{points:e.points.map((e=>({index:t[e.index],offset:e.offset,level:e.level})))}}function a(e,t,i){return{id:t,points:e.points.map((e=>({...e,index:(0,r.ensureTimePointIndexIndex)(i.indexOf(e.index))})))}}function l(e,t){var i;if(e.points.some((e=>{var i;return t.contains(e.index+(null!==(i=e.offset)&&void 0!==i?i:0))})))return!0;let n=!1,r=!1;const o=t.firstBar();for(const t of e.points)t.index+(null!==(i=t.offset)&&void 0!==i?i:0)<o?n=!0:r=!0;return n&&r}},521854:(e,t,i)=>{"use strict";i.d(t,{containsShapeMarkTimePointIndexes:()=>s,dematerializeShapeMark:()=>l,isShapeMarkInBarsRange:()=>d,materializeShapeMark:()=>a});var n,r=i(501571),o=i(585240);!function(e){e.Circle="circle",e.ArrowUp="arrowUp",e.ArrowDown="arrowDown",e.ArrowRight="arrowRight",e.ArrowLeft="arrowLeft",e.Square="square"}(n||(n={}));const s=!0;function a(e,t){if(e.time>=t.length)return null;const i=t[e.time];return i===r.INVALID_TIME_POINT_INDEX?null:{time:i,price:e.price}}function l(e,t,i){const n=(0,o.ensureTimePointIndexIndex)(i.indexOf(e.time));return{id:t,...e,time:n}}function d(e,t){
return t.contains(e.time)}},515821:(e,t,i)=>{"use strict";i.d(t,{StaticStudyGraphics:()=>C,emptyStudyGraphics:()=>k,loadStudyGraphics:()=>R,saveStudyGraphics:()=>F});var n=i(501571),r=i(224621),o=i(267439),s=i(307801),a=i(239041),l=i(759214),d=i(951586),u=i(649420),c=i(521854),h=i(968632),p=i(323070),m=i(15141),v=i(164937),g=i(551789),f=i(18613),y=i(817959),x=i(276507),_=i(892686),I=i(487027),T=i(399890),w=i(73239),b=i(255866),S=i(408582),P=i(355468),E=i(124829);class C{constructor(e,t){if(this._indexes=[],this._horizlines=new Map,this._vertlines=new Map,this._lines=new Map,this._hlines=new Map,this._textmarks=new Map,this._shapemarks=new Map,this._backgrounds=new Map,this._polygons=new Map,this._trendchannels=new Map,this._hhists=new Map,this._dwglabels=new Map,this._dwglines=new Map,this._dwgpolylines=new Map,this._dwgboxes=new Map,this._dwgtables=new Map,this._dwgtablecells=new Map,this._dwglinefills=new Map,this._tpos=new Map,this._tpoBlockSets=new Map,this._tpoLevelGroups=new Map,this._tpoVolumeRows=new Map,this._logs=new Map,this._performance=new Map,this._footprints=new Map,this._footprintLevels=new Map,"data"===e){const e=t;this._indexes=e.indexes,this._vertlines=A(e.vertlines,this._indexes,o.materializeVertLine),this._horizlines=A(e.horizlines,this._indexes,r.materializeHorizLine),this._polygons=A(e.polygons,this._indexes,a.materializePolygon),this._hhists=A(e.hhists,this._indexes,s.materializeHHist),this._backgrounds=A(e.backgrounds,this._indexes,l.materializeBackground),this._lines=A(e.lines,this._indexes,u.materializeLine),this._hlines=A(e.hlines,this._indexes,d.materializeLevel),this._textmarks=A(e.textmarks,this._indexes,h.materializeTextMark),this._shapemarks=A(e.shapemarks,this._indexes,c.materializeShapeMark),this._trendchannels=A(e.trendchannels,this._indexes,p.materializeTrendChannel),this._dwglabels=L("dwglabels",e.dwglabels,this._indexes,m.materializeDwgLabel),this._dwglines=L("dwglines",e.dwglines,this._indexes,v.materializeDwgLine),this._dwgpolylines=L("dwgpolylines",e.dwgpolylines,this._indexes,g.materializeDwgPolyline),this._dwgboxes=L("dwgboxes",e.dwgboxes,this._indexes,f.materializeDwgBox),this._dwgtables=L("dwgtables",e.dwgtables,this._indexes,y.materializeDwgTable),this._dwgtablecells=A(e.dwgtablecells,this._indexes,y.materializeDwgTableCell),this._dwglinefills=A(e.dwglinefills,this._indexes,x.materializeDwgLineFill),this._tpos=A(e.tpos,this._indexes,_.materializeTpo),this._tpoBlockSets=L("tpoBlockSets",e.tpoBlockSets,this._indexes,I.materializeTpoBlockSet),this._tpoVolumeRows=L("tpoVolumeRows",e.tpoVolumeRows,this._indexes,w.materializeTpoVolumeRow),this._tpoLevelGroups=L("tpoLevels",e.tpoLevels,this._indexes,T.materializeTpoLevelGroup),this._footprints=A(e.footprints,this._indexes,b.materializeVolumeFootprint),this._footprintLevels=A(e.footprintLevels,this._indexes,S.materializeVolumeFootprintPriceLevel)}else if("state"===e){const e=t;this._indexes=e.indexes||[],this._vertlines=D(e.vertlines,this._indexes,o.materializeVertLine),
this._horizlines=D(e.horizlines,this._indexes,r.materializeHorizLine),this._polygons=D(e.polygons,this._indexes,a.materializePolygon),this._hhists=D(e.hhists,this._indexes,s.materializeHHist),this._backgrounds=D(e.backgrounds,this._indexes,l.materializeBackground),this._lines=D(e.lines,this._indexes,u.materializeLine),this._hlines=D(e.hlines,this._indexes,d.materializeLevel),this._textmarks=D(e.textmarks,this._indexes,h.materializeTextMark),this._shapemarks=D(e.shapemarks,this._indexes,c.materializeShapeMark),this._trendchannels=D(e.trendchannels,this._indexes,p.materializeTrendChannel),this._dwglabels=M("dwglabels",e.dwglabels,this._indexes,m.materializeDwgLabel),this._dwglines=M("dwglines",e.dwglines,this._indexes,v.materializeDwgLine),this._dwgpolylines=M("dwgpolylines",e.dwgpolylines,this._indexes,g.materializeDwgPolyline),this._dwgboxes=M("dwgboxes",e.dwgboxes,this._indexes,f.materializeDwgBox),this._dwgtables=M("dwgtables",e.dwgtables,this._indexes,y.materializeDwgTable),this._dwgtablecells=D(e.dwgtablecells,this._indexes,y.materializeDwgTableCell),this._dwglinefills=D(e.dwglinefills,this._indexes,x.materializeDwgLineFill),this._tpos=D(e.tpos,this._indexes,_.materializeTpo),this._tpoBlockSets=M("tpoBlockSets",e.tpoBlockSets,this._indexes,I.materializeTpoBlockSet),this._tpoVolumeRows=M("tpoVolumeRows",e.tpoVolumeRows,this._indexes,w.materializeTpoVolumeRow),this._tpoLevelGroups=M("tpoLevels",e.tpoLevels,this._indexes,T.materializeTpoLevelGroup),this._footprints=D(e.footprints,this._indexes,b.materializeVolumeFootprint),this._footprintLevels=D(e.footprintLevels,this._indexes,S.materializeVolumeFootprintPriceLevel)}this._hhistsByTimePointIndex=(0,P.splitHHistsByTimePointIndex)(this._hhists)}horizlines(){return this._horizlines}vertlines(){return this._vertlines}lines(){return this._lines}hlines(){return this._hlines}textmarks(){return this._textmarks}shapemarks(){return this._shapemarks}backgrounds(){return this._backgrounds}polygons(){return this._polygons}trendchannels(){return this._trendchannels}hhists(){return this._hhists}dwglabels(){return this._dwglabels}dwglines(){return this._dwglines}dwgpolylines(){return this._dwgpolylines}dwgboxes(){return this._dwgboxes}dwgtables(){return this._dwgtables}dwgtablecells(){return this._dwgtablecells}dwglinefills(){return this._dwglinefills}tpos(){return this._tpos}tpoBlockSets(){return this._tpoBlockSets}tpoLevels(e){return this._tpoLevelGroups}tpoVolumeRows(e){return this._tpoVolumeRows}logs(){return this._logs}performance(){return this._performance}footprints(){return this._footprints}footprintLevels(){return this._footprintLevels}hhistsByTimePointIndex(){return this._hhistsByTimePointIndex}}function A(e,t,i){return new Map(Array.from(e.entries()).map((e=>[e[0],new Set(Array.from(e[1]).map((e=>i(e,t))).filter(E.notNull))])))}function L(e,t,i,n){const r=t=>{const i=new Map;return t.forEach((t=>{var n;const r=(0,P.getPrimitiveKey)(t,e),o=null!==(n=i.get(r))&&void 0!==n?n:new Set;o.add(t),i.set(r,o)})),i}
;return new Map(Array.from(t.entries()).map((e=>[e[0],r(Array.from(e[1]).map((e=>n(e,i))).filter(E.notNull))])))}function D(e,t,i){const n=new Map;if(void 0===e)return n;for(const r of e){const e=r.styleId,o=n.get(e)||new Set;r.data.forEach((e=>{const n=i(e,t);null!==n&&o.add(n)})),n.set(e,o)}return n}function M(e,t,i,n){const r=t=>{const i=new Map;return t.forEach((t=>{var n;const r=(0,P.getPrimitiveKey)(t,e),o=null!==(n=i.get(r))&&void 0!==n?n:new Set;o.add(t),i.set(r,o)})),i};return new Map((null!=t?t:[]).map((e=>[e.styleId,r(e.data.map((e=>n(e,i))).filter(E.notNull))])))}function N(e,t,i){let n=null;for(const i of e)i.styleId===t&&(n=i);null===n&&(n={styleId:t,data:[]},e.push(n)),n.data.push(i)}function B(e,t,i,n,r,o){const s=[];return e.forEach(((e,a)=>{e.forEach((e=>{(null===r||n(e,r))&&N(s,a,o(e,t(e),i))}))})),s.length>0?s:void 0}function V(e,t,i,n,r,o){const s=[];return e.forEach(((e,a)=>{e.forEach((e=>{e.forEach((e=>{(null===r||n(e,r))&&N(s,a,o(e,t(e),i))}))}))})),s.length>0?s:void 0}function k(){return new C}function R(e){return new C("state",e)}function O(e,t){return!0}function F(e,t){var i,P,C,A;const L=function(e){const t=new Set,i=e=>{null!=e&&t.add(e)};e.horizlines().forEach(((e,i)=>{e.forEach((e=>{t.add(e.startIndex),t.add(e.endIndex)}))})),e.vertlines().forEach(((e,i)=>{e.forEach((e=>{t.add(e.index)}))})),e.lines().forEach(((e,i)=>{e.forEach((e=>{t.add(e.startIndex),t.add(e.endIndex)}))})),e.textmarks().forEach(((e,i)=>{e.forEach((e=>{t.add(e.time)}))})),e.shapemarks().forEach(((e,i)=>{e.forEach((e=>{t.add(e.time)}))})),e.backgrounds().forEach(((e,i)=>{e.forEach((e=>{t.add(null!==e.start?e.start:n.INVALID_TIME_POINT_INDEX),t.add(e.stop)}))})),e.polygons().forEach(((e,i)=>{e.forEach((e=>{e.points.forEach((e=>{t.add(e.index)}))}))})),e.trendchannels().forEach(((e,i)=>{e.forEach((e=>{t.add(e.startIndex),t.add(e.endIndex)}))})),e.hhists().forEach(((e,i)=>{e.forEach((e=>{t.add(e.firstBarTime),t.add(e.lastBarTime)}))})),e.dwglabels().forEach((e=>{e.forEach((e=>{e.forEach((e=>{t.add(e.x)}))}))})),e.dwglines().forEach((e=>{e.forEach((e=>{e.forEach((e=>{var i,r;t.add(null!==(i=e.x1)&&void 0!==i?i:n.INVALID_TIME_POINT_INDEX),t.add(null!==(r=e.x2)&&void 0!==r?r:n.INVALID_TIME_POINT_INDEX)}))}))})),e.dwgpolylines().forEach((e=>{e.forEach((e=>{e.forEach((e=>{var i;for(const r of e.points)t.add(null!==(i=r.x)&&void 0!==i?i:n.INVALID_TIME_POINT_INDEX)}))}))})),e.dwgboxes().forEach((e=>{e.forEach((e=>{e.forEach((e=>{var i,r;t.add(null!==(i=e.left)&&void 0!==i?i:n.INVALID_TIME_POINT_INDEX),t.add(null!==(r=e.right)&&void 0!==r?r:n.INVALID_TIME_POINT_INDEX)}))}))})),e.tpos().forEach((e=>{e.forEach((e=>{t.add(e.firstBarTime),t.add(e.lastBarTime)}))})),e.tpoLevels().forEach((e=>{e.forEach((e=>{e.forEach((e=>{var t;i(e.poorHighExtendTo),i(e.poorLowExtendTo),i(e.tpoPocExtendTo),(null!==(t=e.singleprints)&&void 0!==t?t:[]).map((e=>e.extendTo)).map(i)}))}))})),e.footprints().forEach((e=>{e.forEach((e=>{t.add(e.index)}))})),e.footprintLevels().forEach((e=>{e.forEach((e=>{t.add(e.startIndex),i(e.extendTo)}))}))
;const r=Array.from(t);return r.sort(((e,t)=>e-t)),r}(e),D={indexes:L};let M=0;const N=()=>++M,k=e=>e.id;D.vertlines=B(e.vertlines(),N,L,o.isVertLineInBarsRange,t,o.dematerializeVertLine),D.horizlines=B(e.horizlines(),N,L,r.isHorizLineInBarsRange,t,r.dematerializeHorizLine),D.polygons=B(e.polygons(),N,L,a.isPolygonInBarsRange,t,a.dematerializePolygon),D.hhists=B(e.hhists(),N,L,s.isHHistInBarsRange,t,s.dematerializeHHist),D.backgrounds=B(e.backgrounds(),N,L,l.isBackgroundInBarsRange,t,l.dematerializeBackground);{D.lines=B(e.lines(),N,L,u.isLineInBarsRange,t,u.dematerializeLine),D.hlines=B(e.hlines(),N,L,O,t,d.dematerializeLevel),D.textmarks=B(e.textmarks(),N,L,h.isTextMarkInBarsRange,t,h.dematerializeTextMark),D.shapemarks=B(e.shapemarks(),N,L,c.isShapeMarkInBarsRange,t,c.dematerializeShapeMark),D.trendchannels=B(e.trendchannels(),N,L,p.isTrendChannelInBarsRange,t,p.dematerializeTrendChannel),D.dwglabels=V(e.dwglabels(),N,L,m.isDwgLabelInBarsRange,t,m.dematerializeDwgLabel),D.dwglines=V(e.dwglines(),k,L,v.isDwgLineInBarsRange,t,v.dematerializeDwgLine),D.dwgpolylines=V(e.dwgpolylines(),k,L,g.isDwgPolylineInBarsRange,t,g.dematerializeDwgPolyline),D.dwgboxes=V(e.dwgboxes(),N,L,f.isDwgBoxInBarsRange,t,f.dematerializeDwgBox),D.dwgtables=V(e.dwgtables(),k,L,O,t,y.dematerializeDwgTable),D.dwgtablecells=B(e.dwgtablecells(),N,L,O,t,y.dematerializeDwgTableCell),D.dwglinefills=B(e.dwglinefills(),N,L,O,t,x.dematerializeDwgLineFill);const n=new Map(Array.from(null!==(P=null===(i=e.tpos().get("tpo"))||void 0===i?void 0:i.values())&&void 0!==P?P:[]).map((e=>[e.id,e]))),r=e=>n.get(e),o=V(e.tpoBlockSets(),N,L,I.isTpoBlockSetInBarsRange.bind(null,r),t,I.dematerializeTpoBlockSet);D.tpoLevels=V(e.tpoLevels(),N,L,T.isTpoLevelInBarsRange.bind(null,r),t,T.dematerializeTpoLevelGroup),D.tpoVolumeRows=V(e.tpoVolumeRows(),N,L,w.isTpoVolumeRowsInBarsRange.bind(null,r),t,w.dematerializeTpoVolumeRow);const s=[null==o?void 0:o[0].data,null===(C=D.tpoLevels)||void 0===C?void 0:C[0].data,null===(A=D.tpoVolumeRows)||void 0===A?void 0:A[0].data].filter(E.notUndefined).reduce(((e,t)=>e.concat(t.map((e=>e.tpoId)))),[]),a=new Set(s);D.tpos=B(e.tpos(),k,L,(e=>a.has(e.id)),t,_.dematerializeTpo),D.tpoBlockSets=V(e.tpoBlockSets(),N,L,(e=>a.has(e.tpoId)),t,I.dematerializeTpoBlockSet),D.footprints=B(e.footprints(),N,L,b.isVolumeFootprintInBarsRange,t,b.dematerializeVolumeFootprint),D.footprintLevels=B(e.footprintLevels(),N,L,S.isVolumeFootprintPriceLevelInBarsRange,t,S.dematerializeVolumeFootprintPriceLevel)}return D}},355468:(e,t,i)=>{"use strict";i.d(t,{getPrimitiveDataKey:()=>s,getPrimitiveKey:()=>o,groupedPrimitiveNames:()=>l,hasForceOverlayPrimitives:()=>m,isRegularPrimiriveName:()=>u,isStudyGraphicsEmpty:()=>h,primitiveNames:()=>d,primitivesZOrders:()=>c,regularPrimitiveNames:()=>a,splitHHistsByTimePointIndex:()=>p});const n=["dwglines","dwgboxes","dwglabels","dwgpolylines","dwgtables"];function r(e){return n.includes(e)}function o(e,t){return r(t)?(e=>!!e.forceOverlay)(e):(e=>e.tpoId)(e)}function s(e,t){return r(t)?!!e.fo:(e=>e.tpoId)(e)}
const a=["horizlines","vertlines","lines","hlines","textmarks","shapemarks","backgrounds","polygons","trendchannels","hhists","dwgtablecells","dwglinefills","tpos","logs","performance","footprints","footprintLevels"],l=n.concat(["tpoBlockSets","tpoLevels","tpoVolumeRows"]),d=a.concat(l);function u(e){return a.includes(e)}const c=new Map([["logs",-4],["performance",-4],["polygons",-4],["trendchannels",-3],["textmarks",-2],["shapemarks",-2],["backgrounds",-1],["footprints",1],["footprintLevels",1],["hlines",1],["horizlines",1],["hhists",1],["dwglinefills",2],["vertlines",3],["lines",3],["dwglines",3],["dwgpolylines",3],["dwgboxes",4],["dwglabels",5],["dwgtables",6],["dwgtablecells",6],["tpos",7],["tpoBlockSets",7],["tpoLevels",7],["tpoVolumeRows",7]]);function h(e){return!d.some((t=>{const i=e[t]();for(const[,e]of i)if(e.size>0)return!0;return!1}))}function p(e){const t=new Map;return e.forEach(((e,i)=>{e.forEach((e=>{const n={...e,styleId:i},r=e.firstBarTime;let o=t.get(r);void 0===o&&(o=new Set,t.set(r,o)),o.add(n)}))})),t}function m(e){return!!(e.graphics.dwglines||e.graphics.dwgboxes||e.graphics.dwglabels||e.graphics.dwgpolylines||e.graphics.dwgtables)}},968632:(e,t,i)=>{"use strict";i.d(t,{TextMarkType:()=>n,containsTextMarkTimePointIndexes:()=>a,dematerializeTextMark:()=>d,isTextMarkInBarsRange:()=>u,materializeTextMark:()=>l});var n,r,o=i(501571),s=i(585240);!function(e){e.Triangle="triangle",e.Rectangle="rectangle"}(n||(n={})),function(e){e.Verdana="Verdana",e.CourierNew="Courier New",e.TimesNewRoman="Times New Roman",e.Arial="Arial"}(r||(r={}));const a=!0;function l(e,t){if(e.time>=t.length)return null;const i=t[e.time];return i===o.INVALID_TIME_POINT_INDEX?null:{time:i,offset:e.offset,text:e.text,price:e.price}}function d(e,t,i){const n=(0,s.ensureTimePointIndexIndex)(i.indexOf(e.time));return{id:t,...e,time:n}}function u(e,t){var i;return t.contains(e.time+(null!==(i=e.offset)&&void 0!==i?i:0))}},487027:(e,t,i)=>{"use strict";i.d(t,{containsTpoBlockSetTimePointIndexes:()=>r,dematerializeTpoBlockSet:()=>s,isTpoBlockSetInBarsRange:()=>a,materializeTpoBlockSet:()=>o});var n=i(892686);const r=!1;function o(e,t){return{tpoId:e.tpoId,blocks:e.blocks,rowIndex:e.rowIndex}}function s(e,t,i){return{id:t,tpoId:e.tpoId,blocks:e.blocks,rowIndex:e.rowIndex}}function a(e,t,i){const r=e(t.tpoId);return Boolean(r&&(0,n.isTpoInBarsRange)(r,i))}},399890:(e,t,i)=>{"use strict";i.d(t,{containsTpoLevelGroupTimePointIndexes:()=>s,dematerializeTpoLevelGroup:()=>c,isTpoLevelInBarsRange:()=>h,materializeTpoLevelGroup:()=>l});var n=i(124829),r=i(501571),o=i(585240);const s=!0;function a(e,t){const i=null==e?e:t[e];return i===r.INVALID_TIME_POINT_INDEX?null:i}function l(e,t){var i;return{tpoId:e.tpoId,tpoPocIndex:e.tpoPocIndex,tpoPocExtendTo:a(e.tpoPocExtendTo,t),tpoValIndex:e.tpoValIndex,tpoValExtendTo:a(e.tpoValExtendTo,t),tpoVahIndex:e.tpoVahIndex,tpoVahExtendTo:a(e.tpoVahExtendTo,t),tpoMidpointIndex:e.tpoMidpointIndex,volumePocIndex:e.volumePocIndex,volumePocExtendTo:a(e.volumePocExtendTo,t),volumeValIndex:e.volumeValIndex,
volumeValExtendTo:a(e.volumeValExtendTo,t),volumeVahIndex:e.volumeVahIndex,volumeVahExtendTo:a(e.volumeVahExtendTo,t),poorHighIndex:e.poorHighIndex,poorHighExtendTo:a(e.poorHighExtendTo,t),poorLowIndex:e.poorLowIndex,poorLowExtendTo:a(e.poorLowExtendTo,t),singleprints:null===(i=e.singleprints)||void 0===i?void 0:i.map((e=>function(e,t){return{index:e.index,extendTo:a(e.extendTo,t)}}(e,t)))}}function d(e,t){return null==e?e:(0,o.ensureTimePointIndexIndex)(t.indexOf(e))}function u(e){return Object.keys(e).filter((t=>void 0===e[t])).forEach((t=>delete e[t])),e}function c(e,t,i){var n;return u({id:t,tpoId:e.tpoId,tpoPocIndex:e.tpoPocIndex,tpoPocExtendTo:d(e.tpoPocExtendTo,i),tpoValIndex:e.tpoValIndex,tpoValExtendTo:d(e.tpoValExtendTo,i),tpoVahIndex:e.tpoVahIndex,tpoVahExtendTo:d(e.tpoVahExtendTo,i),tpoMidpointIndex:e.tpoMidpointIndex,volumePocIndex:e.volumePocIndex,volumePocExtendTo:d(e.volumePocExtendTo,i),volumeValIndex:e.volumeValIndex,volumeValExtendTo:d(e.volumeValExtendTo,i),volumeVahIndex:e.volumeVahIndex,volumeVahExtendTo:d(e.volumeVahExtendTo,i),poorHighIndex:e.poorHighIndex,poorHighExtendTo:d(e.poorHighExtendTo,i),poorLowIndex:e.poorLowIndex,poorLowExtendTo:d(e.poorLowExtendTo,i),singleprints:null===(n=e.singleprints)||void 0===n?void 0:n.map((e=>function(e,t){return u({index:e.index,extendTo:d(e.extendTo,t)})}(e,i)))})}function h(e,t,i){var r;const o=e(t.tpoId);if(!o)return!1;const s=o.firstBarTime,a=[t.poorHighExtendTo,t.poorLowExtendTo,t.tpoPocExtendTo,t.tpoValExtendTo,t.tpoVahExtendTo,t.volumePocExtendTo,t.volumeValExtendTo,t.volumeVahExtendTo].concat((null!==(r=t.singleprints)&&void 0!==r?r:[]).map((e=>e.extendTo))).filter(n.notUndefined).map((e=>null!=e?e:1/0)),l=a.length?Math.max(...a):null;return!((null!=l?l:o.lastBarTime)<i.firstBar()||s>i.lastBar())}},73239:(e,t,i)=>{"use strict";i.d(t,{containsTpoVolumeRowTimePointIndexes:()=>r,dematerializeTpoVolumeRow:()=>s,isTpoVolumeRowsInBarsRange:()=>a,materializeTpoVolumeRow:()=>o});var n=i(892686);const r=!1;function o(e,t){return{tpoId:e.tpoId,rowIndex:e.rowIndex,volume:e.volume}}function s(e,t,i){return{id:t,tpoId:e.tpoId,rowIndex:e.rowIndex,volume:e.volume}}function a(e,t,i){const r=e(t.tpoId);return Boolean(r&&(0,n.isTpoInBarsRange)(r,i))}},892686:(e,t,i)=>{"use strict";i.d(t,{containsTpoTimePointIndexes:()=>s,dematerializeTpo:()=>l,isTpoInBarsRange:()=>d,materializeTpo:()=>a});var n=i(650151),r=i(501571),o=i(585240);const s=!0;function a(e,t){if(e.firstBarTime>=t.length||e.lastBarTime>=t.length)return null;const i=t[e.firstBarTime],o=t[e.lastBarTime];return i===r.INVALID_TIME_POINT_INDEX||o===r.INVALID_TIME_POINT_INDEX?null:((0,n.assert)(i<=o,"firstBarTime should not exceed lastBarTime"),{id:e.id,firstBarTime:i,lastBarTime:o,priceRange:e.priceRange,times:e.times})}function l(e,t,i){return{id:t,firstBarTime:(0,o.ensureTimePointIndexIndex)(i.indexOf(e.firstBarTime)),lastBarTime:(0,o.ensureTimePointIndexIndex)(i.indexOf(e.lastBarTime)),priceRange:e.priceRange,times:e.times}}function d(e,t){return!(e.lastBarTime<t.firstBar()||e.firstBarTime>t.lastBar())}},
323070:(e,t,i)=>{"use strict";i.d(t,{containsTrendChannelTimePointIndexes:()=>s,dematerializeTrendChannel:()=>l,isTrendChannelInBarsRange:()=>d,materializeTrendChannel:()=>a});var n=i(650151),r=i(501571),o=i(585240);const s=!0;function a(e,t){if(e.startIndex>=t.length||e.endIndex>=t.length)return null;const i=t[e.startIndex],o=t[e.endIndex];return i===r.INVALID_TIME_POINT_INDEX||o===r.INVALID_TIME_POINT_INDEX?null:((0,n.assert)(i<=o,"startIndex should not exceed endIndex"),{startIndex:i,endIndex:o,extendLeft:e.extendLeft,extendRight:e.extendRight,startHighPrice:e.startHighPrice,startLowPrice:e.startLowPrice,endHighPrice:e.endHighPrice,transparency:e.transparency})}function l(e,t,i){const n=(0,o.ensureTimePointIndexIndex)(i.indexOf(e.startIndex)),r=(0,o.ensureTimePointIndexIndex)(i.indexOf(e.endIndex));return{id:t,...e,startIndex:n,endIndex:r}}function d(e,t){const i=Math.min(e.startIndex,e.endIndex),n=Math.max(e.startIndex,e.endIndex);if(t.contains(i)||t.contains(n)||i<t.firstBar()&&n>t.lastBar())return!0;const r=e.startIndex<e.endIndex?e.extendLeft:e.extendRight,o=e.startIndex<e.endIndex?e.extendRight:e.extendLeft;return n<t.firstBar()&&o||i>t.lastBar()&&r}},267439:(e,t,i)=>{"use strict";i.d(t,{containsVertLineTimePointIndexes:()=>o,dematerializeVertLine:()=>a,isVertLineInBarsRange:()=>l,materializeVertLine:()=>s});var n=i(501571),r=i(585240);const o=!0;function s(e,t){if(e.index>=t.length)return null;const i=t[e.index];return i===n.INVALID_TIME_POINT_INDEX?null:{startPrice:e.startPrice,endPrice:e.endPrice,index:i,extendTop:e.extendTop,extendBottom:e.extendBottom}}function a(e,t,i){const n=(0,r.ensureTimePointIndexIndex)(i.indexOf(e.index));return{id:t,...e,index:n}}function l(e,t){return t.contains(e.index)}},408582:(e,t,i)=>{"use strict";i.d(t,{containsFootprintPriceLevelTimePointIndexes:()=>o,dematerializeVolumeFootprintPriceLevel:()=>a,isVolumeFootprintPriceLevelInBarsRange:()=>l,materializeVolumeFootprintPriceLevel:()=>s});var n=i(501571),r=i(585240);const o=!0;function s(e,t){if(e.startIndex>=t.length)return null;const i=t[e.startIndex],r=null===e.extendTo?null:t[e.extendTo];return i===n.INVALID_TIME_POINT_INDEX||r===n.INVALID_TIME_POINT_INDEX?null:{id:e.id,price:e.price,type:e.type,startIndex:i,extendTo:r}}function a(e,t,i){var o,s;const a=(0,r.ensureTimePointIndexIndex)(i.indexOf(null!==(o=e.startIndex)&&void 0!==o?o:n.INVALID_TIME_POINT_INDEX)),l=null===e.extendTo?null:(0,r.ensureTimePointIndexIndex)(i.indexOf(null!==(s=e.extendTo)&&void 0!==s?s:n.INVALID_TIME_POINT_INDEX));return{id:t,price:e.price,type:e.type,startIndex:a,extendTo:l}}function l(e,t){var i;const n=e.startIndex;return!((null!==(i=e.extendTo)&&void 0!==i?i:1/0)<t.firstBar()||n>t.lastBar())}},255866:(e,t,i)=>{"use strict";i.d(t,{VolumeFootprintTypeValues:()=>n,containsFootprintTimePointIndexes:()=>s,dematerializeVolumeFootprint:()=>l,isVolumeFootprintInBarsRange:()=>d,materializeVolumeFootprint:()=>a});var n,r=i(501571),o=i(585240);!function(e){e.BuyAndSell="Buy and sell",e.Delta="Delta",e.Total="Total"}(n||(n={}));const s=!0;function a(e,t){
if(e.index>=t.length)return null;let i=t[e.index];return i===r.INVALID_TIME_POINT_INDEX&&(i=null),null===i?null:{id:e.id,index:i,poc:e.poc,val:e.val,vah:e.vah,levels:e.levels}}function l(e,t,i){var n;return{id:t,index:(0,o.ensureTimePointIndexIndex)(i.indexOf(null!==(n=e.index)&&void 0!==n?n:r.INVALID_TIME_POINT_INDEX)),poc:e.poc,val:e.val,vah:e.vah,levels:e.levels}}function d(e,t){return t.contains(e.index)}},281233:(e,t,i)=>{"use strict";var n;i.d(t,{StudyStatusType:()=>n}),function(e){e[e.Undefined=0]="Undefined",e[e.Loading=1]="Loading",e[e.Completed=2]="Completed",e[e.Error=3]="Error"}(n||(n={}))},984217:(e,t,i)=>{"use strict";function n(e){const t=new Map;return e.plots.forEach(((e,i)=>{t.set(e.id,(e=>e[i+1]))})),t}function r(e,t){return null==e[t]}i.d(t,{studyEmptyPlotValuePredicate:()=>r,studyPlotFunctionMap:()=>n})},218049:(e,t,i)=>{"use strict";i.d(t,{ChartColorDependentStudyInputNames:()=>h,InputDisplayFlags:()=>n,RangeDependentStudyInputNames:()=>c,areStudyInputsEqual:()=>u,editableStudyInputs:()=>v,getInputValue:()=>a,isExtendedInput:()=>o,isExtendedInputSource:()=>s,isStudyInputDependsOnChart:()=>f,isStudyInputDependsOnChartColors:()=>g,isStudyInputOptionsInfo:()=>d,isTimeOrPriceNotHiddenInput:()=>m,rangeDependentStudyInputsToTimeRange:()=>p,studyAvailableConstSources:()=>l});var n,r=i(598279);function o(e){return(0,r.default)(e)}function s(e){return"source"===e.t}function a(e){return o(e)?e.v:e}!function(e){e[e.None=0]="None",e[e.DataWindow=2]="DataWindow",e[e.StatusLine=8]="StatusLine",e[e.All=15]="All"}(n||(n={}));const l=["open","high","low","close","hl2","hlc3","ohlc4","hlcc4"];function d(e){return["text","integer","float","price","session","resolution"].includes(e.type)&&e.hasOwnProperty("options")}function u(e,t,i){for(const n of e)if(t[n.id]!==i[n.id])return!1;return!0}var c,h;function p(e){return{from:Math.round(e.first_visible_bar_time/1e3),to:Math.round(e.last_visible_bar_time/1e3)}}function m(e){return("time"===e.type||"price"===e.type)&&!0!==e.isHidden}function v(e){const t=e.filter(m);if(0===t.length)return[];const i=new Map,n=[];t.forEach((e=>{var t;const{group:r,inline:o}=e;if(void 0===o)return void n.push(e);const s=o+(r||"");if(i.has(s))null===(t=i.get(s))||void 0===t||t.push(e);else{const t=[e];i.set(s,t),n.push(t)}}));const r=[];for(let e=0;e<n.length;e++){const t=n[e];Array.isArray(t)?2===t.length&&t[0].type!==t[1].type?r.push(t):r.push(...t):r.push(t)}return r}function g(e){return Object.values(h).map((e=>e)).includes(e.id)}function f(e){return!!g(e)||Object.values(c).map((e=>e)).includes(e.id)}!function(e){e.FirstBar="first_visible_bar_time",e.LastBar="last_visible_bar_time",e.Realtime="subscribeRealtime"}(c||(c={})),function(e){e.FgColor="__chart_fgcolor",e.BgColor="__chart_bgcolor"}(h||(h={}))},757402:(e,t,i)=>{"use strict";i.d(t,{StudyStatusType:()=>c,convertStudyStatusToString:()=>h,createStudyError:()=>f,studyErrorStatusStackTrace:()=>g,studyStatusFeature:()=>v,studyStatusSolutionId:()=>p,studyStatusTitle:()=>m});var n=i(444372),r=i(342707),o=i(585627)
;const s=n.t(null,void 0,i(150910));function a(e){const t=e.toLowerCase();return t.includes("the data vendor doesn't provide volume data for this symbol.")||t.includes("no volume is provided by the data vendor")}const l=new Map([["This script is invite-only",o.solutionIds.PUBLIC_INVITE_ONLY_SCRIPTS]]),d=new Map([["Volume Profile indicator available only on our upgraded plans","volumeProfile"]]),u=n.t(null,void 0,i(662011));var c;function h(e,t){if(e.type===c.Loading)return t?u:"loading...";if(e.type===c.Error){const i=e.errorDescription,n=t?(0,r.triesTranslateError)(i.error):i.error;if(i.ctx){const e={};return Object.entries(i.ctx).forEach((([t,i])=>{e[t]=i.toString()})),n.format(e)}return n}return""}function p(e){if(e.type===c.Error)return e.errorDescription.solution_id?e.errorDescription.solution_id:function(e){for(const t of Array.from(l.keys()))if(e.includes(t))return l.get(t)}(e.errorDescription.error)}function m(e){var t;if(e.type===c.Error)return a(e.errorDescription.error)?s:(0,r.triesTranslateError)(null!==(t=e.errorDescription.title)&&void 0!==t?t:"Runtime error")}function v(e){const{errorDescription:{error:t}}=e;for(const[e,i]of d)if(t.startsWith(e))return i}function g(e){if(void 0===e)return;const t=[];for(const i of e){const e={functionOrScopeName:i.n,lineNumber:i.p};"id"in i&&(e.id=i.id),"v"in i&&(e.versionScript=i.v),t.push(e)}return t}function f(e,t){return"BISTMIXED"===t&&a(e.error)&&(e.error="VOLUME_BIST_MIXED",e.solution_id=o.solutionIds.BIST_MIXED_SUBSCRIPTION,e.title=s),{type:c.Error,errorDescription:e}}!function(e){e[e.Undefined=0]="Undefined",e[e.Loading=1]="Loading",e[e.Completed=2]="Completed",e[e.Error=3]="Error"}(c||(c={}))},230844:(e,t,i)=>{"use strict";i.d(t,{getAlertsActionCreators:()=>r});var n=i(895171);const r=(0,n.default)((async()=>new((await Promise.all([i.e(22568),i.e(91424),i.e(46807),i.e(49502)]).then(i.bind(i,647533))).AlertsActionCreators)));(0,n.default)((async()=>new((await Promise.all([i.e(22568),i.e(91424),i.e(46807),i.e(68074)]).then(i.bind(i,334284))).FiresActionCreators)))},694193:(e,t,i)=>{"use strict";i.d(t,{getAlertDescription:()=>o});var n=i(882782),r=i(472814);function o(e){return function(e){return"function"==typeof e.name?e.name():e.name}(e)||function(e){return"description"in e?e.description():e.message}(e)||function(e){const t=function(e){return"dataSource"in e?"symbol"===e.dataSource.type?e.dataSource.symbol:e.dataSource.watchlistName:"function"==typeof e.symbol?(0,n.decodeExtendedSymbol)(e.symbol()):e.symbol}(e),i="function"==typeof e.resolution?e.resolution():e.resolution,o="function"==typeof e.crossInterval?e.crossInterval():e.crossInterval;return(0,r.formatSymbolAndResolution)({symbol:t,resolution:i,crossInterval:o})}(e)}},407781:(e,t,i)=>{"use strict";function n(e=0){return e<1e3?e:e/1e3}function r(e,t){if(e.length>t){const i=/[\W]+$/g,n=e.substring(0,t),r=n.replace(i,"");return`${r.length?r:n.substring(0,t-1)}â€¦`}return e}i.d(t,{cutString:()=>r,ensureDurationInSeconds:()=>n})},383851:(e,t,i)=>{"use strict";i.d(t,{getAlertsFiresFocusHandler:()=>n})
;const n=(0,i(895171).default)((async()=>{const{AlertsFiresFocusHandler:e}=await i.e(69581).then(i.bind(i,14048));return new e}))},472814:(e,t,i)=>{"use strict";i.d(t,{formatSymbolAndResolution:()=>a});var n=i(268552),r=i.n(n),o=i(882782),s=i(53072);function a(e,t){const i=function(e,t){let i=(0,o.unwrapSimpleSymbol)(e);t||(i=r().shortName(i));return i}(e.symbol,t);if(e.crossInterval)return i;return i+(0,s.formatAppendingResolutionString)(e.resolution)}},802588:(e,t,i)=>{"use strict";i.d(t,{isShowPromoVideo:()=>c,isSignModalOpen:()=>u,showSignModal:()=>d});var n=i(586240),r=i(901896),o=i(490778);const s=n["media-mf-tablet-landscape"],a=n["media-mf-tablet-vertical"];let l=()=>!1;async function d(e){const t=Object.assign({},e,{isShowVideo:c()});if(window.TVD&&window.TVD.signIn)return window.TVD.signIn(t);{!function(){const e=window.matchMedia(n["media-mf-tablet-landscape"]).matches?o:r,t=document.createElement("link");t.rel="preload",t.as="image",t.href=e,document.head.appendChild(t)}();const e=await Promise.all([i.e(70873),i.e(75816),i.e(46445),i.e(93703),i.e(21356),i.e(62093),i.e(44524),i.e(53799),i.e(62564),i.e(46489),i.e(25480),i.e(29800),i.e(77476),i.e(23141),i.e(95083),i.e(29296),i.e(3062),i.e(22602),i.e(91248),i.e(60048),i.e(95682),i.e(82321),i.e(56205),i.e(64436),i.e(62526),i.e(21372),i.e(36123)]).then(i.bind(i,695934));return l=e.isSignModalOpen,e.showSignModal(t)}}function u(){return l()}function c(){const e=window.matchMedia(s).matches,t=window.matchMedia(a).matches,i=window.innerWidth,n=window.innerHeight;return!!e||!!t&&!(!e&&n<i)}},547777:(e,t,i)=>{"use strict";function n(e){return e+"â€¦"}i.d(t,{appendEllipsis:()=>n})},524561:(e,t,i)=>{"use strict";i.d(t,{getTwemojiUrl:()=>r,twemoji:()=>n.default});var n=i(818438);function r(e,t){let i="";return n.default.parse(e,(e=>(i=n.default.base+("svg"===t?`svg/${e}.svg`:`72x72/${e}.png`),!1))),i}n.default.base="https://cdnjs.cloudflare.com/ajax/libs/twemoji/13.0.1/"},576119:(e,t,i)=>{"use strict";i.d(t,{disable:()=>d,enable:()=>u,pushBackListener:()=>l});var n=i(79342);const r=[];let o=null;function s(e){for(let t=0;t<r.length;t++)if(r[t].name===e)return t;return-1}function a(e){if(!o)for(let t=r.length-1;t>=0&&!0!==r[t].func(e);t--);}function l(e,t){const i={name:e,func:t},n=s(i.name);n>-1&&r.splice(n,1),r.unshift(i)}function d(){return o?null:(o=(0,n.randomHashN)(4),o)}function u(e){if(e!==o)throw Error("Lock id is outdated");o=null}window.addEventListener("keypress",a,!1)},454763:(e,t,i)=>{"use strict";i.d(t,{Worker:()=>n});class n extends Worker{constructor(e,t){super(function(e){const t=new URL(e),n=new Blob(["self.WEBPACK_PUBLIC_PATH=",JSON.stringify(new URL(i.p,location.href).href),";\n","self.locale=",JSON.stringify(i.g.locale),";\n",window.language?`self.language=${JSON.stringify(window.language)};\n`:"","importScripts(",JSON.stringify(t.href),");"],{type:"application/javascript"});return URL.createObjectURL(n)}(e),t)}}},861814:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" width="28" height="28"><path fill="currentColor" d="M15.08 5.75a5.07 5.07 0 0 1 7.17 7.17l-3.23 3.23-.7-.7 3.22-3.24a4.07 4.07 0 1 0-5.75-5.75l-3.23 3.23-.7-.71 3.22-3.23Zm-9.33 9.33a5.07 5.07 0 1 0 7.17 7.17l3.23-3.23-.7-.7-3.24 3.22a4.07 4.07 0 1 1-5.75-5.75l3.23-3.23-.71-.7-3.23 3.22Zm10.77-4.3-5.74 5.74.7.7 5.75-5.74-.71-.7Z"/></svg>'}}]);